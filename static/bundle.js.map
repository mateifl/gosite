{"version":3,"sources":["webpack:///webpack/bootstrap","webpack:///./data/shapes.sgf","webpack:///./node_modules/@sabaki/deadstones/js/main.js","webpack:///./node_modules/@sabaki/deadstones/js/wasm.js","webpack:///./node_modules/@sabaki/influence/src/areaMap.js","webpack:///./node_modules/@sabaki/influence/src/helper.js","webpack:///./node_modules/@sabaki/influence/src/influenceMap.js","webpack:///./node_modules/@sabaki/influence/src/main.js","webpack:///./node_modules/@sabaki/influence/src/nearestNeighborMap.js","webpack:///./node_modules/@sabaki/influence/src/radianceMap.js","webpack:///./node_modules/@sabaki/sgf/src/helper.js","webpack:///./node_modules/@sabaki/sgf/src/main.js","webpack:///./node_modules/@sabaki/sgf/src/parse.js","webpack:///./node_modules/@sabaki/sgf/src/stringify.js","webpack:///./node_modules/@sabaki/sgf/src/tokenize.js","webpack:///./node_modules/bail/index.js","webpack:///./node_modules/classnames/index.js","webpack:///./node_modules/collapse-white-space/index.js","webpack:///./node_modules/copy-text-to-clipboard/index.js","webpack:///./node_modules/events/events.js","webpack:///./node_modules/extend/index.js","webpack:///./node_modules/inherits/inherits_browser.js","webpack:///./node_modules/is-alphabetical/index.js","webpack:///./node_modules/is-alphanumerical/index.js","webpack:///./node_modules/is-buffer/index.js","webpack:///./node_modules/is-decimal/index.js","webpack:///./node_modules/is-hexadecimal/index.js","webpack:///./node_modules/is-plain-obj/index.js","webpack:///./node_modules/is-whitespace-character/index.js","webpack:///./node_modules/is-word-character/index.js","webpack:///./node_modules/markdown-escapes/index.js","webpack:///./node_modules/natsort/index.js","webpack:///./node_modules/parse-entities/index.js","webpack:///./node_modules/path-browserify/index.js","webpack:///./node_modules/pikaday/pikaday.js","webpack:///./node_modules/preact/dist/preact.min.js","webpack:///./node_modules/process/browser.js","webpack:///./node_modules/react-markdown/lib/ast-to-react.js","webpack:///./node_modules/react-markdown/lib/get-definitions.js","webpack:///./node_modules/react-markdown/lib/plugins/disallow-node.js","webpack:///./node_modules/react-markdown/lib/plugins/naive-html.js","webpack:///./node_modules/react-markdown/lib/react-markdown.js","webpack:///./node_modules/react-markdown/lib/renderers.js","webpack:///./node_modules/react-markdown/lib/uriTransformer.js","webpack:///./node_modules/react-markdown/lib/wrap-table-rows.js","webpack:///./node_modules/remark-breaks/index.js","webpack:///./node_modules/remark-parse/index.js","webpack:///./node_modules/remark-parse/lib/decode.js","webpack:///./node_modules/remark-parse/lib/defaults.js","webpack:///./node_modules/remark-parse/lib/locate/break.js","webpack:///./node_modules/remark-parse/lib/locate/code-inline.js","webpack:///./node_modules/remark-parse/lib/locate/delete.js","webpack:///./node_modules/remark-parse/lib/locate/emphasis.js","webpack:///./node_modules/remark-parse/lib/locate/escape.js","webpack:///./node_modules/remark-parse/lib/locate/link.js","webpack:///./node_modules/remark-parse/lib/locate/strong.js","webpack:///./node_modules/remark-parse/lib/locate/tag.js","webpack:///./node_modules/remark-parse/lib/locate/url.js","webpack:///./node_modules/remark-parse/lib/parse.js","webpack:///./node_modules/remark-parse/lib/parser.js","webpack:///./node_modules/remark-parse/lib/set-options.js","webpack:///./node_modules/remark-parse/lib/tokenize/auto-link.js","webpack:///./node_modules/remark-parse/lib/tokenize/blockquote.js","webpack:///./node_modules/remark-parse/lib/tokenize/break.js","webpack:///./node_modules/remark-parse/lib/tokenize/code-fenced.js","webpack:///./node_modules/remark-parse/lib/tokenize/code-indented.js","webpack:///./node_modules/remark-parse/lib/tokenize/code-inline.js","webpack:///./node_modules/remark-parse/lib/tokenize/definition.js","webpack:///./node_modules/remark-parse/lib/tokenize/delete.js","webpack:///./node_modules/remark-parse/lib/tokenize/emphasis.js","webpack:///./node_modules/remark-parse/lib/tokenize/escape.js","webpack:///./node_modules/remark-parse/lib/tokenize/footnote-definition.js","webpack:///./node_modules/remark-parse/lib/tokenize/heading-atx.js","webpack:///./node_modules/remark-parse/lib/tokenize/heading-setext.js","webpack:///./node_modules/remark-parse/lib/tokenize/html-block.js","webpack:///./node_modules/remark-parse/lib/tokenize/html-inline.js","webpack:///./node_modules/remark-parse/lib/tokenize/link.js","webpack:///./node_modules/remark-parse/lib/tokenize/list.js","webpack:///./node_modules/remark-parse/lib/tokenize/newline.js","webpack:///./node_modules/remark-parse/lib/tokenize/paragraph.js","webpack:///./node_modules/remark-parse/lib/tokenize/reference.js","webpack:///./node_modules/remark-parse/lib/tokenize/strong.js","webpack:///./node_modules/remark-parse/lib/tokenize/table.js","webpack:///./node_modules/remark-parse/lib/tokenize/text.js","webpack:///./node_modules/remark-parse/lib/tokenize/thematic-break.js","webpack:///./node_modules/remark-parse/lib/tokenize/url.js","webpack:///./node_modules/remark-parse/lib/tokenizer.js","webpack:///./node_modules/remark-parse/lib/unescape.js","webpack:///./node_modules/remark-parse/lib/util/get-indentation.js","webpack:///./node_modules/remark-parse/lib/util/html.js","webpack:///./node_modules/remark-parse/lib/util/interrupt.js","webpack:///./node_modules/remark-parse/lib/util/normalize.js","webpack:///./node_modules/remark-parse/lib/util/remove-indentation.js","webpack:///./node_modules/repeat-string/index.js","webpack:///./node_modules/replace-ext/index.js","webpack:///./node_modules/setimmediate/setImmediate.js","webpack:///./node_modules/state-toggle/index.js","webpack:///./node_modules/timers-browserify/main.js","webpack:///./node_modules/trim-trailing-lines/index.js","webpack:///./node_modules/trim/index.js","webpack:///./node_modules/trough/index.js","webpack:///./node_modules/unherit/index.js","webpack:///./node_modules/unified/index.js","webpack:///./node_modules/unist-util-is/index.js","webpack:///./node_modules/unist-util-remove-position/index.js","webpack:///./node_modules/unist-util-stringify-position/index.js","webpack:///./node_modules/unist-util-visit/index.js","webpack:///./node_modules/vfile-location/index.js","webpack:///./node_modules/vfile-message/index.js","webpack:///./node_modules/vfile/core.js","webpack:///./node_modules/vfile/index.js","webpack:///(webpack)/buildin/global.js","webpack:///./node_modules/x-is-string/index.js","webpack:///./node_modules/xtend/immutable.js","webpack:///./src/components/App.js","webpack:///./src/components/BusyScreen.js","webpack:///./src/components/CommentBox.js","webpack:///./src/components/ContentDisplay.js","webpack:///./src/components/DrawerManager.js","webpack:///./src/components/GameGraph.js","webpack:///./src/components/Goban.js","webpack:///./src/components/InfoOverlay.js","webpack:///./src/components/InputBox.js","webpack:///./src/components/MainView.js","webpack:///./src/components/MarkdownContentDisplay.js","webpack:///./src/components/MiniGoban.js","webpack:///./src/components/Sidebar.js","webpack:///./src/components/Slider.js","webpack:///./src/components/bars/Bar.js","webpack:///./src/components/bars/EditBar.js","webpack:///./src/components/bars/FindBar.js","webpack:///./src/components/bars/PlayBar.js","webpack:///./src/components/bars/ScoringBar.js","webpack:///./src/components/drawers/Drawer.js","webpack:///./src/components/drawers/GameChooserDrawer.js","webpack:///./src/components/drawers/InfoDrawer.js","webpack:///./src/components/drawers/ScoreDrawer.js","webpack:///./src/modules/board.js","webpack:///./src/modules/boardmatcher.js","webpack:///./src/modules/dialog.js","webpack:///./src/modules/fileformats/gib.js","webpack:///./src/modules/fileformats/index.js","webpack:///./src/modules/fileformats/ngf.js","webpack:///./src/modules/fileformats/sgf.js","webpack:///./src/modules/gamesort.js","webpack:///./src/modules/gametree.js","webpack:///./src/modules/helper.js","webpack:///./src/modules/shims/Menu.js","webpack:///./src/modules/shims/buffer.js","webpack:///./src/modules/shims/electron.js","webpack:///./src/modules/shims/empty.js","webpack:///./src/modules/shims/fs.js","webpack:///./src/modules/shims/iconv-lite.js","webpack:///./src/modules/shims/jschardet.js","webpack:///./src/modules/shims/noop.js","webpack:///./src/modules/shims/prop-types.js","webpack:///./src/modules/shims/util.js","webpack:///./src/modules/sound.js","webpack:///./src/setting.js"],"names":["wasm","require","parseBoard","data","reduce","acc","x","push","length","parseVertices","indices","width","map","i","parseGrid","values","Array","_","y","slice","exports","useFetch","path","fetchPath","guess","finished","iterations","newData","Date","now","playTillEnd","sign","play_till_end","getProbabilityMap","get_probability_map","getFloatingStones","get_floating_stones","make","result","cachegetUint8Memory","getUint8Memory","buffer","memory","Uint8Array","cachegetUint64Memory","getUint64Memory","BigUint64Array","passArray8ToWasm","arg","ptr","__wbindgen_malloc","set","cachegetUint32Memory","getUint32Memory","Uint32Array","getArrayU32FromWasm","len","subarray","cachedGlobalArgumentPtr","globalArgumentPtr","__wbindgen_global_argument_ptr","arg0","arg1","arg2","arg3","arg4","ptr0","len0","retptr","mem","realRet","__wbindgen_free","cachegetFloat32Memory","getFloat32Memory","Float32Array","getArrayF32FromWasm","cachegetInt8Memory","getInt8Memory","Int8Array","getArrayI8FromWasm","TextDecoder","cachedDecoder","getStringFromWasm","decode","__wbindgen_throw","Error","importObj","module","Promise","resolve","reject","join","readFile","__dirname","err","WebAssembly","instantiate","catch","fetch","then","response","arrayBuffer","instance","getNeighbors","getChain","height","fill","vertex","chain","indicator","c","n","nx","ny","cx","cy","v","done","neighbors","areaMap","nearestNeighborMap","radianceMap","discrete","maxDistance","minRadiance","pnnmap","nnnmap","prmap","nrmap","s","Math","faraway","dim","round","filter","j","every","distance","min","friendlyNeighbors","signedNeighbors","i1","j1","i2","j2","sum","influence","Infinity","f","old","p1","p2","p3","size","getMirroredVertex","z","castRadiance","queue","visited","shift","d","mv","forEach","w","alpha","escapeString","input","toString","replace","unescapeString","inBackslash","parseDates","match","trim","dates","split","date","prev","unshift","stringifyDates","datesCopy","k","parseVertex","indexOf","stringifyVertex","max","parseCompressedVertices","colon","v1","v2","vertices","tokenize","detectEncoding","parseTokens","parse","parseFile","stringify","helper","Object","assign","fs","iconv","jschardet","defaultEncoding","tokens","sampleLength","sampleText","type","value","detected","detect","confidence","encoding","_parseTokens","getId","onProgress","start","node","property","identifier","tree","id","nodes","subtrees","current","parent","end","toUpperCase","encodingExists","Buffer","from","subtree","progress","contents","options","filename","readFileSync","linebreak","level","isArray","output","indent","repeat","pos","row","col","rules","newline","whitespace","parenthesis","semicolon","prop_ident","c_value_type","exec","includes","bail","hasOwn","hasOwnProperty","classNames","classes","arguments","argType","inner","apply","key","call","default","define","collapse","String","el","document","createElement","setAttribute","style","contain","position","left","fontSize","selection","getSelection","originalRange","rangeCount","getRangeAt","body","appendChild","select","selectionStart","selectionEnd","success","execCommand","removeChild","removeAllRanges","addRange","EventEmitter","_events","_maxListeners","undefined","prototype","defaultMaxListeners","setMaxListeners","isNumber","isNaN","TypeError","emit","er","handler","args","listeners","error","isObject","context","isUndefined","isFunction","addListener","listener","m","newListener","warned","console","trace","on","once","fired","g","removeListener","list","splice","removeAllListeners","ret","listenerCount","evlistener","emitter","toStr","arr","isPlainObject","obj","hasOwnConstructor","hasIsPrototypeOf","constructor","extend","name","src","copy","copyIsArray","clone","target","deep","create","inherits","ctor","superCtor","super_","enumerable","writable","configurable","TempCtor","alphabetical","character","code","charCodeAt","decimal","alphanumerical","isBuffer","isSlowBuffer","_isBuffer","readFloatLE","hexadecimal","getPrototypeOf","fromCode","fromCharCode","re","test","charAt","wordCharacter","escapes","defaults","gfm","concat","commonmark","settings","natsort","GREATER","desc","SMALLER","ore","sre","tre","ure","hre","nre","dre","normalize","insensitive","lowerCase","toLocaleLowerCase","toLowerCase","l","parseFloat","a","b","xArr","yArr","xD","parseInt","yD","xL","yL","xF","yF","localeCompare","comp","characterEntities","legacy","invalid","parseEntities","own","noop","Function","warning","reference","text","warningContext","referenceContext","textContext","additional","attribute","nonTerminated","NAMED","HEXADECIMAL","DECIMAL","BASE","TESTS","NAMED_NOT_TERMINATED","NUMERIC_NOT_TERMINATED","NAMED_EMPTY","NUMERIC_EMPTY","NAMED_UNKNOWN","NUMERIC_DISALLOWED","NUMERIC_PROHIBITED","MESSAGES","option","handleText","handleReference","handleWarning","index","lines","column","line","entityCharacters","terminated","characters","following","reason","entity","begin","next","diff","parseError","at","flush","prohibited","disallowed","offset","normalizeArray","parts","allowAboveRoot","up","last","splitPathRe","splitPath","resolvedPath","resolvedAbsolute","process","cwd","p","isAbsolute","trailingSlash","substr","paths","relative","to","fromParts","toParts","samePartsLength","outputParts","sep","delimiter","dirname","root","dir","basename","ext","extname","xs","res","str","factory","moment","e","hasMoment","hasEventListeners","window","addEventListener","sto","setTimeout","addEvent","callback","capture","attachEvent","removeEvent","removeEventListener","detachEvent","hasClass","cn","className","addClass","removeClass","isDate","getTime","isWeekend","day","getDay","isLeapYear","year","getDaysInMonth","month","setToStartOfDay","setHours","compareDates","overwrite","prop","hasProp","nodeName","fireEvent","eventName","ev","createEvent","initEvent","dispatchEvent","createEventObject","adjustCalendar","calendar","ceil","abs","floor","field","bound","reposition","format","defaultDate","setDefaultDate","firstDay","formatStrict","minDate","maxDate","yearRange","showWeekNumber","pickWholeWeek","minYear","maxYear","minMonth","maxMonth","startRange","endRange","isRTL","yearSuffix","showMonthAfterYear","showDaysInNextAndPreviousMonths","enableSelectionDaysInNextAndPreviousMonths","numberOfMonths","mainCalendar","container","blurFieldOnSelect","i18n","previousMonth","nextMonth","months","weekdays","weekdaysShort","theme","events","onSelect","onOpen","onClose","onDraw","keyboardInput","renderDayName","opts","abbr","renderDay","ariaSelected","isEmpty","isDisabled","isToday","isSelected","hasEvent","isInRange","isStartRange","isEndRange","renderWeek","onejan","weekNum","renderRow","days","isRowSelected","reverse","renderBody","rows","renderHead","renderTitle","refYear","randId","_o","isMinYear","isMaxYear","html","monthHtml","yearHtml","renderTable","Pikaday","self","config","_onMouseDown","_v","event","srcElement","parentNode","setDate","getAttribute","hide","blur","prevMonth","preventDefault","returnValue","_c","_onChange","gotoMonth","gotoYear","_onKeyChange","isVisible","keyCode","adjustDate","_onInputChange","firedBy","isValid","toDate","show","_onInputFocus","_onInputClick","_onInputBlur","pEl","activeElement","_b","_onClick","onchange","trigger","insertBefore","nextSibling","defDate","gotoDate","disableWeekends","disableDayFn","nom","setMinDate","setMaxDate","fallback","getFullYear","_d","toDateString","getMoment","setMoment","preventOnSelect","isMoment","getDate","draw","newCalendar","calendars","firstVisibleDate","lastVisibleDate","visibleDate","setMonth","getMonth","adjustCalendars","difference","newDay","valueOf","gotoToday","setStartRange","setEndRange","force","_y","_m","random","render","innerHTML","focus","adjustPosition","viewportWidth","viewportHeight","scrollTop","top","clientRect","offsetWidth","offsetHeight","innerWidth","documentElement","clientWidth","innerHeight","clientHeight","pageYOffset","getBoundingClientRect","pageXOffset","bottom","offsetLeft","offsetTop","offsetParent","before","yearOfPreviousMonth","yearOfNextMonth","daysInPreviousMonth","cells","after","isWeekSelected","r","dayNumber","monthNumber","yearNumber","dayConfig","destroy","t","o","E","W","children","pop","u","attributes","S","vnode","__d","A","debounceRendering","P","splitText","_componentConstructor","__n","defaultProps","createElementNS","cssText","V","__html","substring","__l","removeAttribute","removeAttributeNS","setAttributeNS","D","afterMount","componentDidMount","h","H","R","ownerSVGElement","_component","nodeValue","createTextNode","replaceChild","__preactattr_","U","firstChild","dangerouslySetInnerHTML","childNodes","C","N","__k","L","ref","lastChild","previousSibling","I","T","__b","__x","__r","base","componentWillMount","componentWillReceiveProps","__c","__p","props","syncComponentUpdates","state","__s","shouldComponentUpdate","componentWillUpdate","getChildContext","M","__u","componentDidUpdate","afterUpdate","__h","beforeUnmount","componentWillUnmount","bind","setState","forceUpdate","$","cloneElement","Component","rerender","cachedSetTimeout","cachedClearTimeout","defaultSetTimout","defaultClearTimeout","clearTimeout","runTimeout","fun","runClearTimeout","marker","draining","currentQueue","queueIndex","cleanUpNextTick","drainQueue","timeout","run","nextTick","Item","array","title","browser","env","argv","version","versions","off","prependListener","prependOnceListener","binding","chdir","umask","React","xtend","astToReact","renderer","renderers","isReactFragment","nodeProps","getNodeProps","resolveChildren","childNode","Fragment","isTagRenderer","sourcePos","flattenPosition","rawSourcePos","sourcePosition","definitions","assignDefined","depth","ordered","tight","loose","checked","unwrapParagraphs","url","language","lang","inline","href","transformLinkUri","alt","transformImageUri","columnAlignment","align","isHeader","tag","isBlock","escapeHtml","skipHtml","attrs","child","getDefinitions","defs","visit","ofType","types","mode","disallow","untangle","ifNotMatch","allowNode","selfClosingRe","simpleTagRe","open","currentParent","selfClosing","getSelfClosing","getSimpleTag","matching","findAndPull","virtual","opening","matchingTag","fromNode","toNode","fromIndex","toIndex","extracted","_toConsumableArray","arr2","unified","PropTypes","naiveHtml","disallowNode","wrapTableRows","uriTransformer","defaultRenderers","allTypes","keys","ReactMarkdown","source","allowedTypes","disallowedTypes","plugins","parser","applyParserPlugin","rawAst","renderProps","astPlugins","determineAstPlugins","ast","plugin","use","removalMethod","unwrapDisallowed","renderHtml","propTypes","string","bool","func","arrayOf","oneOf","oneOfType","object","break","paragraph","emphasis","strong","thematicBreak","blockquote","delete","link","image","linkReference","imageReference","table","SimpleRenderer","tableHead","tableBody","tableRow","tableCell","TableCell","List","listItem","ListItem","definition","NullRenderer","heading","Heading","inlineCode","InlineCode","CodeBlock","Html","virtualHtml","VirtualHtml","getCoreProps","textAlign","coreProps","checkbox","readOnly","protocols","uri","first","protocol","wrap","breaks","Parser","tokenizers","isRemarkParser","inlineTokenizers","tokenizeBreak","locator","eat","silent","Boolean","unherit","Local","entities","ctx","decoder","raw","decodeRaw","offsets","file","message","footnotes","pedantic","blocks","locate","asterisk","underscore","PROTOCOLS","removePosition","C_NEWLINE","EXPRESSION_LINE_BREAKS","content","tokenizeBlock","eof","toggle","vfileLocation","unescape","tokenizer","doc","setOptions","inList","inBlock","inLink","atStart","toOffset","proto","exitStart","enterList","enterLink","enterBlock","interruptParagraph","interruptList","interruptBlockquote","blockTokenizers","indentedCode","fencedCode","atxHeading","setextHeading","footnote","escape","autoLink","deletion","blockMethods","inlineMethods","tokenizeInline","tokenizeFactory","notInLink","C_LT","C_GT","C_AT_SIGN","C_SLASH","MAILTO","MAILTO_LENGTH","subvalue","hasAtCharacter","exit","interrupt","C_TAB","C_SPACE","interruptors","currentLine","indents","add","rest","nextIndex","startIndex","prefixed","hardBreak","MIN_BREAK_LENGTH","C_TILDE","C_TICK","MIN_FENCE_COUNT","CODE_INDENT_COUNT","fenceCount","flag","exdentedContent","closing","exdentedClosing","CODE_INDENT","subvalueQueue","contentQueue","blankQueue","tickQueue","subqueue","count","openingCount","found","notInList","notInBlock","C_DOUBLE_QUOTE","C_SINGLE_QUOTE","C_BACKSLASH","C_BRACKET_OPEN","C_BRACKET_CLOSE","C_PAREN_OPEN","C_PAREN_CLOSE","C_COLON","beforeURL","beforeTitle","isEnclosedURLCharacter","isUnclosedURLCharacter","strikethrough","DOUBLE","previous","preceding","word","C_ASTERISK","C_UNDERSCORE","footnoteDefinition","C_CARET","EXPRESSION_INITIAL_TAB","C_HASH","MAX_ATX_COUNT","C_EQUALS","C_DASH","MAX_HEADING_INDENT","SETEXT_MARKERS","openCloseTag","blockHTML","sequence","sequences","RegExp","inlineHTML","EXPRESSION_HTML_LINK_OPEN","EXPRESSION_HTML_LINK_CLOSE","LINK_MARKERS","COMMONMARK_LINK_MARKERS","closed","hasMarker","markers","isImage","getIndent","removeIndent","C_PLUS","C_DOT","C_X_LOWER","TAB_SIZE","EXPRESSION_LOOSE_LIST_ITEM","EXPRESSION_TASK_ITEM","EXPRESSION_BULLET","EXPRESSION_PEDANTIC_BULLET","EXPRESSION_INITIAL_INDENT","LIST_UNORDERED_MARKERS","LIST_ORDERED_MARKERS","LIST_ORDERED_COMMONMARK_MARKERS","interuptors","currentMarker","prevEmpty","empty","items","allLines","emptyLines","item","enterTop","exitBlockquote","isLoose","indented","trail","reset","fn","pedanticListItem","normalListItem","task","replacer","$0","bullet","trimmedLines","$1","$2","$3","$4","Number","trimTrailingLines","T_LINK","T_IMAGE","T_FOOTNOTE","REFERENCE_TYPE_SHORTCUT","REFERENCE_TYPE_COLLAPSED","REFERENCE_TYPE_FULL","intro","referenceType","bracketed","C_PIPE","MIN_TABLE_COLUMNS","MIN_TABLE_ROWS","TABLE_ALIGN_LEFT","TABLE_ALIGN_CENTER","TABLE_ALIGN_RIGHT","TABLE_ALIGN_NONE","alignments","alignment","hasDash","cell","preamble","lineCount","lineIndex","pipeIndex","methods","fail","THEMATIC_BREAK_MARKER_COUNT","markerCount","HTTP_PROTOCOL","HTTPS_PROTOCOL","MAILTO_PROTOCOL","PROTOCOLS_LENGTH","parenCount","nextCharacter","MERGEABLE_NODES","mergeText","mergeBlockquote","mergeable","location","method","matched","valueLength","updatePosition","onlyAtStart","lastIndex","getOffset","indentation","Position","validateEat","update","combined","stops","attributeName","unquoted","singleQuoted","doubleQuoted","attributeValue","openTag","closeTag","comment","processing","declaration","cdata","params","bools","interruptor","ignore","collapseWhiteSpace","maximum","minIndent","matrix","padding","cache","num","replaceExt","npath","nFileName","global","setImmediate","nextHandle","tasksByHandle","currentlyRunningATask","registerImmediate","clearImmediate","handle","runIfPresent","installNextTickImplementation","canUsePostMessage","postMessage","importScripts","postMessageIsAsynchronous","oldOnMessage","onmessage","installPostMessageImplementation","messagePrefix","onGlobalMessage","installMessageChannelImplementation","channel","MessageChannel","port1","port2","installReadyStateChangeImplementation","script","onreadystatechange","installSetTimeoutImplementation","attachTo","enter","scope","Timeout","setInterval","clearInterval","close","clearFn","_id","_clearFn","unref","enroll","msecs","_idleTimeoutId","_idleTimeout","unenroll","_unrefActive","active","onTimeout","_onTimeout","val","right","trough","fns","middleware","invoked","wrapped","Super","Of","From","parameters","vfile","plain","freeze","pipeline","pipelineParse","pipelineRun","pipelineStringify","attachers","transformers","namespace","frozen","freezeIndex","processor","runSync","processSync","destination","transformer","assertUnfrozen","addPlugin","addList","addPreset","entry","find","assertParser","newable","cb","assertNode","executor","complete","assertDone","Compiler","assertCompiler","compile","asyncName","is","hasParent","hasIndex","check","convert","typeFactory","ok","anyFactory","matchesFactory","convertAll","tests","results","matches","checks","hard","soft","point","CONTINUE","SKIP","EXIT","visitor","one","all","step","toPosition","offsetToPositionFactory","positionToOffsetFactory","offsetToPosition","positionToOffset","VMessage","VMessagePrototype","stack","fatal","origin","range","parseOrigin","ruleId","VFile","order","messages","history","defineProperty","get","assertNonEmpty","assertPath","assertPart","stem","part","info","warn","filePath","eval","isString","ipcRenderer","remote","app","Menu","ThemeManager","MainView","LeftSidebar","Sidebar","DrawerManager","InputBox","BusyScreen","InfoOverlay","deadstones","gtp","sgf","Board","boardmatcher","dialog","enginesyncer","fileformats","gametree","rotation","setting","sound","App","sabaki","emptyTree","new","openDrawer","busy","fullScreen","showMenuBar","zoomFactor","representedFilename","gameTrees","treePosition","undoable","undoText","selectedTool","scoringMethod","findText","findVertex","deadStones","blockedGuesses","highlightVertices","heatMap","showCoordinates","showMoveColorization","showNextMoves","showSiblings","fuzzyStonePlacement","animatedStonePlacement","animatedVertex","consoleLog","showConsole","leftSidebarWidth","showGameGraph","showCommentBox","sidebarWidth","graphGridSize","graphNodeSize","engines","attachedEngines","engineCommands","generatingMoves","preferencesTab","showInputBox","inputBoxText","onInputBoxSubmit","onInputBoxCancel","infoOverlayText","showInfoOverlay","appName","getName","getVersion","getCurrentWindow","treeHash","generateTreeHash","attachedEngineControllers","engineStates","modules","updateSettingState","evt","loadFile","askForReload","send","resizeId","isMaximized","isMinimized","isFullScreen","getContentSize","menuData","handleMenuClicks","menu","setMenuBarVisibility","closeInputBox","click","submenu","querySelectorAll","residueDeltaY","deltaY","goStep","dataTransfer","files","stopGeneratingMoves","closeDrawer","setMode","tagName","goToBeginning","goToEnd","goToSiblingVariation","newFile","prevState","inferredState","gameIndex","platform","flashInfoOverlay","setFullScreen","setAutoHideMenuBar","showLeftSidebar","showSidebar","widthDiff","setContentSize","webContents","setZoomFactor","waitForRender","setSidebarWidth","Event","setLeftSidebarWidth","stateChange","getBoard","arrangement","drawer","setBusy","hideInfoOverlay","clearConsole","getEmptyGameTree","handicap","handicapStones","getHandicapPlacement","sizeInfo","handicapInfo","dateInfo","playSound","showInfo","suppressAskForSave","askForSave","clearUndoPoint","detachEngines","setCurrentTreePosition","fileHash","generateFileHash","playNewGame","showOpenDialog","properties","filters","meta","extensions","extension","lastProgress","fileFormatModule","getModuleByExtension","setProgressBar","showMessageBox","loadGameTrees","loadContent","ignoreEncoding","wait","saveFile","showSaveDialog","getSGF","AP","CA","getHash","hash","answer","clickVertex","button","ctrlKey","board","coord2vertex","makeMove","sendToEngine","markups","removeNode","openCommentMenu","coord","vertex2coord","commentText","tool","useTool","template","label","popupMenu","editVertexData","dead","some","vertexEquals","stones","getRelatedChains","findMove","tp","navigate","nextNode","nextVertex","hasVertex","player","blocked","pass","currentPlayer","color","suicide","ko","createNode","getPositionHash","vertexNeighbors","getLiberties","nextTreePosition","moveExists","variations","updateRoot","splitted","newTree","delay","playCapture","playPachi","playPass","enterScoring","prevNode","prevColor","prevPass","passPlayer","startGeneratingMoves","makeResign","setUndoPoint","rootTree","rootNode","RE","makeMainVariation","argument","cross","triangle","circle","square","number","PL","oldSign","endVertex","toDelete","findIndex","equals","LN","AR","arrow","LB","sort","letterIndex","getRoot","getLevel","undoData","undo","undoRoot","undoLevel","goToMoveNumber","goToNextFork","goToPreviousFork","goToComment","getCurrentHeight","mod","goToMainVariation","onMainTrack","goToSiblingGame","newIndex","findPosition","condition","iterator","makeHorizontalNavigator","sections","getSection","getHeight","findHotspot","cond","getGameInfo","komi","getRootProperty","playerNames","playerRanks","blackName","blackRank","whiteName","whiteRank","gameName","setGameInfo","SZ","AB","getPlayer","HA","setPlayer","intendedSign","getComment","hotspot","moveAnnotation","positionAnnotation","setComment","HO","clearProperties","moveProps","positionProps","rotateBoard","anticlockwise","trees","getTreesRecursive","rotateNode","copyVariation","copyVariationData","cutVariation","suppressConfirmation","pasteVariation","oldLength","copied","flattenVariation","inherit","AW","AE","B","shiftVariation","iNew","removeOtherVariations","openNodeMenu","attachEngines","suspendEngines","handleCommandSent","controller","command","getResponse","syncEngines","followUp","scoreBoard","captures","gameInfo","class","leftsidebar","sidebar","onSubmit","onCancel","busyId","display","MarkdownContentDisplay","CommentTitle","handleEditButtonClick","getCurrentMoveInterpretation","EV","GN","today","ptp","prevBoard","getMoveInterpretation","ma","pa","pv","moveData","positionData","showMoveInterpretation","header","movestatus","positionstatus","onClick","typographer","CommentText","element","CommentBox","handleCommentInput","onCommentInput","titleInputElement","textareaElement","handleMenuButtonClick","menuButtonElement","dirty","treePositionChanged","updateId","sidebarSplitTransition","onResizerMouseDown","onLinkClick","onCoordinateMouseEnter","onCoordinateMouseLeave","transition","onMouseDown","placeholder","onInput","shell","htmlify","urlRegex","emailRegex","coordRegex","movenumberRegex","totalRegex","ContentDisplay","handleLinkClick","linkElement","currentTarget","classList","contains","openExternal","moveNumber","innerText","handleCoordMouseEnter","handleCoordMouseLeave","InfoDrawer","ScoreDrawer","PreferencesDrawer","GameChooserDrawer","CleanMarkupDrawer","handleScoreSubmit","resultString","handleGameSelect","selectedTree","handleGameTreesChange","newGameTrees","newTreePosition","tab","onItemClick","onChange","estimating","onSubmitButtonClick","animationDuration","commentProperties","edgeColor","edgeInactiveColor","edgeSize","edgeInactiveSize","nodeColor","nodeInactiveColor","nodeActiveColor","nodeBookmarkColor","nodeCommentColor","nodeInactiveBookmarkColor","nodeInactiveCommentColor","GameGraphNode","hover","handleMouseMove","clientX","clientY","mouseShift","sx","sy","gridSize","mousePosition","nodeSize","nodeSize2","diamondSide","sqrt","GameGraphEdge","positionAbove","positionBelow","left1","top1","left2","top2","points","stroke","GameGraph","cameraPosition","viewportSize","viewportPosition","matrixDict","matrixDictHash","matrixDictCache","handleNodeClick","handleGraphMouseDown","svgElement","movementX","movementY","vx","vy","mouseDown","drag","remeasureId","remeasure","getMatrixDict","dict","renderId","updateCameraPosition","getMatrixHash","getMatrixWidth","relX","onNodeClick","mx","my","nearestX","nearestY","renderNodes","nodeColumns","edges","minX","minY","maxX","maxY","doneTreeBones","currentTracks","notCurrentTracks","onCurrentTrack","prevTree","prevIndex","px","py","onContextMenu","onMouseUp","handleGraphMouseUp","GobanVertex","hoshi","highlight","heat","paint","dimmed","animate","markupType","ghostTypes","onMouseMove","smalllabel","GobanLine","nextProps","temporary","fieldSize","pos1","pos2","dx","dy","angle","atan2","PI","transform","CoordX","rangeX","CoordY","rangeY","Goban","handleVertexMouseUp","handleVertexMouseDown","handleVertexMouseMove","temporaryLine","getComputedStyle","borderLeftWidth","borderTopWidth","borderRightWidth","borderBottomWidth","paddingLeft","paddingTop","paddingRight","paddingBottom","resize","hoshis","shifts","__","readjustShifts","randomizer","parentElement","onBeforeResize","outerWidth","outerHeight","boardWidth","boardHeight","floorEven","marginLeft","marginTop","innerMarginLeft","innerMarginTop","movedVertices","direction","directions","qx","qy","removeShifts","startVertex","dataset","onVertexClick","onLineDraw","drawLineMode","onVertexMouseMove","paintMap","dimmedStones","crosshair","animatedVertices","drawTemporaryLine","goban","coordinates","movecolorization","siblings","fuzzy","animation","equalsVertex","ghosts","handleInput","stopPropagation","handleKeyUp","cancel","prevProps","inputElement","onKeyUp","onBlur","PlayBar","EditBar","GuessBar","AutoplayBar","ScoringBar","FindBar","handleTogglePlayer","handleToolButtonClick","handleFindButtonClick","handleGobanResize","handleGobanVertexClick","handleGobanLineDraw","gobanCrosshair","mainElement","playerCaptures","showHotspot","onCurrentPlayerClick","onToolButtonClick","onButtonClick","generateBasicComponent","Emphasis","Strong","Delete","Paragraph","Link","Image","MiniGoban","maxSize","visible","radius","visibility","Slider","sidebarMinWidth","sidebarMinSplit","sidebarSplit","handleGraphNodeClick","handleVerticalResizerMouseDown","oldSidebarWidth","oldMousePosition","verticalResizerMouseDown","handleHorizontalResizerMouseDown","horizontalResizerMouseDown","handleSliderChange","percent","treeHeight","handleStartAutoscrolling","minDelay","scroll","autoscrollId","handleStopAutoscrolling","showSlider","onStartAutoscrolling","onStopAutoscrolling","BM","TE","UC","GW","DM","GB","handleSliderAreaMouseDown","sliderAreaMouseDown","MouseEvent","handleButtonMouseDown","buttonMouseDown","slidingAreaElement","Bar","hidecontent","onCloseButtonClick","hidecontentId","bar","stoneTool","renderButton","toolId","selected","handleChange","handleButtonClick","clipboard","toggleSetting","handleCurrentPlayerClick","handleUndoButtonClick","handleMenuClick","readText","writeText","captureStyle","opacity","isEngine","engine","score","getScore","area","territory","Drawer","gamesort","thumbnailSize","itemMinWidth","itemHeight","getPreviewBoard","GameListItem","draggable","showThumbnail","insertAfter","insertbefore","insertafter","handleClick","handleContextMenu","onDragStart","handleDragStart","onDragOver","handleDragOver","itemElements","filterText","handleFilterTextChange","handleCloseButtonClick","handleListScroll","handleItemContextMenu","handleItemDragStart","dragData","handleItemDragOver","middle","handleItemDrop","handleCancelDrag","handleItemClick","selectedIndex","handleAddButtonClick","handleSortButtonClick","sortWith","sorter","byPlayerBlack","byPlayerWhite","byBlackRank","byWhiteRank","byGameName","byEvent","byDate","byNumberOfMoves","gamesListElement","scrollHeight","shownGameTrees","getRowFromIndex","gobanRect","getElementById","drawerRect","itemElement","querySelector","miniGobanRect","rowCount","itemWidth","onDrop","onScroll","itemTop","itemLeft","pointerEvents","InfoDrawerItem","handleSubmitButtonClick","startGame","handleCancelButtonClick","handleBoardWidthFocus","combinedSizeFields","handleBoardWidthChange","handleBoardHeightChange","handleSizeSwapButtonClick","handleSwapPlayers","handleDateInputChange","markDates","handleDateInputFocus","pikaday","handleDateInputBlur","elementInPikaday","handleShowResultClick","showResult","handleInputChange","handleEngineMenuClick","nameKey","autoName","preparePikaday","pikaYear","pikaMonth","pikaDay","shallowEquals","adjustPikadayPosition","dateInputElement","lexicalCompare","onFocus","disabled","cursor","ScoreRow","total","handleTerritoryButtonClick","handleAreaButtonClick","clear","isSquare","getDistance","getDistanceToGround","getCanonicalVertex","boardSize","ignoreBoard","allNeighbors","getConnectedComponent","signs","hasLiberties","liberties","added","freeNeighbors","move","deadNeighbors","tygemflag","nearX","nearY","farX","farY","middleX","middleY","generateAscii","lb","getIndexFromVertex","rowLength","JSON","_shapes","getSymmetries","getBoardSymmetries","readShapes","anchors","MA","cornerMatch","hypotheses","hypothesesInvert","representatives","shapeMatch","shape","anchor","symm","shapes","friendly","hiddenStyle","fileInput","buttons","cancelId","alert","confirm","cloneNode","multiple","encodeURIComponent","download","remove","makeResult","grlt","zipsu","easycases","winner","margin","getResult","grltRegex","zipsuRegex","parsePlayerName","rank","foo","FF","GM","regex","startsWith","endsWith","PB","BR","PW","WR","KM","DT","setup","tmp","elements","ngf","gib","combinedExtensions","boardsize","pw","pb","rawdate","line2","whiterank","line3","blackrank","strings","extractProperty","sortRank","stableSort","tr1","tr2","weightRank","weighted1","weighted2","compareResult","rank_number","weight","sortName","name1","name2","item1","item2","ary","pair1","pair2","pair","date1","date2","newstep","newnodes","newtree","xshift","yshift","hasCollisions","baseboard","CR","SQ","TR","composed","addOverlay","getJson","fromJson","json","addInformation","chr","float","aa","ao","kk","normalizeEndings","buildFromTemplate","popup","ms","velement","bodyWidth","bodyHeight","getPath","prompt","setAudioMuted","reader","FileReader","onload","readAsText","writeFileSync","mkdirSync","accessSync","lastPachiIndex","lastCaptureIndex","captureSounds","Audio","pachiSounds","newGameSound","passSound","play","themesDict","load","localStorage","overwriteKey","overwrites","save","loadThemes","getThemes"],"mappings":"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","file":"bundle.js","sourcesContent":[" \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, { enumerable: true, get: getter });\n \t\t}\n \t};\n\n \t// define __esModule on exports\n \t__webpack_require__.r = function(exports) {\n \t\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n \t\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n \t\t}\n \t\tObject.defineProperty(exports, '__esModule', { value: true });\n \t};\n\n \t// create a fake namespace object\n \t// mode & 1: value is a module id, require it\n \t// mode & 2: merge all properties of value into the ns\n \t// mode & 4: return value when already ns object\n \t// mode & 8|1: behave like require\n \t__webpack_require__.t = function(value, mode) {\n \t\tif(mode & 1) value = __webpack_require__(value);\n \t\tif(mode & 8) return value;\n \t\tif((mode & 4) && typeof value === 'object' && value && value.__esModule) return value;\n \t\tvar ns = Object.create(null);\n \t\t__webpack_require__.r(ns);\n \t\tObject.defineProperty(ns, 'default', { enumerable: true, value: value });\n \t\tif(mode & 2 && typeof value != 'string') for(var key in value) __webpack_require__.d(ns, key, function(key) { return value[key]; }.bind(null, key));\n \t\treturn ns;\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = \"./src/components/App.js\");\n","module.exports = \"(;GM[1]AP[Sabaki:0.30.0]CA[UTF-8]SZ[19]\\n(;AB[dd][kc][qd]N[Low Chinese opening]C[size: 19, type: corner]CR[aa][ba][ca][da][ea][fa][ga][ha][ia][ja][ka][la][ma][na][oa][pa][qa][ra][sa][ab][bb][cb][db][eb][fb][gb][hb][ib][jb][kb][lb][mb][nb][ob][pb][qb][rb][sb][ac][bc][cc][dc][ec][fc][gc][hc][ic][jc][lc][mc][nc][oc][pc][qc][rc][sc][ad][bd][cd][ed][fd][gd][hd][id][jd][kd][ld][md][nd][od][pd][rd][sd][ae][be][ce][de][ee][fe][ge][he][ie][je][ke][le][me][ne][oe][pe][qe][re][se]MA[kc][dd][qd]\\n)(;AB[dd][kd][qd]N[High Chinese opening]AE[so]C[size: 19, type: corner]CR[aa][ba][ca][da][ea][fa][ga][ha][ia][ja][ka][la][ma][na][oa][pa][qa][ra][sa][ab][bb][cb][db][eb][fb][gb][hb][ib][jb][kb][lb][mb][nb][ob][pb][qb][rb][sb][ac][bc][cc][dc][ec][fc][gc][hc][ic][jc][kc][lc][mc][nc][oc][pc][qc][rc][sc][ad][bd][cd][ed][fd][gd][hd][id][jd][ld][md][nd][od][pd][rd][sd][ae][be][ce][de][ee][fe][ge][he][ie][je][ke][le][me][ne][oe][pe][qe][re][se]MA[dd][kd][qd]\\n)(;AB[dd][pc][qe]N[Orthodox opening]C[size: 19, type: corner]CR[aa][ba][ca][da][ea][fa][ga][ha][ia][ja][ka][la][ma][na][oa][pa][qa][ra][sa][ab][bb][cb][db][eb][fb][gb][hb][ib][jb][kb][lb][mb][nb][ob][pb][qb][rb][sb][ac][bc][cc][dc][ec][fc][gc][hc][ic][jc][kc][lc][mc][nc][oc][qc][rc][sc][ad][bd][cd][ed][fd][gd][hd][id][jd][kd][ld][md][nd][od][pd][qd][rd][sd][ae][be][ce][de][ee][fe][ge][he][ie][je][ke][le][me][ne][oe][pe][re][se][af][bf][cf][df][ef][ff][gf][hf][if][jf][kf][lf][mf][nf][of][pf][qf][rf][sf]MA[pc][dd][qe]\\n)(;AB[cd][pc][qe]N[Orthodox opening]C[size: 19, type: corner]CR[aa][ba][ca][da][ea][fa][ga][ha][ia][ja][ka][la][ma][na][oa][pa][qa][ra][sa][ab][bb][cb][db][eb][fb][gb][hb][ib][jb][kb][lb][mb][nb][ob][pb][qb][rb][sb][ac][bc][cc][dc][ec][fc][gc][hc][ic][jc][kc][lc][mc][nc][oc][qc][rc][sc][ad][bd][dd][ed][fd][gd][hd][id][jd][kd][ld][md][nd][od][pd][qd][rd][sd][ae][be][ce][de][ee][fe][ge][he][ie][je][ke][le][me][ne][oe][pe][re][se][af][bf][cf][df][ef][ff][gf][hf][if][jf][kf][lf][mf][nf][of][pf][qf][rf][sf]MA[pc][cd][qe]\\n)(;AB[dc][nc][jd]AW[pd]N[Kobayashi opening]C[size: 19, type: corner]CR[aa][ba][ca][da][ea][fa][ga][ha][ia][ja][ka][la][ma][na][oa][pa][qa][ra][sa][ab][bb][cb][db][eb][fb][gb][hb][ib][jb][kb][lb][mb][nb][ob][pb][qb][rb][sb][ac][bc][cc][ec][fc][gc][hc][ic][jc][kc][lc][mc][oc][pc][qc][rc][sc][ad][bd][cd][dd][ed][fd][gd][hd][id][kd][ld][md][nd][od][qd][rd][sd][ae][be][ce][de][ee][fe][ge][he][ie][je][ke][le][me][ne][oe][pe][qe][re][se]MA[dc][nc][jd][pd]\\n)(;AB[cd][nc][ic]AW[pd]N[Small Chinese opening]C[size: 19, type: corner]CR[aa][ba][ca][da][ea][fa][ga][ha][ia][ja][ka][la][ma][na][oa][pa][qa][ra][sa][ab][bb][cb][db][eb][fb][gb][hb][ib][jb][kb][lb][mb][nb][ob][pb][qb][rb][sb][ac][bc][cc][dc][ec][fc][gc][hc][jc][kc][lc][mc][oc][pc][qc][rc][sc][ad][bd][dd][ed][fd][gd][hd][id][jd][kd][ld][md][nd][od][qd][rd][sd][ae][be][ce][de][ee][fe][ge][he][ie][je][ke][le][me][ne][oe][pe][qe][re][se]MA[ic][nc][cd][pd]\\n)(;AB[cd][hc][nc]AW[pd]N[Micro Chinese opening]C[size: 19, type: corner]CR[aa][ba][ca][da][ea][fa][ga][ha][ia][ja][ka][la][ma][na][oa][pa][qa][ra][sa][ab][bb][cb][db][eb][fb][gb][hb][ib][jb][kb][lb][mb][nb][ob][pb][qb][rb][sb][ac][bc][cc][dc][ec][fc][gc][ic][jc][kc][lc][mc][oc][pc][qc][rc][sc][ad][bd][dd][ed][fd][gd][hd][id][jd][kd][ld][md][nd][od][qd][rd][sd][ae][be][ce][de][ee][fe][ge][he][ie][je][ke][le][me][ne][oe][pe][qe][re][se]MA[hc][nc][cd][pd]\\n)(;AB[pd][jd][dd]N[Sanrensei opening]C[size: 19, type: corner]CR[aa][ba][ca][da][ea][fa][ga][ha][ia][ja][ka][la][ma][na][oa][pa][qa][ra][sa][ab][bb][cb][db][eb][fb][gb][hb][ib][jb][kb][lb][mb][nb][ob][pb][qb][rb][sb][ac][bc][cc][dc][ec][fc][gc][hc][ic][jc][kc][lc][mc][nc][oc][pc][qc][rc][sc][ad][bd][cd][ed][fd][gd][hd][id][kd][ld][md][nd][od][qd][rd][sd][ae][be][ce][de][ee][fe][ge][he][ie][je][ke][le][me][ne][oe][pe][qe][re][se]MA[dd][jd][pd]\\n)(;AB[dd][pd]N[Nirensei opening]C[size: 19, type: corner]CR[aa][ba][ca][da][ea][fa][ga][ha][ia][ja][ka][la][ma][na][oa][pa][qa][ra][sa][ab][bb][cb][db][eb][fb][gb][hb][ib][jb][kb][lb][mb][nb][ob][pb][qb][rb][sb][ac][bc][cc][dc][ec][fc][gc][hc][ic][jc][kc][lc][mc][nc][oc][pc][qc][rc][sc][ad][bd][cd][ed][fd][gd][hd][id][jd][kd][ld][md][nd][od][qd][rd][sd][ae][be][ce][de][ee][fe][ge][he][ie][je][ke][le][me][ne][oe][pe][qe][re][se]MA[dd][pd]\\n)(;AB[qd][pq][cp][pe]AW[dc][oc][qo]N[Shūsaku opening]C[size: 19, type: corner]CR[aa][ba][ca][da][ea][fa][ga][ha][ia][ja][ka][la][ma][na][oa][pa][qa][ra][sa][ab][bb][cb][db][eb][fb][gb][hb][ib][jb][kb][lb][mb][nb][ob][pb][qb][rb][sb][ac][bc][cc][ec][fc][gc][hc][ic][jc][kc][lc][mc][nc][pc][qc][rc][sc][ad][bd][cd][dd][ed][fd][gd][hd][id][jd][kd][ld][md][nd][od][pd][rd][sd][ae][be][ce][de][ee][fe][ge][he][ie][je][ke][le][me][ne][oe][qe][re][se][af][bf][cf][df][ef][ff][gf][hf][if][jf][kf][lf][mf][nf][of][pf][qf][rf][sf][ag][bg][cg][dg][eg][fg][gg][hg][ig][jg][kg][lg][mg][ng][og][pg][qg][rg][sg][ah][bh][ch][dh][eh][fh][gh][hh][ih][jh][kh][lh][mh][nh][oh][ph][qh][rh][sh][ai][bi][ci][di][ei][fi][gi][hi][ii][ji][ki][li][mi][ni][oi][pi][qi][ri][si][aj][bj][cj][dj][ej][fj][gj][hj][ij][jj][kj][lj][mj][nj][oj][pj][qj][rj][sj][ak][bk][ck][dk][ek][fk][gk][hk][ik][jk][kk][lk][mk][nk][ok][pk][qk][rk][sk][al][bl][cl][dl][el][fl][gl][hl][il][jl][kl][ll][ml][nl][ol][pl][ql][rl][sl][am][bm][cm][dm][em][fm][gm][hm][im][jm][km][lm][mm][nm][om][pm][qm][rm][sm][an][bn][cn][dn][en][fn][gn][hn][in][jn][kn][ln][mn][nn][on][pn][qn][rn][sn][ao][bo][co][do][eo][fo][go][ho][io][jo][ko][lo][mo][no][oo][po][ro][so][ap][bp][dp][ep][fp][gp][hp][ip][jp][kp][lp][mp][np][op][pp][qp][rp][sp][aq][bq][cq][dq][eq][fq][gq][hq][iq][jq][kq][lq][mq][nq][oq][qq][rq][sq][ar][br][cr][dr][er][fr][gr][hr][ir][jr][kr][lr][mr][nr][or][pr][qr][rr][sr][as][bs][cs][ds][es][fs][gs][hs][is][js][ks][ls][ms][ns][os][ps][qs][rs][ss]MA[dc][oc][qd][pe][qo][cp][pq]\\n)(;AE[oc][qd]AB[qc]N[3-3 point]C[type: corner]CR[qa][ra][sa][qb][rb][sb][rc][sc]MA[qc]\\n)(;AW[qd]AB[oc]N[Low approach]C[type: corner]CR[na][nb][nc][nd][ne][oa][ob][od][oe][pa][pb][pc][pd][pe][qa][qb][qc][qe][ra][rb][rc][rd][re][sa][sb][sc][sd][se]MA[oc]\\n)(;AW[pd]AB[nc]N[Low approach]C[type: corner]CR[ma][mb][mc][md][me][na][nb][nd][ne][oa][ob][oc][od][oe][pa][pb][pc][pe][qa][qb][qc][qd][qe][ra][rb][rc][rd][re][sa][sb][sc][sd][se]MA[nc]\\n)(;AW[qd]AB[od]N[High approach]C[type: corner]CR[na][nb][nc][nd][ne][oa][ob][oc][oe][pa][pb][pc][pd][pe][qa][qb][qc][qe][ra][rb][rc][rd][re][sa][sb][sc][sd][se]MA[od]\\n)(;AW[pd]AB[nd]N[High approach]C[type: corner]CR[ma][mb][mc][md][me][na][nb][nc][ne][oa][ob][oc][od][oe][pa][pb][pc][pe][qa][qb][qc][qd][qe][ra][rb][rc][rd][re][sa][sb][sc][sd][se]MA[nd]\\n)(;AB[oc][qd]N[Low enclosure]C[type: corner]CR[na][oa][pa][qa][ra][sa][nb][ob][pb][qb][rb][sb][nc][pc][qc][rc][sc][nd][od][pd][rd][sd][ne][oe][pe][qe][re][se]MA[oc][qd]\\n)(;AB[nc][pd]N[Low enclosure]C[type: corner]CR[ma][na][oa][pa][qa][ra][sa][mb][nb][ob][pb][qb][rb][sb][mc][oc][pc][qc][rc][sc][md][nd][od][qd][rd][sd][me][ne][oe][pe][qe][re][se]MA[nc][pd]\\n)(;AB[od][qd]N[High enclosure]C[type: corner]CR[na][oa][pa][qa][ra][sa][nb][ob][pb][qb][rb][sb][nc][oc][pc][qc][rc][sc][nd][pd][rd][sd][ne][oe][pe][qe][re][se]MA[od][qd]\\n)(;AB[nd][pd]N[High enclosure]C[type: corner]CR[ma][na][oa][pa][qa][ra][sa][mb][nb][ob][pb][qb][rb][sb][mc][nc][oc][pc][qc][rc][sc][md][od][qd][rd][sd][me][ne][oe][pe][qe][re][se]MA[nd][pd]\\n)(;AB[nc][qd]N[Low enclosure]C[type: corner]CR[ma][na][oa][pa][qa][ra][sa][mb][nb][ob][pb][qb][rb][sb][mc][oc][pc][qc][rc][sc][md][nd][od][pd][rd][sd][me][ne][oe][pe][qe][re][se]MA[nc][qd]\\n)(;AB[mc][pd]N[Low enclosure]C[type: corner]CR[la][ma][na][oa][pa][qa][ra][sa][lb][mb][nb][ob][pb][qb][rb][sb][lc][nc][oc][pc][qc][rc][sc][ld][md][nd][od][qd][rd][sd][le][me][ne][oe][pe][qe][re][se]MA[mc][pd]\\n)(;AB[nd][qd]N[High enclosure]C[type: corner]CR[ma][na][oa][pa][qa][ra][sa][mb][nb][ob][pb][qb][rb][sb][mc][nc][oc][pc][qc][rc][sc][md][od][pd][rd][sd][me][ne][oe][pe][qe][re][se]MA[nd][qd]\\n)(;AB[md][pd]N[High enclosure]C[type: corner]CR[la][ma][na][oa][pa][qa][ra][sa][lb][mb][nb][ob][pb][qb][rb][sb][lc][mc][nc][oc][pc][qc][rc][sc][ld][nd][od][qd][rd][sd][le][me][ne][oe][pe][qe][re][se]MA[md][pd]\\n)(;AB[dd][de][ef][ff][fd]N[Mouth shape]CR[ec][ed][fe][ge]MA[dd][fd][de][ef][ff]\\n)(;AB[dd][de][fd][ff]N[Table shape]MA[dd][fd][de][ff]CR[ed][ee][fe][ge]\\n)(;AB[dd][ed][df][fg]N[Tippy table]CR[de][ee][ef][ff]MA[fg]\\n)(;AB[dd][ed][df][ef]N[Bamboo joint]MA[dd][ed][df][ef]CR[de][ee]\\n)(;AB[dd][de][fd][ge]N[Trapezium]CR[ed][gd][ee][fe][ff]MA[fd][ge]\\n)(;AB[dd][ce][ee][df]N[Diamond]MA[dd][ce][ee][df]CR[de]\\n)(;AB[dd][ee][fd]N[Tiger’s mouth]CR[ec][ed]MA[dd][fd][ee]\\n)(;AB[dd][de][ed]N[Empty triangle]MA[dd][ed][de]CR[ee]\\n)(;AB[dd][ed][ee]AW[de]N[Turn]MA[dd][ee]\\n)(;AB[dd][de]N[Stretch]MA[dd][de]\\n)(;AB[dd][ee]N[Diagonal]MA[dd][ee]CR[ed][de]\\n)(;AB[dd]AW[ed][cd]N[Wedge]CR[dc][de]MA[dd]\\n)(;AB[dd][ee]AW[ed]N[Hane]MA[dd][ee]CR[de]\\n)(;AB[dd][ee]AW[ed][de]N[Cut]MA[dd][ee]\\n)(;AB[dd][fd][ff][df]N[Square]MA[dd][fd][df][ff]CR[ee]\\n)(;AB[dd][fe][df][fg]N[Parallelogram]MA[dd][fe][df][fg]CR[ee][ef]\\n)(;AB[dd][df][fe]N[Dog’s head]MA[dd][fe][df]CR[ed][de][ee][ef]\\n)(;AB[dd][df][ge]N[Horse’s head]MA[dd][ge][df]CR[ed][de][ee][fe][ef]\\n)(;AB[dd]AW[ed]N[Attachment]CR[dc][ec][de][ee]MA[dd]\\n)(;AB[dd][fd]N[One-point jump]MA[dd][fd]CR[ed]\\n)(;AB[dd][fe][eg]N[Big bulge]MA[dd][fe][eg]CR[ee][ef]\\n)(;AB[dd][fe]N[Small knight]MA[dd][fe]CR[ed][ee]\\n)(;AB[dd][gd]N[Two-point jump]MA[dd][gd]CR[ed][fd]\\n)(;AB[dd][ge]N[Large knight]MA[dd][ge]CR[ed][fd][ee][fe]\\n)(;AB[dd]AW[ee]N[Shoulder hit]CR[cc][dc][ec][cd][ed][ce][de]MA[dd]\\n)(;AB[dd][ff]N[Diagonal jump]MA[dd][ff]CR[ed][de][ee][fe][ef]\\n))\"","const wasm = require('./wasm')\n\nconst parseBoard = data => [\n    data.reduce((acc, x) => (acc.push(...x), acc), []),\n    data.length > 0 ? data[0].length : 0\n]\n\nconst parseVertices = (indices, width) => [...indices].map(i => {\n    let x = i % width\n    return [x, (i - x) / width]\n})\n\nconst parseGrid = (values, width) => {\n    values = [...values]\n    return [...Array(values.length / width)]\n        .map((_, y) => values.slice(y * width, (y + 1) * width))\n}\n\nexports.useFetch = function(path) {\n    wasm.fetchPath = path\n}\n\nexports.guess = async function(data, {finished = false, iterations = 100} = {}) {\n    let [newData, width] = parseBoard(data)\n    let indices = (await wasm).guess(newData, width, finished, iterations, Date.now())\n\n    return parseVertices(indices, width)\n},\n\nexports.playTillEnd = async function(data, sign) {\n    let [newData, width] = parseBoard(data)\n    let values = (await wasm).play_till_end(newData, width, sign, Date.now())\n\n    return parseGrid(values, width)\n},\n\nexports.getProbabilityMap = async function(data, iterations) {\n    let [newData, width] = parseBoard(data)\n    let values = (await wasm).get_probability_map(newData, width, iterations, Date.now())\n\n    return parseGrid(values, width)\n},\n\nexports.getFloatingStones = async function(data) {\n    let [newData, width] = parseBoard(data)\n    let indices = (await wasm).get_floating_stones(newData, width)\n\n    return parseVertices(indices, width)\n}\n","const make = wasm => {\n    let result = {}\n\n    let cachegetUint8Memory = null;\n    function getUint8Memory() {\n        if (cachegetUint8Memory === null ||\n            cachegetUint8Memory.buffer !== wasm.memory.buffer)\n            cachegetUint8Memory = new Uint8Array(wasm.memory.buffer);\n        return cachegetUint8Memory;\n    }\n\n    let cachegetUint64Memory = null;\n    function getUint64Memory() {\n        if (cachegetUint64Memory === null ||\n            cachegetUint64Memory.buffer !== wasm.memory.buffer)\n            cachegetUint64Memory = new BigUint64Array(wasm.memory.buffer);\n        return cachegetUint64Memory;\n    }\n\n    function passArray8ToWasm(arg) {\n        const ptr = wasm.__wbindgen_malloc(arg.length * 1);\n        getUint8Memory().set(arg, ptr / 1);\n        return [ptr, arg.length];\n    }\n\n    let cachegetUint32Memory = null;\n    function getUint32Memory() {\n        if (cachegetUint32Memory === null ||\n            cachegetUint32Memory.buffer !== wasm.memory.buffer)\n            cachegetUint32Memory = new Uint32Array(wasm.memory.buffer);\n        return cachegetUint32Memory;\n    }\n\n    function getArrayU32FromWasm(ptr, len) {\n        return getUint32Memory().subarray(ptr / 4, ptr / 4 + len);\n    }\n\n    let cachedGlobalArgumentPtr = null;\n    function globalArgumentPtr() {\n        if (cachedGlobalArgumentPtr === null)\n            cachedGlobalArgumentPtr = wasm.__wbindgen_global_argument_ptr();\n        return cachedGlobalArgumentPtr;\n    }\n\n    result.guess = function(arg0, arg1, arg2, arg3, arg4) {\n        const [ptr0, len0] = passArray8ToWasm(arg0);\n        const retptr = globalArgumentPtr();\n        wasm.guess(retptr, ptr0, len0, arg1, arg2 ? 1 : 0, arg3, arg4);\n        const mem = getUint32Memory();\n        const ptr = mem[retptr / 4];\n        const len = mem[retptr / 4 + 1];\n        const realRet = getArrayU32FromWasm(ptr, len);\n        wasm.__wbindgen_free(ptr, len * 4);\n        return realRet;\n    };\n\n    let cachegetFloat32Memory = null;\n    function getFloat32Memory() {\n        if (cachegetFloat32Memory === null ||\n            cachegetFloat32Memory.buffer !== wasm.memory.buffer)\n            cachegetFloat32Memory = new Float32Array(wasm.memory.buffer);\n        return cachegetFloat32Memory;\n    }\n\n    function getArrayF32FromWasm(ptr, len) {\n        return getFloat32Memory().subarray(ptr / 4, ptr / 4 + len);\n    }\n\n    result.get_probability_map = function(arg0, arg1, arg2, arg3) {\n        const [ptr0, len0] = passArray8ToWasm(arg0);\n        const retptr = globalArgumentPtr();\n        wasm.get_probability_map(retptr, ptr0, len0, arg1, arg2, arg3);\n        const mem = getUint32Memory();\n        const ptr = mem[retptr / 4];\n        const len = mem[retptr / 4 + 1];\n        const realRet = getArrayF32FromWasm(ptr, len);\n        wasm.__wbindgen_free(ptr, len * 4);\n        return realRet;\n    };\n\n    let cachegetInt8Memory = null;\n    function getInt8Memory() {\n        if (cachegetInt8Memory === null ||\n            cachegetInt8Memory.buffer !== wasm.memory.buffer)\n            cachegetInt8Memory = new Int8Array(wasm.memory.buffer);\n        return cachegetInt8Memory;\n    }\n\n    function getArrayI8FromWasm(ptr, len) {\n        return getInt8Memory().subarray(ptr / 1, ptr / 1 + len);\n    }\n\n    result.play_till_end = function(arg0, arg1, arg2, arg3) {\n        const [ptr0, len0] = passArray8ToWasm(arg0);\n        const retptr = globalArgumentPtr();\n        wasm.play_till_end(retptr, ptr0, len0, arg1, arg2, arg3);\n        const mem = getUint32Memory();\n        const ptr = mem[retptr / 4];\n        const len = mem[retptr / 4 + 1];\n        const realRet = getArrayI8FromWasm(ptr, len);\n        wasm.__wbindgen_free(ptr, len * 1);\n        return realRet;\n    };\n\n    result.get_floating_stones = function(arg0, arg1) {\n        const [ptr0, len0] = passArray8ToWasm(arg0);\n        const retptr = globalArgumentPtr();\n        wasm.get_floating_stones(retptr, ptr0, len0, arg1);\n        const mem = getUint32Memory();\n        const ptr = mem[retptr / 4];\n        const len = mem[retptr / 4 + 1];\n        const realRet = getArrayU32FromWasm(ptr, len);\n        wasm.__wbindgen_free(ptr, len * 4);\n        return realRet;\n    };\n\n    const TextDecoder = require('util').TextDecoder;\n\n    let cachedDecoder = new TextDecoder('utf-8');\n\n    function getStringFromWasm(ptr, len) {\n        return cachedDecoder.decode(getUint8Memory().subarray(ptr, ptr + len));\n    }\n\n    result.__wbindgen_throw = function(ptr, len) {\n        throw new Error(getStringFromWasm(ptr, len));\n    };\n\n    return result\n}\n\nlet importObj = {'./deadstones': make()}\n\nmodule.exports = exports = new Promise((resolve, reject) => {\n    const {join} = require('path')\n    const {readFile} = require('fs')\n    \n    readFile(join(__dirname, '..', 'wasm', 'deadstones_bg.wasm'), (err, buffer) => {\n        if (err) return reject(err)\n\n        resolve(WebAssembly.instantiate(buffer, importObj))\n    })\n}).catch(() =>\n    fetch(exports.fetchPath)\n    .then(response => response.arrayBuffer())\n    .then(buffer => WebAssembly.instantiate(buffer, importObj))\n).then(module => make(module.instance.exports))\n\nexports.fetchPath = null\n","const {getNeighbors, getChain} = require('./helper')\r\n\r\nmodule.exports = function(data) {\r\n    let height = data.length\r\n    let width = height === 0 ? 0 : data[0].length\r\n    let map = [...Array(height)].map(_ => Array(width).fill(null))\r\n\r\n    for (let x = 0; x < width; x++) {\r\n        for (let y = 0; y < height; y++) {\r\n            let vertex = [x, y]\r\n\r\n            if (map[y][x] !== null) continue\r\n            if (data[y][x] !== 0) {\r\n                map[y][x] = data[y][x]\r\n                continue\r\n            }\r\n\r\n            let chain = getChain(data, vertex)\r\n            let sign = 0\r\n            let indicator = 1\r\n\r\n            for (let c of chain) {\r\n                if (indicator === 0) break\r\n\r\n                for (let n of getNeighbors(c)) {\r\n                    let [nx, ny] = n\r\n                    if (!data[ny] || data[ny][nx] == null || data[ny][nx] === 0) continue\r\n\r\n                    if (sign === 0) {\r\n                        sign = data[ny][nx]\r\n                    } else if (sign !== data[ny][nx]) {\r\n                        indicator = 0\r\n                        break\r\n                    }\r\n                }\r\n            }\r\n\r\n            for (let [cx, cy] of chain) {\r\n                map[cy][cx] = sign * indicator\r\n            }\r\n        }\r\n    }\r\n\r\n    return map\r\n}\r\n","exports.getNeighbors = ([x, y]) => [[x - 1, y], [x + 1, y], [x, y - 1], [x, y + 1]]\r\n\r\nexports.getChain = function(data, v, result = [], done = {}, sign = null) {\r\n    if (sign == null) sign = data[v[1]][v[0]]\r\n    let neighbors = exports.getNeighbors(v)\r\n\r\n    result.push(v)    \r\n    done[v] = true\r\n\r\n    for (let n of neighbors) {\r\n        if (!data[n[1]] || data[n[1]][n[0]] !== sign || n in done)\r\n            continue\r\n\r\n        exports.getChain(data, n, result, done, sign)\r\n    }\r\n\r\n    return result\r\n}\r\n","const areaMap = require('./areaMap')\nconst nearestNeighborMap = require('./nearestNeighborMap')\nconst radianceMap = require('./radianceMap')\nconst {getNeighbors} = require('./helper')\n\nmodule.exports = function(data, {discrete = false, maxDistance = 6, minRadiance = 2} = {}) {\n    let height = data.length\n    let width = height === 0 ? 0 : data[0].length\n    let map = areaMap(data)\n    let pnnmap = nearestNeighborMap(data, 1)\n    let nnnmap = nearestNeighborMap(data, -1)\n    let prmap = radianceMap(data, 1)\n    let nrmap = radianceMap(data, -1)\n\n    for (let x = 0; x < width; x++) {\n        for (let y = 0; y < height; y++) {\n            if (map[y][x] !== 0) continue\n\n            let s = Math.sign(nnnmap[y][x] - pnnmap[y][x])\n            let faraway = s === 0 || (s > 0 ? pnnmap : nnnmap)[y][x] > maxDistance\n            let dim = s === 0 || Math.round((s > 0 ? prmap : nrmap)[y][x]) < minRadiance\n\n            if (faraway || dim) map[y][x] = 0\n            else map[y][x] = s * (s > 0 ? prmap[y][x] : nrmap[y][x])\n\n            if (discrete) map[y][x] = Math.sign(map[y][x])\n        }\n    }\n\n    // Postprocessing\n\n    for (let x = 0; x < width; x++) {\n        for (let y = 0; y < height; y++) {\n            if (data[y][x] !== 0) continue\n\n            // Prevent single point areas\n\n            let sign = Math.sign(map[y][x])\n\n            if (sign !== 0) {\n                let neighbors = getNeighbors([x, y])\n                    .filter(([i, j]) => data[j] && data[j][i] != null)\n\n                if (neighbors.length >= 2) {\n                    let [i, j] = neighbors[0]\n\n                    if (neighbors.every(([i, j]) => Math.sign(map[j][i]) !== sign)) {\n                        map[y][x] = 0\n                        continue\n                    }\n                }\n            }\n\n            // Fix ragged areas\n            \n            let distance = Math.min(x, y, width - x - 1, height - y - 1)\n\n            if (sign !== 0) {\n                let friendlyNeighbors = getNeighbors([x, y])\n                    .filter(([i, j]) => map[j] && Math.sign(map[j][i]) === sign)\n\n                if (friendlyNeighbors.length === 1) {\n                    let [i, j] = friendlyNeighbors[0]\n\n                    if (data[j][i] === sign) map[y][x] = 0\n                    continue\n                }\n            }\n\n            // Fix empty pillars\n\n            if (distance <= 2 && sign === 0) {\n                let signedNeighbors = getNeighbors([x, y])\n                    .filter(([i, j]) => map[j] && map[j][i] !== 0)\n\n                if (signedNeighbors.length >= 2) {\n                    let [[i1, j1], [i2, j2]] = signedNeighbors\n                    let s = Math.sign(map[j1][i1])\n\n                    if ((signedNeighbors.length >= 3 || i1 === i2 || j1 === j2)\n                    && signedNeighbors.every(([i, j]) => Math.sign(map[j][i]) === s)) {\n                        map[y][x] = !discrete\n                            ? signedNeighbors.reduce((sum, [i, j]) => sum + map[j][i], 0) / signedNeighbors.length\n                            : s\n                        continue\n                    }\n                }\n            }\n        }\n    }\n\n    return areaMap(map)\n}\n","let influence = {}\n\ninfluence.areaMap = require('./areaMap')\ninfluence.nearestNeighborMap = require('./nearestNeighborMap')\ninfluence.radianceMap = require('./radianceMap')\ninfluence.map = require('./influenceMap')\n\nmodule.exports = influence\n","module.exports = function(data, sign) {\r\n    let height = data.length\r\n    let width = height === 0 ? 0 : data[0].length\r\n    let map = [...Array(height)].map(_ => Array(width).fill(Infinity))\r\n    let min = Infinity\r\n\r\n    let f = (x, y) => {\r\n        if (data[y][x] === sign) min = 0\r\n        else min++\r\n\r\n        map[y][x] = min = Math.min(min, map[y][x])\r\n    }\r\n\r\n    for (let y = 0; y < height; y++) {\r\n        min = Infinity\r\n\r\n        for (let x = 0; x < width; x++) {\r\n            let old = Infinity\r\n\r\n            f(x, y)\r\n            old = min\r\n\r\n            for (let ny = y + 1; ny < height; ny++) f(x, ny)\r\n            min = old\r\n\r\n            for (let ny = y - 1; ny >= 0; ny--) f(x, ny)\r\n            min = old\r\n        }\r\n    }\r\n\r\n    for (let y = height - 1; y >= 0; y--) {\r\n        min = Infinity\r\n\r\n        for (let x = width - 1; x >= 0; x--) {\r\n            let old = Infinity\r\n\r\n            f(x, y)\r\n            old = min\r\n\r\n            for (let ny = y + 1; ny < height; ny++) f(x, ny)\r\n            min = old\r\n\r\n            for (let ny = y - 1; ny >= 0; ny--) f(x, ny)\r\n            min = old\r\n        }\r\n    }\r\n\r\n    return map\r\n}\r\n","const {getNeighbors, getChain} = require('./helper')\n\nmodule.exports = function(data, sign, {p1 = 6, p2 = 1.5, p3 = 2} = {}) {\n    let height = data.length\n    let width = height === 0 ? 0 : data[0].length\n    let map = [...Array(height)].map(_ => Array(width).fill(0))\n    let size = [width, height]\n    let done = {}\n\n    let getMirroredVertex = v => {\n        if (v[0] >= 0 && v[0] < width && v[1] >= 0 && v[1] < height) return v\n        return v.map((z, i) => z < 0 ? -z - 1 : z >= size[i] ? 2 * size[i] - z - 1 : z)\n    }\n\n    let castRadiance = chain => {\n        let queue = chain.map(x => [x, 0])\n        let visited = {}\n\n        while (queue.length > 0) {\n            let [v, d] = queue.shift()\n            let mv = getMirroredVertex(v)\n\n            map[mv[1]][mv[0]] += mv !== v ? p3 : p2 / (d / p1 * 6 + 1)\n\n            for (let n of getNeighbors(v)) {\n                if (d >= p1 || data[n[1]] && data[n[1]][n[0]] == null && data[n[1]][n[0]] === -sign || n in visited)\n                    continue\n\n                visited[n] = true\n                queue.push([n, d + 1])\n            }\n        }\n    }\n\n    for (let x = 0; x < width; x++) {\n        for (let y = 0; y < height; y++) {\n            let v = [x, y]\n            if (data[y][x] !== sign || v in done) continue\n\n            let chain = getChain(data, v)\n            chain.forEach(w => done[w] = true)\n\n            castRadiance(chain)\n        }\n    }\n\n    return map\n}\n","const alpha = 'abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ'\n\nexports.escapeString = function(input) {\n    return input.toString()\n        .replace(/\\\\/g, '\\\\\\\\')\n        .replace(/\\]/g, '\\\\]')\n}\n\nexports.unescapeString = function(input) {\n    let result = []\n    let inBackslash = false\n\n    input = input.replace(/\\r/g, '')\n\n    for (let i = 0; i < input.length; i++) {\n        if (!inBackslash) {\n            if (input[i] !== '\\\\')\n                result.push(input[i])\n            else if (input[i] === '\\\\')\n                inBackslash = true\n        } else {\n            if (input[i] !== '\\n')\n                result.push(input[i])\n\n            inBackslash = false\n        }\n    }\n\n    return result.join('')\n}\n\nexports.parseDates = function(input) {\n    if (!input.match(/^(\\d{4}(-\\d{1,2}(-\\d{1,2})?)?(\\s*,\\s*(\\d{4}|(\\d{4}-)?\\d{1,2}(-\\d{1,2})?))*)?$/))\n        return null\n    if (input.trim() === '')\n        return []\n\n    let dates = input.split(',').map(x => x.trim().split('-'))\n\n    for (let i = 1; i < dates.length; i++) {\n        let date = dates[i]\n        let prev = dates[i - 1]\n\n        if (date[0].length !== 4) {\n            // No year\n\n            if (date.length === 1 && prev.length === 3) {\n                // Add month\n                date.unshift(prev[1])\n            }\n\n            // Add year\n            date.unshift(prev[0])\n        }\n    }\n\n    return dates.map(x => x.map(y => +y))\n}\n\nexports.stringifyDates = function(dates) {\n    if (dates.length === 0) return ''\n\n    let datesCopy = [dates[0].slice()]\n\n    for (let i = 1; i < dates.length; i++) {\n        let date = dates[i]\n        let prev = dates[i - 1]\n        let k = 0\n\n        for (let j = 0; j < date.length; j++) {\n            if (date[j] === prev[j] && k === j) k++\n            else break\n        }\n\n        datesCopy.push(date.slice(k))\n    }\n\n    return datesCopy.map(x =>\n        x.map(y => y > 9 ? '' + y : '0' + y).join('-')\n    ).join(',')\n}\n\nexports.parseVertex = function(input) {\n    if (input.length !== 2) return [-1, -1]\n    return input.split('').map(x => alpha.indexOf(x))\n}\n\nexports.stringifyVertex = function([x, y]) {\n    if (Math.min(x, y) < 0 || Math.max(x, y) >= alpha.length)\n        return ''\n    return alpha[x] + alpha[y]\n}\n\nexports.parseCompressedVertices = function(input) {\n    let colon = input.indexOf(':')\n    if (colon < 0) return [exports.parseVertex(input)]\n\n    let v1 = exports.parseVertex(input.slice(0, colon))\n    let v2 = exports.parseVertex(input.slice(colon + 1))\n    let vertices = []\n\n    for (let i = Math.min(v1[0], v2[0]); i <= Math.max(v1[0], v2[0]); i++) {\n        for (let j = Math.min(v1[1], v2[1]); j <= Math.max(v1[1], v2[1]); j++) {\n            vertices.push([i, j])\n        }\n    }\n\n    return vertices\n}\n","const {tokenize} = require('./tokenize')\nconst {detectEncoding, parseTokens, parse, parseFile} = require('./parse')\nconst {stringify} = require('./stringify')\nconst helper = require('./helper')\n\nObject.assign(exports, {\n    tokenize,\n    detectEncoding,\n    parseTokens,\n    parse,\n    parseFile,\n    stringify\n}, helper)\n","const fs = require('fs')\nconst iconv = require('iconv-lite')\nconst jschardet = require('jschardet')\n\nconst {tokenize} = require('./tokenize')\nconst {unescapeString} = require('./helper')\n\n// The default encoding is defined in the SGF spec at\n// http://www.red-bean.com/sgf/properties.html#CA\nconst defaultEncoding = 'ISO-8859-1'\n\nexports.detectEncoding = function(tokens, {sampleLength = 100} = {}) {\n    let sampleText = ''\n\n    for (let i = 0; i < tokens.length; i++) {\n        let {type, value} = tokens[i]\n\n        if (type === 'c_value_type') {\n            sampleText += value\n            if (sampleText.length > sampleLength) break\n        } else if (type === 'prop_ident' && type === 'CA') {\n            if (tokens[i + 1] && tokens[i + 1].type === 'c_value_type') {\n                return unescapeString(tokens[i + 1].value.slice(1, -1))\n            }\n        }\n    }\n\n    let detected = jschardet.detect(sampleText)\n    if (detected.confidence > 0.2) return detected.encoding\n\n    return null\n}\n\nfunction _parseTokens(tokens, getId, onProgress, encoding, start = 0) {\n    let i = start\n    let node, property, identifier\n    let tree = {id: getId(), nodes: [], subtrees: [], current: null, parent: null}\n\n    while (i < tokens.length) {\n        let {type, value} = tokens[i]\n\n        if (type === 'parenthesis' && value === '(') break\n        if (type === 'parenthesis' && value === ')') return {tree, end: i}\n\n        if (type === 'semicolon') {\n            node = {}\n            tree.nodes.push(node)\n        } else if (type === 'prop_ident') {\n            identifier = value.split('').filter(x => x.toUpperCase() === x).join('')\n\n            if (identifier !== '') {\n                if (!(identifier in node)) node[identifier] = []\n                property = node[identifier]\n            }\n        } else if (type === 'c_value_type') {\n            value = unescapeString(value.slice(1, -1))\n\n            if (encoding != null) {\n                if (identifier === 'CA' && value !== encoding && iconv.encodingExists(value)) {\n                    encoding = value\n\n                    // We may have already incorrectly parsed some values in this root node\n                    // already, so we have to go back and re-parse them now.\n\n                    for (let k in node) {\n                        if (k === 'CA') continue\n\n                        node[k] = node[k].map(x => iconv.decode(Buffer.from(x, 'binary'), encoding))\n                    }\n                } else if (encoding !== defaultEncoding) {\n                    value = iconv.decode(Buffer.from(value, 'binary'), encoding)\n                }\n            }\n\n            property.push(value)\n        } else {\n            throw new Error(`Unexpected SGF token type '${type}'`)\n        }\n\n        i++\n    }\n\n    while (i < tokens.length) {\n        let {type, value} = tokens[i]\n\n        if (type === 'parenthesis' && value === '(') {\n            let {tree: subtree, end} = _parseTokens(tokens, getId, onProgress, encoding, i + 1)\n\n            if (subtree.nodes.length > 0) {\n                subtree.parent = tree\n                tree.current = 0\n                tree.subtrees.push(subtree)\n            }\n\n            i = end\n        } else if (type === 'parenthesis' && value === ')') {\n            onProgress({progress: i / tokens.length})\n            break\n        }\n\n        i++\n    }\n\n    return {tree, end: i}\n}\n\nexports.parseTokens = function(tokens, {getId, onProgress = () => {}, encoding = null} = {}) {\n    if (getId == null) {\n        let id = 0\n        getId = () => id++\n    }\n\n    let {tree} = _parseTokens(tokens, getId, onProgress, encoding)\n    tree.subtrees.forEach(subtree => subtree.parent = null)\n    return tree.subtrees\n}\n\nexports.parse = function(contents, options) {\n    let tokens = tokenize(contents)\n    return exports.parseTokens(tokens, options)\n}\n\nexports.parseFile = function(filename, {getId, onProgress, detectEncoding = true} = {}) {\n    let contents = fs.readFileSync(filename, {encoding: 'binary'})\n    let tokens = tokenize(contents)\n    let encoding = !detectEncoding\n        ? defaultEncoding\n        : exports.detectEncoding(tokens) || defaultEncoding\n\n    return exports.parseTokens(tokens, {getId, onProgress, encoding})\n}\n","const {escapeString} = require('./helper')\r\n\r\nexports.stringify = function(tree, {linebreak = '\\n', level = 0} = {}) {\r\n    if (Array.isArray(tree)) {\r\n        return exports.stringify({nodes: [], subtrees: tree}, {linebreak})\r\n    }\r\n\r\n    let output = []\r\n    let indent = linebreak !== '' ? '  '.repeat(level) : ''\r\n\r\n    for (let node of tree.nodes) {\r\n        output.push(indent, ';')\r\n\r\n        for (let id in node) {\r\n            if (id.toUpperCase() !== id) continue\r\n\r\n            output.push(id, '[', node[id].map(escapeString).join(']['), ']')\r\n        }\r\n\r\n        output.push(linebreak)\r\n    }\r\n\r\n    if (tree.subtrees.length > 0) output.push(indent)\r\n\r\n    for (let subtree of tree.subtrees) {\r\n        output.push(\r\n            '(', linebreak,\r\n            exports.stringify(subtree, {linebreak, level: level + 1}),\r\n            indent, ')'\r\n        )\r\n    }\r\n\r\n    if (tree.subtrees.length > 0) output.push(linebreak)\r\n\r\n    return output.join('')\r\n}\r\n","exports.tokenize = function(contents) {\r\n    let tokens = []\r\n    let pos = 0\r\n    let [row, col] = [0, 0]\r\n    let rules = {\r\n        newline: /^\\n/,\r\n        whitespace: /^[^\\S\\n]+/,\r\n        parenthesis: /^(\\(|\\))/,\r\n        semicolon: /^;/,\r\n        prop_ident: /^[A-Za-z]+/,\r\n        c_value_type: /^\\[([^\\\\\\]]|\\\\[^])*\\]/\r\n    }\r\n\r\n    while (contents.length > 0) {\r\n        let match = null\r\n\r\n        for (let type in rules) {\r\n            match = rules[type].exec(contents)\r\n            if (match == null) continue\r\n\r\n            let value = match[0]\r\n\r\n            if (!['newline', 'whitespace'].includes(type)) {\r\n                tokens.push({type, value, row, col, pos})\r\n            }\r\n\r\n            // Update source position\r\n\r\n            if (type === 'newline') {\r\n                row++\r\n                col = 0\r\n            } else {\r\n                col += value.length\r\n            }\r\n\r\n            pos += value.length\r\n            contents = contents.slice(value.length)\r\n\r\n            break\r\n        }\r\n\r\n        if (match == null) throw new Error(`Unexpected SGF token at ${row + 1}:${col + 1}`)\r\n    }\r\n\r\n    return tokens\r\n}\r\n","'use strict'\n\nmodule.exports = bail\n\nfunction bail(err) {\n  if (err) {\n    throw err\n  }\n}\n","/*!\n  Copyright (c) 2017 Jed Watson.\n  Licensed under the MIT License (MIT), see\n  http://jedwatson.github.io/classnames\n*/\n/* global define */\n\n(function () {\n\t'use strict';\n\n\tvar hasOwn = {}.hasOwnProperty;\n\n\tfunction classNames () {\n\t\tvar classes = [];\n\n\t\tfor (var i = 0; i < arguments.length; i++) {\n\t\t\tvar arg = arguments[i];\n\t\t\tif (!arg) continue;\n\n\t\t\tvar argType = typeof arg;\n\n\t\t\tif (argType === 'string' || argType === 'number') {\n\t\t\t\tclasses.push(arg);\n\t\t\t} else if (Array.isArray(arg) && arg.length) {\n\t\t\t\tvar inner = classNames.apply(null, arg);\n\t\t\t\tif (inner) {\n\t\t\t\t\tclasses.push(inner);\n\t\t\t\t}\n\t\t\t} else if (argType === 'object') {\n\t\t\t\tfor (var key in arg) {\n\t\t\t\t\tif (hasOwn.call(arg, key) && arg[key]) {\n\t\t\t\t\t\tclasses.push(key);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\treturn classes.join(' ');\n\t}\n\n\tif (typeof module !== 'undefined' && module.exports) {\n\t\tclassNames.default = classNames;\n\t\tmodule.exports = classNames;\n\t} else if (typeof define === 'function' && typeof define.amd === 'object' && define.amd) {\n\t\t// register as 'classnames', consistent with npm package name\n\t\tdefine('classnames', [], function () {\n\t\t\treturn classNames;\n\t\t});\n\t} else {\n\t\twindow.classNames = classNames;\n\t}\n}());\n","'use strict'\n\nmodule.exports = collapse\n\n/* collapse(' \\t\\nbar \\nbaz\\t'); // ' bar baz ' */\nfunction collapse(value) {\n  return String(value).replace(/\\s+/g, ' ')\n}\n","'use strict';\nmodule.exports = input => {\n\tconst el = document.createElement('textarea');\n\n\tel.value = input;\n\n\t// Prevent keyboard from showing on mobile\n\tel.setAttribute('readonly', '');\n\n\tel.style.contain = 'strict';\n\tel.style.position = 'absolute';\n\tel.style.left = '-9999px';\n\tel.style.fontSize = '12pt'; // Prevent zooming on iOS\n\n\tconst selection = document.getSelection();\n\tlet originalRange = false;\n\tif (selection.rangeCount > 0) {\n\t\toriginalRange = selection.getRangeAt(0);\n\t}\n\n\tdocument.body.appendChild(el);\n\tel.select();\n\n\t// Explicit selection workaround for iOS\n\tel.selectionStart = 0;\n\tel.selectionEnd = input.length;\n\n\tlet success = false;\n\ttry {\n\t\tsuccess = document.execCommand('copy');\n\t} catch (err) {}\n\n\tdocument.body.removeChild(el);\n\n\tif (originalRange) {\n\t\tselection.removeAllRanges();\n\t\tselection.addRange(originalRange);\n\t}\n\n\treturn success;\n};\n","// Copyright Joyent, Inc. and other Node contributors.\n//\n// Permission is hereby granted, free of charge, to any person obtaining a\n// copy of this software and associated documentation files (the\n// \"Software\"), to deal in the Software without restriction, including\n// without limitation the rights to use, copy, modify, merge, publish,\n// distribute, sublicense, and/or sell copies of the Software, and to permit\n// persons to whom the Software is furnished to do so, subject to the\n// following conditions:\n//\n// The above copyright notice and this permission notice shall be included\n// in all copies or substantial portions of the Software.\n//\n// THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS\n// OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF\n// MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN\n// NO EVENT SHALL THE AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM,\n// DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR\n// OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE\n// USE OR OTHER DEALINGS IN THE SOFTWARE.\n\nfunction EventEmitter() {\n  this._events = this._events || {};\n  this._maxListeners = this._maxListeners || undefined;\n}\nmodule.exports = EventEmitter;\n\n// Backwards-compat with node 0.10.x\nEventEmitter.EventEmitter = EventEmitter;\n\nEventEmitter.prototype._events = undefined;\nEventEmitter.prototype._maxListeners = undefined;\n\n// By default EventEmitters will print a warning if more than 10 listeners are\n// added to it. This is a useful default which helps finding memory leaks.\nEventEmitter.defaultMaxListeners = 10;\n\n// Obviously not all Emitters should be limited to 10. This function allows\n// that to be increased. Set to zero for unlimited.\nEventEmitter.prototype.setMaxListeners = function(n) {\n  if (!isNumber(n) || n < 0 || isNaN(n))\n    throw TypeError('n must be a positive number');\n  this._maxListeners = n;\n  return this;\n};\n\nEventEmitter.prototype.emit = function(type) {\n  var er, handler, len, args, i, listeners;\n\n  if (!this._events)\n    this._events = {};\n\n  // If there is no 'error' event listener then throw.\n  if (type === 'error') {\n    if (!this._events.error ||\n        (isObject(this._events.error) && !this._events.error.length)) {\n      er = arguments[1];\n      if (er instanceof Error) {\n        throw er; // Unhandled 'error' event\n      } else {\n        // At least give some kind of context to the user\n        var err = new Error('Uncaught, unspecified \"error\" event. (' + er + ')');\n        err.context = er;\n        throw err;\n      }\n    }\n  }\n\n  handler = this._events[type];\n\n  if (isUndefined(handler))\n    return false;\n\n  if (isFunction(handler)) {\n    switch (arguments.length) {\n      // fast cases\n      case 1:\n        handler.call(this);\n        break;\n      case 2:\n        handler.call(this, arguments[1]);\n        break;\n      case 3:\n        handler.call(this, arguments[1], arguments[2]);\n        break;\n      // slower\n      default:\n        args = Array.prototype.slice.call(arguments, 1);\n        handler.apply(this, args);\n    }\n  } else if (isObject(handler)) {\n    args = Array.prototype.slice.call(arguments, 1);\n    listeners = handler.slice();\n    len = listeners.length;\n    for (i = 0; i < len; i++)\n      listeners[i].apply(this, args);\n  }\n\n  return true;\n};\n\nEventEmitter.prototype.addListener = function(type, listener) {\n  var m;\n\n  if (!isFunction(listener))\n    throw TypeError('listener must be a function');\n\n  if (!this._events)\n    this._events = {};\n\n  // To avoid recursion in the case that type === \"newListener\"! Before\n  // adding it to the listeners, first emit \"newListener\".\n  if (this._events.newListener)\n    this.emit('newListener', type,\n              isFunction(listener.listener) ?\n              listener.listener : listener);\n\n  if (!this._events[type])\n    // Optimize the case of one listener. Don't need the extra array object.\n    this._events[type] = listener;\n  else if (isObject(this._events[type]))\n    // If we've already got an array, just append.\n    this._events[type].push(listener);\n  else\n    // Adding the second element, need to change to array.\n    this._events[type] = [this._events[type], listener];\n\n  // Check for listener leak\n  if (isObject(this._events[type]) && !this._events[type].warned) {\n    if (!isUndefined(this._maxListeners)) {\n      m = this._maxListeners;\n    } else {\n      m = EventEmitter.defaultMaxListeners;\n    }\n\n    if (m && m > 0 && this._events[type].length > m) {\n      this._events[type].warned = true;\n      console.error('(node) warning: possible EventEmitter memory ' +\n                    'leak detected. %d listeners added. ' +\n                    'Use emitter.setMaxListeners() to increase limit.',\n                    this._events[type].length);\n      if (typeof console.trace === 'function') {\n        // not supported in IE 10\n        console.trace();\n      }\n    }\n  }\n\n  return this;\n};\n\nEventEmitter.prototype.on = EventEmitter.prototype.addListener;\n\nEventEmitter.prototype.once = function(type, listener) {\n  if (!isFunction(listener))\n    throw TypeError('listener must be a function');\n\n  var fired = false;\n\n  function g() {\n    this.removeListener(type, g);\n\n    if (!fired) {\n      fired = true;\n      listener.apply(this, arguments);\n    }\n  }\n\n  g.listener = listener;\n  this.on(type, g);\n\n  return this;\n};\n\n// emits a 'removeListener' event iff the listener was removed\nEventEmitter.prototype.removeListener = function(type, listener) {\n  var list, position, length, i;\n\n  if (!isFunction(listener))\n    throw TypeError('listener must be a function');\n\n  if (!this._events || !this._events[type])\n    return this;\n\n  list = this._events[type];\n  length = list.length;\n  position = -1;\n\n  if (list === listener ||\n      (isFunction(list.listener) && list.listener === listener)) {\n    delete this._events[type];\n    if (this._events.removeListener)\n      this.emit('removeListener', type, listener);\n\n  } else if (isObject(list)) {\n    for (i = length; i-- > 0;) {\n      if (list[i] === listener ||\n          (list[i].listener && list[i].listener === listener)) {\n        position = i;\n        break;\n      }\n    }\n\n    if (position < 0)\n      return this;\n\n    if (list.length === 1) {\n      list.length = 0;\n      delete this._events[type];\n    } else {\n      list.splice(position, 1);\n    }\n\n    if (this._events.removeListener)\n      this.emit('removeListener', type, listener);\n  }\n\n  return this;\n};\n\nEventEmitter.prototype.removeAllListeners = function(type) {\n  var key, listeners;\n\n  if (!this._events)\n    return this;\n\n  // not listening for removeListener, no need to emit\n  if (!this._events.removeListener) {\n    if (arguments.length === 0)\n      this._events = {};\n    else if (this._events[type])\n      delete this._events[type];\n    return this;\n  }\n\n  // emit removeListener for all listeners on all events\n  if (arguments.length === 0) {\n    for (key in this._events) {\n      if (key === 'removeListener') continue;\n      this.removeAllListeners(key);\n    }\n    this.removeAllListeners('removeListener');\n    this._events = {};\n    return this;\n  }\n\n  listeners = this._events[type];\n\n  if (isFunction(listeners)) {\n    this.removeListener(type, listeners);\n  } else if (listeners) {\n    // LIFO order\n    while (listeners.length)\n      this.removeListener(type, listeners[listeners.length - 1]);\n  }\n  delete this._events[type];\n\n  return this;\n};\n\nEventEmitter.prototype.listeners = function(type) {\n  var ret;\n  if (!this._events || !this._events[type])\n    ret = [];\n  else if (isFunction(this._events[type]))\n    ret = [this._events[type]];\n  else\n    ret = this._events[type].slice();\n  return ret;\n};\n\nEventEmitter.prototype.listenerCount = function(type) {\n  if (this._events) {\n    var evlistener = this._events[type];\n\n    if (isFunction(evlistener))\n      return 1;\n    else if (evlistener)\n      return evlistener.length;\n  }\n  return 0;\n};\n\nEventEmitter.listenerCount = function(emitter, type) {\n  return emitter.listenerCount(type);\n};\n\nfunction isFunction(arg) {\n  return typeof arg === 'function';\n}\n\nfunction isNumber(arg) {\n  return typeof arg === 'number';\n}\n\nfunction isObject(arg) {\n  return typeof arg === 'object' && arg !== null;\n}\n\nfunction isUndefined(arg) {\n  return arg === void 0;\n}\n","'use strict';\n\nvar hasOwn = Object.prototype.hasOwnProperty;\nvar toStr = Object.prototype.toString;\n\nvar isArray = function isArray(arr) {\n\tif (typeof Array.isArray === 'function') {\n\t\treturn Array.isArray(arr);\n\t}\n\n\treturn toStr.call(arr) === '[object Array]';\n};\n\nvar isPlainObject = function isPlainObject(obj) {\n\tif (!obj || toStr.call(obj) !== '[object Object]') {\n\t\treturn false;\n\t}\n\n\tvar hasOwnConstructor = hasOwn.call(obj, 'constructor');\n\tvar hasIsPrototypeOf = obj.constructor && obj.constructor.prototype && hasOwn.call(obj.constructor.prototype, 'isPrototypeOf');\n\t// Not own constructor property must be Object\n\tif (obj.constructor && !hasOwnConstructor && !hasIsPrototypeOf) {\n\t\treturn false;\n\t}\n\n\t// Own properties are enumerated firstly, so to speed up,\n\t// if last one is own, then all properties are own.\n\tvar key;\n\tfor (key in obj) { /**/ }\n\n\treturn typeof key === 'undefined' || hasOwn.call(obj, key);\n};\n\nmodule.exports = function extend() {\n\tvar options, name, src, copy, copyIsArray, clone;\n\tvar target = arguments[0];\n\tvar i = 1;\n\tvar length = arguments.length;\n\tvar deep = false;\n\n\t// Handle a deep copy situation\n\tif (typeof target === 'boolean') {\n\t\tdeep = target;\n\t\ttarget = arguments[1] || {};\n\t\t// skip the boolean and the target\n\t\ti = 2;\n\t}\n\tif (target == null || (typeof target !== 'object' && typeof target !== 'function')) {\n\t\ttarget = {};\n\t}\n\n\tfor (; i < length; ++i) {\n\t\toptions = arguments[i];\n\t\t// Only deal with non-null/undefined values\n\t\tif (options != null) {\n\t\t\t// Extend the base object\n\t\t\tfor (name in options) {\n\t\t\t\tsrc = target[name];\n\t\t\t\tcopy = options[name];\n\n\t\t\t\t// Prevent never-ending loop\n\t\t\t\tif (target !== copy) {\n\t\t\t\t\t// Recurse if we're merging plain objects or arrays\n\t\t\t\t\tif (deep && copy && (isPlainObject(copy) || (copyIsArray = isArray(copy)))) {\n\t\t\t\t\t\tif (copyIsArray) {\n\t\t\t\t\t\t\tcopyIsArray = false;\n\t\t\t\t\t\t\tclone = src && isArray(src) ? src : [];\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\tclone = src && isPlainObject(src) ? src : {};\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\t// Never move original objects, clone them\n\t\t\t\t\t\ttarget[name] = extend(deep, clone, copy);\n\n\t\t\t\t\t// Don't bring in undefined values\n\t\t\t\t\t} else if (typeof copy !== 'undefined') {\n\t\t\t\t\t\ttarget[name] = copy;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n\n\t// Return the modified object\n\treturn target;\n};\n","if (typeof Object.create === 'function') {\n  // implementation from standard node.js 'util' module\n  module.exports = function inherits(ctor, superCtor) {\n    ctor.super_ = superCtor\n    ctor.prototype = Object.create(superCtor.prototype, {\n      constructor: {\n        value: ctor,\n        enumerable: false,\n        writable: true,\n        configurable: true\n      }\n    });\n  };\n} else {\n  // old school shim for old browsers\n  module.exports = function inherits(ctor, superCtor) {\n    ctor.super_ = superCtor\n    var TempCtor = function () {}\n    TempCtor.prototype = superCtor.prototype\n    ctor.prototype = new TempCtor()\n    ctor.prototype.constructor = ctor\n  }\n}\n","'use strict'\n\nmodule.exports = alphabetical\n\n/* Check if the given character code, or the character\n * code at the first character, is alphabetical. */\nfunction alphabetical(character) {\n  var code = typeof character === 'string' ? character.charCodeAt(0) : character\n\n  return (\n    (code >= 97 && code <= 122) /* a-z */ ||\n    (code >= 65 && code <= 90) /* A-Z */\n  )\n}\n","'use strict'\n\nvar alphabetical = require('is-alphabetical')\nvar decimal = require('is-decimal')\n\nmodule.exports = alphanumerical\n\n/* Check if the given character code, or the character\n * code at the first character, is alphanumerical. */\nfunction alphanumerical(character) {\n  return alphabetical(character) || decimal(character)\n}\n","/*!\n * Determine if an object is a Buffer\n *\n * @author   Feross Aboukhadijeh <https://feross.org>\n * @license  MIT\n */\n\n// The _isBuffer check is for Safari 5-7 support, because it's missing\n// Object.prototype.constructor. Remove this eventually\nmodule.exports = function (obj) {\n  return obj != null && (isBuffer(obj) || isSlowBuffer(obj) || !!obj._isBuffer)\n}\n\nfunction isBuffer (obj) {\n  return !!obj.constructor && typeof obj.constructor.isBuffer === 'function' && obj.constructor.isBuffer(obj)\n}\n\n// For Node v0.10 support. Remove this eventually.\nfunction isSlowBuffer (obj) {\n  return typeof obj.readFloatLE === 'function' && typeof obj.slice === 'function' && isBuffer(obj.slice(0, 0))\n}\n","'use strict'\n\nmodule.exports = decimal\n\n/* Check if the given character code, or the character\n * code at the first character, is decimal. */\nfunction decimal(character) {\n  var code = typeof character === 'string' ? character.charCodeAt(0) : character\n\n  return code >= 48 && code <= 57 /* 0-9 */\n}\n","'use strict'\n\nmodule.exports = hexadecimal\n\n/* Check if the given character code, or the character\n * code at the first character, is hexadecimal. */\nfunction hexadecimal(character) {\n  var code = typeof character === 'string' ? character.charCodeAt(0) : character\n\n  return (\n    (code >= 97 /* a */ && code <= 102) /* z */ ||\n    (code >= 65 /* A */ && code <= 70) /* Z */ ||\n    (code >= 48 /* A */ && code <= 57) /* Z */\n  )\n}\n","'use strict';\nvar toString = Object.prototype.toString;\n\nmodule.exports = function (x) {\n\tvar prototype;\n\treturn toString.call(x) === '[object Object]' && (prototype = Object.getPrototypeOf(x), prototype === null || prototype === Object.getPrototypeOf({}));\n};\n","'use strict'\n\nmodule.exports = whitespace\n\nvar fromCode = String.fromCharCode\nvar re = /\\s/\n\n/* Check if the given character code, or the character\n * code at the first character, is a whitespace character. */\nfunction whitespace(character) {\n  return re.test(\n    typeof character === 'number' ? fromCode(character) : character.charAt(0)\n  )\n}\n","'use strict'\n\nmodule.exports = wordCharacter\n\nvar fromCode = String.fromCharCode\nvar re = /\\w/\n\n/* Check if the given character code, or the character\n * code at the first character, is a word character. */\nfunction wordCharacter(character) {\n  return re.test(\n    typeof character === 'number' ? fromCode(character) : character.charAt(0)\n  )\n}\n","'use strict'\n\nmodule.exports = escapes\n\nvar defaults = [\n  '\\\\',\n  '`',\n  '*',\n  '{',\n  '}',\n  '[',\n  ']',\n  '(',\n  ')',\n  '#',\n  '+',\n  '-',\n  '.',\n  '!',\n  '_',\n  '>'\n]\n\nvar gfm = defaults.concat(['~', '|'])\n\nvar commonmark = gfm.concat([\n  '\\n',\n  '\"',\n  '$',\n  '%',\n  '&',\n  \"'\",\n  ',',\n  '/',\n  ':',\n  ';',\n  '<',\n  '=',\n  '?',\n  '@',\n  '^'\n])\n\nescapes.default = defaults\nescapes.gfm = gfm\nescapes.commonmark = commonmark\n\n/* Get markdown escapes. */\nfunction escapes(options) {\n  var settings = options || {}\n\n  if (settings.commonmark) {\n    return commonmark\n  }\n\n  return settings.gfm ? gfm : defaults\n}\n","/*\n * natsort\n * https://github.com/bubkoo/natsort\n *\n * Copyright 2016 bubkoo\n * Released under the MIT license\n */\n\n(function () {\n\n    'use strict';\n\n    function natsort(options) {\n\n        options = options || {};\n\n        var GREATER = options.desc ? -1 : 1;\n        var SMALLER = -GREATER;\n\n        var ore = /^0/;\n        var sre = /\\s+/g;\n        var tre = /^\\s+|\\s+$/g;\n        // unicode\n        var ure = /[^\\x00-\\x80]/;\n        // hex\n        var hre = /^0x[0-9a-f]+$/i;\n        // numeric\n        // var nre = /(^([+\\-]?\\d+(?:\\.\\d*)?(?:[eE][+\\-]?\\d+)?(?=\\D|\\s|$))|^0x[\\da-fA-F]+$|\\d+)/g;\n        var nre = /(0x[\\da-fA-F]+|(^[\\+\\-]?\\d+(?:\\.\\d*)?(?:[eE][+\\-]?\\d+)?(?=\\D|\\s|$))|\\d+)/g;\n        // datetime\n        var dre = /(^([\\w ]+,?[\\w ]+)?[\\w ]+,?[\\w ]+\\d+:\\d+(:\\d+)?[\\w ]?|^\\d{1,4}[\\/\\-]\\d{1,4}[\\/\\-]\\d{1,4}|^\\w+, \\w+ \\d+, \\d{4})/;\n\n\n        var normalize = options.insensitive ?\n            function (s) {\n                return lowerCase('' + s).replace(tre, '');\n            } :\n            function (s) {\n                return ('' + s).replace(tre, '');\n            };\n\n        function lowerCase(s) {\n            if (s.toLocaleLowerCase) {\n                return s.toLocaleLowerCase();\n            }\n            return s.toLowerCase();\n        }\n\n        function tokenize(s) {\n            return s.replace(nre, '\\0$1\\0')\n                .replace(/\\0$/, '')\n                .replace(/^\\0/, '')\n                .split('\\0');\n        }\n\n        function parse(s, l) {\n            // normalize spaces; find floats not starting with '0',\n            // string or 0 if not defined (Clint Priest)\n            return (!s.match(ore) || l === 1)\n                && parseFloat(s)\n                || s.replace(sre, ' ').replace(tre, '')\n                || 0;\n        }\n\n\n        return function (a, b) {\n\n            // trim pre-post whitespace\n            var x = normalize(a);\n            var y = normalize(b);\n\n            // return immediately if at least one of the values is empty.\n            // - empty string < any others\n            if (!x && !y) {\n                return 0;\n            }\n\n            if (!x && y) {\n                return SMALLER;\n            }\n\n            if (x && !y) {\n                return GREATER;\n            }\n\n\n            // tokenize: split numeric strings and default strings\n            var xArr = tokenize(x);\n            var yArr = tokenize(y);\n\n            // hex or date detection\n            var xD = parseInt(x.match(hre), 16) || (xArr.length !== 1 && Date.parse(x));\n            var yD = parseInt(y.match(hre), 16) || xD && y.match(dre) && Date.parse(y) || null;\n\n            // try and sort Hex codes or Dates\n            if (yD) {\n                if (xD < yD) {\n                    return SMALLER;\n                } else if (xD > yD) {\n                    return GREATER;\n                }\n            }\n\n            //console.log('x: ' + xArr.join('@'));\n            //console.log('y: ' + yArr.join('@'));\n\n            var xL = xArr.length;\n            var yL = yArr.length;\n\n            // handle numeric strings and default strings\n            for (var i = 0, l = Math.max(xL, yL); i < l; i++) {\n\n                var xF = parse(xArr[i] || '', xL);\n                var yF = parse(yArr[i] || '', yL);\n\n                //console.log('xF: ' + xF);\n                //console.log('yF: ' + yF);\n\n                // handle numeric vs string comparison\n                // - numeric < string - (Kyle Adams)\n                if (isNaN(xF) !== isNaN(yF)) {\n                    return isNaN(xF) ? GREATER : SMALLER;\n                }\n\n\n                // if unicode use locale comparison\n                if (ure.test(xF + yF) && xF.localeCompare) {\n                    var comp = xF.localeCompare(yF);\n\n                    if (comp > 0) {\n                        return GREATER;\n                    } else if (comp < 0) {\n                        return SMALLER;\n                    } else {\n                        if (i === l - 1) {\n                            return 0;\n                        } else {\n                            continue;\n                        }\n                    }\n                }\n\n                if (xF < yF) {\n                    return SMALLER;\n                } else if (xF > yF) {\n                    return GREATER;\n                }\n            }\n\n            return 0;\n        };\n    }\n\n\n    // exports\n    // -------\n\n    /*global module:true, define: true, window: true */\n\n    if (typeof exports === 'object' && typeof module === 'object') {\n        module.exports = natsort;\n    } else if (typeof define === 'function' && define.amd) {\n        define([], function () {\n            return natsort;\n        });\n    } else if (typeof exports === 'object') {\n        exports.natsort = natsort;\n    } else {\n        (typeof window !== 'undefined' ? window : this).natsort = natsort;\n    }\n\n})();\n","'use strict'\n\nvar characterEntities = require('character-entities')\nvar legacy = require('character-entities-legacy')\nvar invalid = require('character-reference-invalid')\nvar decimal = require('is-decimal')\nvar hexadecimal = require('is-hexadecimal')\nvar alphanumerical = require('is-alphanumerical')\n\nmodule.exports = parseEntities\n\nvar own = {}.hasOwnProperty\nvar fromCharCode = String.fromCharCode\nvar noop = Function.prototype\n\n/* Default settings. */\nvar defaults = {\n  warning: null,\n  reference: null,\n  text: null,\n  warningContext: null,\n  referenceContext: null,\n  textContext: null,\n  position: {},\n  additional: null,\n  attribute: false,\n  nonTerminated: true\n}\n\n/* Reference types. */\nvar NAMED = 'named'\nvar HEXADECIMAL = 'hexadecimal'\nvar DECIMAL = 'decimal'\n\n/* Map of bases. */\nvar BASE = {}\n\nBASE[HEXADECIMAL] = 16\nBASE[DECIMAL] = 10\n\n/* Map of types to tests. Each type of character reference\n * accepts different characters. This test is used to\n * detect whether a reference has ended (as the semicolon\n * is not strictly needed). */\nvar TESTS = {}\n\nTESTS[NAMED] = alphanumerical\nTESTS[DECIMAL] = decimal\nTESTS[HEXADECIMAL] = hexadecimal\n\n/* Warning messages. */\nvar NAMED_NOT_TERMINATED = 1\nvar NUMERIC_NOT_TERMINATED = 2\nvar NAMED_EMPTY = 3\nvar NUMERIC_EMPTY = 4\nvar NAMED_UNKNOWN = 5\nvar NUMERIC_DISALLOWED = 6\nvar NUMERIC_PROHIBITED = 7\n\nvar MESSAGES = {}\n\nMESSAGES[NAMED_NOT_TERMINATED] =\n  'Named character references must be terminated by a semicolon'\nMESSAGES[NUMERIC_NOT_TERMINATED] =\n  'Numeric character references must be terminated by a semicolon'\nMESSAGES[NAMED_EMPTY] = 'Named character references cannot be empty'\nMESSAGES[NUMERIC_EMPTY] = 'Numeric character references cannot be empty'\nMESSAGES[NAMED_UNKNOWN] = 'Named character references must be known'\nMESSAGES[NUMERIC_DISALLOWED] =\n  'Numeric character references cannot be disallowed'\nMESSAGES[NUMERIC_PROHIBITED] =\n  'Numeric character references cannot be outside the permissible Unicode range'\n\n/* Wrap to ensure clean parameters are given to `parse`. */\nfunction parseEntities(value, options) {\n  var settings = {}\n  var option\n  var key\n\n  if (!options) {\n    options = {}\n  }\n\n  for (key in defaults) {\n    option = options[key]\n    settings[key] =\n      option === null || option === undefined ? defaults[key] : option\n  }\n\n  if (settings.position.indent || settings.position.start) {\n    settings.indent = settings.position.indent || []\n    settings.position = settings.position.start\n  }\n\n  return parse(value, settings)\n}\n\n/* Parse entities. */\nfunction parse(value, settings) {\n  var additional = settings.additional\n  var nonTerminated = settings.nonTerminated\n  var handleText = settings.text\n  var handleReference = settings.reference\n  var handleWarning = settings.warning\n  var textContext = settings.textContext\n  var referenceContext = settings.referenceContext\n  var warningContext = settings.warningContext\n  var pos = settings.position\n  var indent = settings.indent || []\n  var length = value.length\n  var index = 0\n  var lines = -1\n  var column = pos.column || 1\n  var line = pos.line || 1\n  var queue = ''\n  var result = []\n  var entityCharacters\n  var terminated\n  var characters\n  var character\n  var reference\n  var following\n  var warning\n  var reason\n  var output\n  var entity\n  var begin\n  var start\n  var type\n  var test\n  var prev\n  var next\n  var diff\n  var end\n\n  /* Cache the current point. */\n  prev = now()\n\n  /* Wrap `handleWarning`. */\n  warning = handleWarning ? parseError : noop\n\n  /* Ensure the algorithm walks over the first character\n   * and the end (inclusive). */\n  index--\n  length++\n\n  while (++index < length) {\n    /* If the previous character was a newline. */\n    if (character === '\\n') {\n      column = indent[lines] || 1\n    }\n\n    character = at(index)\n\n    /* Handle anything other than an ampersand,\n     * including newlines and EOF. */\n    if (character !== '&') {\n      if (character === '\\n') {\n        line++\n        lines++\n        column = 0\n      }\n\n      if (character) {\n        queue += character\n        column++\n      } else {\n        flush()\n      }\n    } else {\n      following = at(index + 1)\n\n      /* The behaviour depends on the identity of the next\n       * character. */\n      if (\n        following === '\\t' /* Tab */ ||\n        following === '\\n' /* Newline */ ||\n        following === '\\f' /* Form feed */ ||\n        following === ' ' /* Space */ ||\n        following === '<' /* Less-than */ ||\n        following === '&' /* Ampersand */ ||\n        following === '' ||\n        (additional && following === additional)\n      ) {\n        /* Not a character reference. No characters\n         * are consumed, and nothing is returned.\n         * This is not an error, either. */\n        queue += character\n        column++\n\n        continue\n      }\n\n      start = index + 1\n      begin = start\n      end = start\n\n      /* Numerical entity. */\n      if (following !== '#') {\n        type = NAMED\n      } else {\n        end = ++begin\n\n        /* The behaviour further depends on the\n         * character after the U+0023 NUMBER SIGN. */\n        following = at(end)\n\n        if (following === 'x' || following === 'X') {\n          /* ASCII hex digits. */\n          type = HEXADECIMAL\n          end = ++begin\n        } else {\n          /* ASCII digits. */\n          type = DECIMAL\n        }\n      }\n\n      entityCharacters = ''\n      entity = ''\n      characters = ''\n      test = TESTS[type]\n      end--\n\n      while (++end < length) {\n        following = at(end)\n\n        if (!test(following)) {\n          break\n        }\n\n        characters += following\n\n        /* Check if we can match a legacy named\n         * reference.  If so, we cache that as the\n         * last viable named reference.  This\n         * ensures we do not need to walk backwards\n         * later. */\n        if (type === NAMED && own.call(legacy, characters)) {\n          entityCharacters = characters\n          entity = legacy[characters]\n        }\n      }\n\n      terminated = at(end) === ';'\n\n      if (terminated) {\n        end++\n\n        if (type === NAMED && own.call(characterEntities, characters)) {\n          entityCharacters = characters\n          entity = characterEntities[characters]\n        }\n      }\n\n      diff = 1 + end - start\n\n      if (!terminated && !nonTerminated) {\n        /* Empty. */\n      } else if (!characters) {\n        /* An empty (possible) entity is valid, unless\n         * its numeric (thus an ampersand followed by\n         * an octothorp). */\n        if (type !== NAMED) {\n          warning(NUMERIC_EMPTY, diff)\n        }\n      } else if (type === NAMED) {\n        /* An ampersand followed by anything\n         * unknown, and not terminated, is invalid. */\n        if (terminated && !entity) {\n          warning(NAMED_UNKNOWN, 1)\n        } else {\n          /* If theres something after an entity\n           * name which is not known, cap the\n           * reference. */\n          if (entityCharacters !== characters) {\n            end = begin + entityCharacters.length\n            diff = 1 + end - begin\n            terminated = false\n          }\n\n          /* If the reference is not terminated,\n           * warn. */\n          if (!terminated) {\n            reason = entityCharacters ? NAMED_NOT_TERMINATED : NAMED_EMPTY\n\n            if (!settings.attribute) {\n              warning(reason, diff)\n            } else {\n              following = at(end)\n\n              if (following === '=') {\n                warning(reason, diff)\n                entity = null\n              } else if (alphanumerical(following)) {\n                entity = null\n              } else {\n                warning(reason, diff)\n              }\n            }\n          }\n        }\n\n        reference = entity\n      } else {\n        if (!terminated) {\n          /* All non-terminated numeric entities are\n           * not rendered, and trigger a warning. */\n          warning(NUMERIC_NOT_TERMINATED, diff)\n        }\n\n        /* When terminated and number, parse as\n         * either hexadecimal or decimal. */\n        reference = parseInt(characters, BASE[type])\n\n        /* Trigger a warning when the parsed number\n         * is prohibited, and replace with\n         * replacement character. */\n        if (prohibited(reference)) {\n          warning(NUMERIC_PROHIBITED, diff)\n          reference = '\\uFFFD'\n        } else if (reference in invalid) {\n          /* Trigger a warning when the parsed number\n           * is disallowed, and replace by an\n           * alternative. */\n          warning(NUMERIC_DISALLOWED, diff)\n          reference = invalid[reference]\n        } else {\n          /* Parse the number. */\n          output = ''\n\n          /* Trigger a warning when the parsed\n           * number should not be used. */\n          if (disallowed(reference)) {\n            warning(NUMERIC_DISALLOWED, diff)\n          }\n\n          /* Stringify the number. */\n          if (reference > 0xffff) {\n            reference -= 0x10000\n            output += fromCharCode((reference >>> (10 & 0x3ff)) | 0xd800)\n            reference = 0xdc00 | (reference & 0x3ff)\n          }\n\n          reference = output + fromCharCode(reference)\n        }\n      }\n\n      /* If we could not find a reference, queue the\n       * checked characters (as normal characters),\n       * and move the pointer to their end. This is\n       * possible because we can be certain neither\n       * newlines nor ampersands are included. */\n      if (!reference) {\n        characters = value.slice(start - 1, end)\n        queue += characters\n        column += characters.length\n        index = end - 1\n      } else {\n        /* Found it! First eat the queued\n         * characters as normal text, then eat\n         * an entity. */\n        flush()\n\n        prev = now()\n        index = end - 1\n        column += end - start + 1\n        result.push(reference)\n        next = now()\n        next.offset++\n\n        if (handleReference) {\n          handleReference.call(\n            referenceContext,\n            reference,\n            {start: prev, end: next},\n            value.slice(start - 1, end)\n          )\n        }\n\n        prev = next\n      }\n    }\n  }\n\n  /* Return the reduced nodes, and any possible warnings. */\n  return result.join('')\n\n  /* Get current position. */\n  function now() {\n    return {\n      line: line,\n      column: column,\n      offset: index + (pos.offset || 0)\n    }\n  }\n\n  /* “Throw” a parse-error: a warning. */\n  function parseError(code, offset) {\n    var position = now()\n\n    position.column += offset\n    position.offset += offset\n\n    handleWarning.call(warningContext, MESSAGES[code], position, code)\n  }\n\n  /* Get character at position. */\n  function at(position) {\n    return value.charAt(position)\n  }\n\n  /* Flush `queue` (normal text). Macro invoked before\n   * each entity and at the end of `value`.\n   * Does nothing when `queue` is empty. */\n  function flush() {\n    if (queue) {\n      result.push(queue)\n\n      if (handleText) {\n        handleText.call(textContext, queue, {start: prev, end: now()})\n      }\n\n      queue = ''\n    }\n  }\n}\n\n/* Check if `character` is outside the permissible unicode range. */\nfunction prohibited(code) {\n  return (code >= 0xd800 && code <= 0xdfff) || code > 0x10ffff\n}\n\n/* Check if `character` is disallowed. */\nfunction disallowed(code) {\n  return (\n    (code >= 0x0001 && code <= 0x0008) ||\n    code === 0x000b ||\n    (code >= 0x000d && code <= 0x001f) ||\n    (code >= 0x007f && code <= 0x009f) ||\n    (code >= 0xfdd0 && code <= 0xfdef) ||\n    (code & 0xffff) === 0xffff ||\n    (code & 0xffff) === 0xfffe\n  )\n}\n","// Copyright Joyent, Inc. and other Node contributors.\n//\n// Permission is hereby granted, free of charge, to any person obtaining a\n// copy of this software and associated documentation files (the\n// \"Software\"), to deal in the Software without restriction, including\n// without limitation the rights to use, copy, modify, merge, publish,\n// distribute, sublicense, and/or sell copies of the Software, and to permit\n// persons to whom the Software is furnished to do so, subject to the\n// following conditions:\n//\n// The above copyright notice and this permission notice shall be included\n// in all copies or substantial portions of the Software.\n//\n// THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS\n// OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF\n// MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN\n// NO EVENT SHALL THE AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM,\n// DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR\n// OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE\n// USE OR OTHER DEALINGS IN THE SOFTWARE.\n\n// resolves . and .. elements in a path array with directory names there\n// must be no slashes, empty elements, or device names (c:\\) in the array\n// (so also no leading and trailing slashes - it does not distinguish\n// relative and absolute paths)\nfunction normalizeArray(parts, allowAboveRoot) {\n  // if the path tries to go above the root, `up` ends up > 0\n  var up = 0;\n  for (var i = parts.length - 1; i >= 0; i--) {\n    var last = parts[i];\n    if (last === '.') {\n      parts.splice(i, 1);\n    } else if (last === '..') {\n      parts.splice(i, 1);\n      up++;\n    } else if (up) {\n      parts.splice(i, 1);\n      up--;\n    }\n  }\n\n  // if the path is allowed to go above the root, restore leading ..s\n  if (allowAboveRoot) {\n    for (; up--; up) {\n      parts.unshift('..');\n    }\n  }\n\n  return parts;\n}\n\n// Split a filename into [root, dir, basename, ext], unix version\n// 'root' is just a slash, or nothing.\nvar splitPathRe =\n    /^(\\/?|)([\\s\\S]*?)((?:\\.{1,2}|[^\\/]+?|)(\\.[^.\\/]*|))(?:[\\/]*)$/;\nvar splitPath = function(filename) {\n  return splitPathRe.exec(filename).slice(1);\n};\n\n// path.resolve([from ...], to)\n// posix version\nexports.resolve = function() {\n  var resolvedPath = '',\n      resolvedAbsolute = false;\n\n  for (var i = arguments.length - 1; i >= -1 && !resolvedAbsolute; i--) {\n    var path = (i >= 0) ? arguments[i] : process.cwd();\n\n    // Skip empty and invalid entries\n    if (typeof path !== 'string') {\n      throw new TypeError('Arguments to path.resolve must be strings');\n    } else if (!path) {\n      continue;\n    }\n\n    resolvedPath = path + '/' + resolvedPath;\n    resolvedAbsolute = path.charAt(0) === '/';\n  }\n\n  // At this point the path should be resolved to a full absolute path, but\n  // handle relative paths to be safe (might happen when process.cwd() fails)\n\n  // Normalize the path\n  resolvedPath = normalizeArray(filter(resolvedPath.split('/'), function(p) {\n    return !!p;\n  }), !resolvedAbsolute).join('/');\n\n  return ((resolvedAbsolute ? '/' : '') + resolvedPath) || '.';\n};\n\n// path.normalize(path)\n// posix version\nexports.normalize = function(path) {\n  var isAbsolute = exports.isAbsolute(path),\n      trailingSlash = substr(path, -1) === '/';\n\n  // Normalize the path\n  path = normalizeArray(filter(path.split('/'), function(p) {\n    return !!p;\n  }), !isAbsolute).join('/');\n\n  if (!path && !isAbsolute) {\n    path = '.';\n  }\n  if (path && trailingSlash) {\n    path += '/';\n  }\n\n  return (isAbsolute ? '/' : '') + path;\n};\n\n// posix version\nexports.isAbsolute = function(path) {\n  return path.charAt(0) === '/';\n};\n\n// posix version\nexports.join = function() {\n  var paths = Array.prototype.slice.call(arguments, 0);\n  return exports.normalize(filter(paths, function(p, index) {\n    if (typeof p !== 'string') {\n      throw new TypeError('Arguments to path.join must be strings');\n    }\n    return p;\n  }).join('/'));\n};\n\n\n// path.relative(from, to)\n// posix version\nexports.relative = function(from, to) {\n  from = exports.resolve(from).substr(1);\n  to = exports.resolve(to).substr(1);\n\n  function trim(arr) {\n    var start = 0;\n    for (; start < arr.length; start++) {\n      if (arr[start] !== '') break;\n    }\n\n    var end = arr.length - 1;\n    for (; end >= 0; end--) {\n      if (arr[end] !== '') break;\n    }\n\n    if (start > end) return [];\n    return arr.slice(start, end - start + 1);\n  }\n\n  var fromParts = trim(from.split('/'));\n  var toParts = trim(to.split('/'));\n\n  var length = Math.min(fromParts.length, toParts.length);\n  var samePartsLength = length;\n  for (var i = 0; i < length; i++) {\n    if (fromParts[i] !== toParts[i]) {\n      samePartsLength = i;\n      break;\n    }\n  }\n\n  var outputParts = [];\n  for (var i = samePartsLength; i < fromParts.length; i++) {\n    outputParts.push('..');\n  }\n\n  outputParts = outputParts.concat(toParts.slice(samePartsLength));\n\n  return outputParts.join('/');\n};\n\nexports.sep = '/';\nexports.delimiter = ':';\n\nexports.dirname = function(path) {\n  var result = splitPath(path),\n      root = result[0],\n      dir = result[1];\n\n  if (!root && !dir) {\n    // No dirname whatsoever\n    return '.';\n  }\n\n  if (dir) {\n    // It has a dirname, strip trailing slash\n    dir = dir.substr(0, dir.length - 1);\n  }\n\n  return root + dir;\n};\n\n\nexports.basename = function(path, ext) {\n  var f = splitPath(path)[2];\n  // TODO: make this comparison case-insensitive on windows?\n  if (ext && f.substr(-1 * ext.length) === ext) {\n    f = f.substr(0, f.length - ext.length);\n  }\n  return f;\n};\n\n\nexports.extname = function(path) {\n  return splitPath(path)[3];\n};\n\nfunction filter (xs, f) {\n    if (xs.filter) return xs.filter(f);\n    var res = [];\n    for (var i = 0; i < xs.length; i++) {\n        if (f(xs[i], i, xs)) res.push(xs[i]);\n    }\n    return res;\n}\n\n// String.prototype.substr - negative index don't work in IE8\nvar substr = 'ab'.substr(-1) === 'b'\n    ? function (str, start, len) { return str.substr(start, len) }\n    : function (str, start, len) {\n        if (start < 0) start = str.length + start;\n        return str.substr(start, len);\n    }\n;\n","/*!\n * Pikaday\n *\n * Copyright © 2014 David Bushell | BSD & MIT license | https://github.com/dbushell/Pikaday\n */\n\n(function (root, factory)\n{\n    'use strict';\n\n    var moment;\n    if (typeof exports === 'object') {\n        // CommonJS module\n        // Load moment.js as an optional dependency\n        try { moment = require('moment'); } catch (e) {}\n        module.exports = factory(moment);\n    } else if (typeof define === 'function' && define.amd) {\n        // AMD. Register as an anonymous module.\n        define(function (req)\n        {\n            // Load moment.js as an optional dependency\n            var id = 'moment';\n            try { moment = req(id); } catch (e) {}\n            return factory(moment);\n        });\n    } else {\n        root.Pikaday = factory(root.moment);\n    }\n}(this, function (moment)\n{\n    'use strict';\n\n    /**\n     * feature detection and helper functions\n     */\n    var hasMoment = typeof moment === 'function',\n\n    hasEventListeners = !!window.addEventListener,\n\n    document = window.document,\n\n    sto = window.setTimeout,\n\n    addEvent = function(el, e, callback, capture)\n    {\n        if (hasEventListeners) {\n            el.addEventListener(e, callback, !!capture);\n        } else {\n            el.attachEvent('on' + e, callback);\n        }\n    },\n\n    removeEvent = function(el, e, callback, capture)\n    {\n        if (hasEventListeners) {\n            el.removeEventListener(e, callback, !!capture);\n        } else {\n            el.detachEvent('on' + e, callback);\n        }\n    },\n\n    trim = function(str)\n    {\n        return str.trim ? str.trim() : str.replace(/^\\s+|\\s+$/g,'');\n    },\n\n    hasClass = function(el, cn)\n    {\n        return (' ' + el.className + ' ').indexOf(' ' + cn + ' ') !== -1;\n    },\n\n    addClass = function(el, cn)\n    {\n        if (!hasClass(el, cn)) {\n            el.className = (el.className === '') ? cn : el.className + ' ' + cn;\n        }\n    },\n\n    removeClass = function(el, cn)\n    {\n        el.className = trim((' ' + el.className + ' ').replace(' ' + cn + ' ', ' '));\n    },\n\n    isArray = function(obj)\n    {\n        return (/Array/).test(Object.prototype.toString.call(obj));\n    },\n\n    isDate = function(obj)\n    {\n        return (/Date/).test(Object.prototype.toString.call(obj)) && !isNaN(obj.getTime());\n    },\n\n    isWeekend = function(date)\n    {\n        var day = date.getDay();\n        return day === 0 || day === 6;\n    },\n\n    isLeapYear = function(year)\n    {\n        // solution by Matti Virkkunen: http://stackoverflow.com/a/4881951\n        return year % 4 === 0 && year % 100 !== 0 || year % 400 === 0;\n    },\n\n    getDaysInMonth = function(year, month)\n    {\n        return [31, isLeapYear(year) ? 29 : 28, 31, 30, 31, 30, 31, 31, 30, 31, 30, 31][month];\n    },\n\n    setToStartOfDay = function(date)\n    {\n        if (isDate(date)) date.setHours(0,0,0,0);\n    },\n\n    compareDates = function(a,b)\n    {\n        // weak date comparison (use setToStartOfDay(date) to ensure correct result)\n        return a.getTime() === b.getTime();\n    },\n\n    extend = function(to, from, overwrite)\n    {\n        var prop, hasProp;\n        for (prop in from) {\n            hasProp = to[prop] !== undefined;\n            if (hasProp && typeof from[prop] === 'object' && from[prop] !== null && from[prop].nodeName === undefined) {\n                if (isDate(from[prop])) {\n                    if (overwrite) {\n                        to[prop] = new Date(from[prop].getTime());\n                    }\n                }\n                else if (isArray(from[prop])) {\n                    if (overwrite) {\n                        to[prop] = from[prop].slice(0);\n                    }\n                } else {\n                    to[prop] = extend({}, from[prop], overwrite);\n                }\n            } else if (overwrite || !hasProp) {\n                to[prop] = from[prop];\n            }\n        }\n        return to;\n    },\n\n    fireEvent = function(el, eventName, data)\n    {\n        var ev;\n\n        if (document.createEvent) {\n            ev = document.createEvent('HTMLEvents');\n            ev.initEvent(eventName, true, false);\n            ev = extend(ev, data);\n            el.dispatchEvent(ev);\n        } else if (document.createEventObject) {\n            ev = document.createEventObject();\n            ev = extend(ev, data);\n            el.fireEvent('on' + eventName, ev);\n        }\n    },\n\n    adjustCalendar = function(calendar) {\n        if (calendar.month < 0) {\n            calendar.year -= Math.ceil(Math.abs(calendar.month)/12);\n            calendar.month += 12;\n        }\n        if (calendar.month > 11) {\n            calendar.year += Math.floor(Math.abs(calendar.month)/12);\n            calendar.month -= 12;\n        }\n        return calendar;\n    },\n\n    /**\n     * defaults and localisation\n     */\n    defaults = {\n\n        // bind the picker to a form field\n        field: null,\n\n        // automatically show/hide the picker on `field` focus (default `true` if `field` is set)\n        bound: undefined,\n\n        // position of the datepicker, relative to the field (default to bottom & left)\n        // ('bottom' & 'left' keywords are not used, 'top' & 'right' are modifier on the bottom/left position)\n        position: 'bottom left',\n\n        // automatically fit in the viewport even if it means repositioning from the position option\n        reposition: true,\n\n        // the default output format for `.toString()` and `field` value\n        format: 'YYYY-MM-DD',\n\n        // the toString function which gets passed a current date object and format\n        // and returns a string\n        toString: null,\n\n        // used to create date object from current input string\n        parse: null,\n\n        // the initial date to view when first opened\n        defaultDate: null,\n\n        // make the `defaultDate` the initial selected value\n        setDefaultDate: false,\n\n        // first day of week (0: Sunday, 1: Monday etc)\n        firstDay: 0,\n\n        // the default flag for moment's strict date parsing\n        formatStrict: false,\n\n        // the minimum/earliest date that can be selected\n        minDate: null,\n        // the maximum/latest date that can be selected\n        maxDate: null,\n\n        // number of years either side, or array of upper/lower range\n        yearRange: 10,\n\n        // show week numbers at head of row\n        showWeekNumber: false,\n\n        // Week picker mode\n        pickWholeWeek: false,\n\n        // used internally (don't config outside)\n        minYear: 0,\n        maxYear: 9999,\n        minMonth: undefined,\n        maxMonth: undefined,\n\n        startRange: null,\n        endRange: null,\n\n        isRTL: false,\n\n        // Additional text to append to the year in the calendar title\n        yearSuffix: '',\n\n        // Render the month after year in the calendar title\n        showMonthAfterYear: false,\n\n        // Render days of the calendar grid that fall in the next or previous month\n        showDaysInNextAndPreviousMonths: false,\n\n        // Allows user to select days that fall in the next or previous month\n        enableSelectionDaysInNextAndPreviousMonths: false,\n\n        // how many months are visible\n        numberOfMonths: 1,\n\n        // when numberOfMonths is used, this will help you to choose where the main calendar will be (default `left`, can be set to `right`)\n        // only used for the first display or when a selected date is not visible\n        mainCalendar: 'left',\n\n        // Specify a DOM element to render the calendar in\n        container: undefined,\n\n        // Blur field when date is selected\n        blurFieldOnSelect : true,\n\n        // internationalization\n        i18n: {\n            previousMonth : 'Previous Month',\n            nextMonth     : 'Next Month',\n            months        : ['January','February','March','April','May','June','July','August','September','October','November','December'],\n            weekdays      : ['Sunday','Monday','Tuesday','Wednesday','Thursday','Friday','Saturday'],\n            weekdaysShort : ['Sun','Mon','Tue','Wed','Thu','Fri','Sat']\n        },\n\n        // Theme Classname\n        theme: null,\n\n        // events array\n        events: [],\n\n        // callback function\n        onSelect: null,\n        onOpen: null,\n        onClose: null,\n        onDraw: null,\n\n        // Enable keyboard input\n        keyboardInput: true\n    },\n\n\n    /**\n     * templating functions to abstract HTML rendering\n     */\n    renderDayName = function(opts, day, abbr)\n    {\n        day += opts.firstDay;\n        while (day >= 7) {\n            day -= 7;\n        }\n        return abbr ? opts.i18n.weekdaysShort[day] : opts.i18n.weekdays[day];\n    },\n\n    renderDay = function(opts)\n    {\n        var arr = [];\n        var ariaSelected = 'false';\n        if (opts.isEmpty) {\n            if (opts.showDaysInNextAndPreviousMonths) {\n                arr.push('is-outside-current-month');\n\n                if(!opts.enableSelectionDaysInNextAndPreviousMonths) {\n                    arr.push('is-selection-disabled');\n                }\n\n            } else {\n                return '<td class=\"is-empty\"></td>';\n            }\n        }\n        if (opts.isDisabled) {\n            arr.push('is-disabled');\n        }\n        if (opts.isToday) {\n            arr.push('is-today');\n        }\n        if (opts.isSelected) {\n            arr.push('is-selected');\n            ariaSelected = 'true';\n        }\n        if (opts.hasEvent) {\n            arr.push('has-event');\n        }\n        if (opts.isInRange) {\n            arr.push('is-inrange');\n        }\n        if (opts.isStartRange) {\n            arr.push('is-startrange');\n        }\n        if (opts.isEndRange) {\n            arr.push('is-endrange');\n        }\n        return '<td data-day=\"' + opts.day + '\" class=\"' + arr.join(' ') + '\" aria-selected=\"' + ariaSelected + '\">' +\n                 '<button class=\"pika-button pika-day\" type=\"button\" ' +\n                    'data-pika-year=\"' + opts.year + '\" data-pika-month=\"' + opts.month + '\" data-pika-day=\"' + opts.day + '\">' +\n                        opts.day +\n                 '</button>' +\n               '</td>';\n    },\n\n    renderWeek = function (d, m, y) {\n        // Lifted from http://javascript.about.com/library/blweekyear.htm, lightly modified.\n        var onejan = new Date(y, 0, 1),\n            weekNum = Math.ceil((((new Date(y, m, d) - onejan) / 86400000) + onejan.getDay()+1)/7);\n        return '<td class=\"pika-week\">' + weekNum + '</td>';\n    },\n\n    renderRow = function(days, isRTL, pickWholeWeek, isRowSelected)\n    {\n        return '<tr class=\"pika-row' + (pickWholeWeek ? ' pick-whole-week' : '') + (isRowSelected ? ' is-selected' : '') + '\">' + (isRTL ? days.reverse() : days).join('') + '</tr>';\n    },\n\n    renderBody = function(rows)\n    {\n        return '<tbody>' + rows.join('') + '</tbody>';\n    },\n\n    renderHead = function(opts)\n    {\n        var i, arr = [];\n        if (opts.showWeekNumber) {\n            arr.push('<th></th>');\n        }\n        for (i = 0; i < 7; i++) {\n            arr.push('<th scope=\"col\"><abbr title=\"' + renderDayName(opts, i) + '\">' + renderDayName(opts, i, true) + '</abbr></th>');\n        }\n        return '<thead><tr>' + (opts.isRTL ? arr.reverse() : arr).join('') + '</tr></thead>';\n    },\n\n    renderTitle = function(instance, c, year, month, refYear, randId)\n    {\n        var i, j, arr,\n            opts = instance._o,\n            isMinYear = year === opts.minYear,\n            isMaxYear = year === opts.maxYear,\n            html = '<div id=\"' + randId + '\" class=\"pika-title\" role=\"heading\" aria-live=\"assertive\">',\n            monthHtml,\n            yearHtml,\n            prev = true,\n            next = true;\n\n        for (arr = [], i = 0; i < 12; i++) {\n            arr.push('<option value=\"' + (year === refYear ? i - c : 12 + i - c) + '\"' +\n                (i === month ? ' selected=\"selected\"': '') +\n                ((isMinYear && i < opts.minMonth) || (isMaxYear && i > opts.maxMonth) ? 'disabled=\"disabled\"' : '') + '>' +\n                opts.i18n.months[i] + '</option>');\n        }\n\n        monthHtml = '<div class=\"pika-label\">' + opts.i18n.months[month] + '<select class=\"pika-select pika-select-month\" tabindex=\"-1\">' + arr.join('') + '</select></div>';\n\n        if (isArray(opts.yearRange)) {\n            i = opts.yearRange[0];\n            j = opts.yearRange[1] + 1;\n        } else {\n            i = year - opts.yearRange;\n            j = 1 + year + opts.yearRange;\n        }\n\n        for (arr = []; i < j && i <= opts.maxYear; i++) {\n            if (i >= opts.minYear) {\n                arr.push('<option value=\"' + i + '\"' + (i === year ? ' selected=\"selected\"': '') + '>' + (i) + '</option>');\n            }\n        }\n        yearHtml = '<div class=\"pika-label\">' + year + opts.yearSuffix + '<select class=\"pika-select pika-select-year\" tabindex=\"-1\">' + arr.join('') + '</select></div>';\n\n        if (opts.showMonthAfterYear) {\n            html += yearHtml + monthHtml;\n        } else {\n            html += monthHtml + yearHtml;\n        }\n\n        if (isMinYear && (month === 0 || opts.minMonth >= month)) {\n            prev = false;\n        }\n\n        if (isMaxYear && (month === 11 || opts.maxMonth <= month)) {\n            next = false;\n        }\n\n        if (c === 0) {\n            html += '<button class=\"pika-prev' + (prev ? '' : ' is-disabled') + '\" type=\"button\">' + opts.i18n.previousMonth + '</button>';\n        }\n        if (c === (instance._o.numberOfMonths - 1) ) {\n            html += '<button class=\"pika-next' + (next ? '' : ' is-disabled') + '\" type=\"button\">' + opts.i18n.nextMonth + '</button>';\n        }\n\n        return html += '</div>';\n    },\n\n    renderTable = function(opts, data, randId)\n    {\n        return '<table cellpadding=\"0\" cellspacing=\"0\" class=\"pika-table\" role=\"grid\" aria-labelledby=\"' + randId + '\">' + renderHead(opts) + renderBody(data) + '</table>';\n    },\n\n\n    /**\n     * Pikaday constructor\n     */\n    Pikaday = function(options)\n    {\n        var self = this,\n            opts = self.config(options);\n\n        self._onMouseDown = function(e)\n        {\n            if (!self._v) {\n                return;\n            }\n            e = e || window.event;\n            var target = e.target || e.srcElement;\n            if (!target) {\n                return;\n            }\n\n            if (!hasClass(target, 'is-disabled')) {\n                if (hasClass(target, 'pika-button') && !hasClass(target, 'is-empty') && !hasClass(target.parentNode, 'is-disabled')) {\n                    self.setDate(new Date(target.getAttribute('data-pika-year'), target.getAttribute('data-pika-month'), target.getAttribute('data-pika-day')));\n                    if (opts.bound) {\n                        sto(function() {\n                            self.hide();\n                            if (opts.blurFieldOnSelect && opts.field) {\n                                opts.field.blur();\n                            }\n                        }, 100);\n                    }\n                }\n                else if (hasClass(target, 'pika-prev')) {\n                    self.prevMonth();\n                }\n                else if (hasClass(target, 'pika-next')) {\n                    self.nextMonth();\n                }\n            }\n            if (!hasClass(target, 'pika-select')) {\n                // if this is touch event prevent mouse events emulation\n                if (e.preventDefault) {\n                    e.preventDefault();\n                } else {\n                    e.returnValue = false;\n                    return false;\n                }\n            } else {\n                self._c = true;\n            }\n        };\n\n        self._onChange = function(e)\n        {\n            e = e || window.event;\n            var target = e.target || e.srcElement;\n            if (!target) {\n                return;\n            }\n            if (hasClass(target, 'pika-select-month')) {\n                self.gotoMonth(target.value);\n            }\n            else if (hasClass(target, 'pika-select-year')) {\n                self.gotoYear(target.value);\n            }\n        };\n\n        self._onKeyChange = function(e)\n        {\n            e = e || window.event;\n\n            if (self.isVisible()) {\n\n                switch(e.keyCode){\n                    case 13:\n                    case 27:\n                        if (opts.field) {\n                            opts.field.blur();\n                        }\n                        break;\n                    case 37:\n                        e.preventDefault();\n                        self.adjustDate('subtract', 1);\n                        break;\n                    case 38:\n                        self.adjustDate('subtract', 7);\n                        break;\n                    case 39:\n                        self.adjustDate('add', 1);\n                        break;\n                    case 40:\n                        self.adjustDate('add', 7);\n                        break;\n                }\n            }\n        };\n\n        self._onInputChange = function(e)\n        {\n            var date;\n\n            if (e.firedBy === self) {\n                return;\n            }\n            if (opts.parse) {\n                date = opts.parse(opts.field.value, opts.format);\n            } else if (hasMoment) {\n                date = moment(opts.field.value, opts.format, opts.formatStrict);\n                date = (date && date.isValid()) ? date.toDate() : null;\n            }\n            else {\n                date = new Date(Date.parse(opts.field.value));\n            }\n            if (isDate(date)) {\n              self.setDate(date);\n            }\n            if (!self._v) {\n                self.show();\n            }\n        };\n\n        self._onInputFocus = function()\n        {\n            self.show();\n        };\n\n        self._onInputClick = function()\n        {\n            self.show();\n        };\n\n        self._onInputBlur = function()\n        {\n            // IE allows pika div to gain focus; catch blur the input field\n            var pEl = document.activeElement;\n            do {\n                if (hasClass(pEl, 'pika-single')) {\n                    return;\n                }\n            }\n            while ((pEl = pEl.parentNode));\n\n            if (!self._c) {\n                self._b = sto(function() {\n                    self.hide();\n                }, 50);\n            }\n            self._c = false;\n        };\n\n        self._onClick = function(e)\n        {\n            e = e || window.event;\n            var target = e.target || e.srcElement,\n                pEl = target;\n            if (!target) {\n                return;\n            }\n            if (!hasEventListeners && hasClass(target, 'pika-select')) {\n                if (!target.onchange) {\n                    target.setAttribute('onchange', 'return;');\n                    addEvent(target, 'change', self._onChange);\n                }\n            }\n            do {\n                if (hasClass(pEl, 'pika-single') || pEl === opts.trigger) {\n                    return;\n                }\n            }\n            while ((pEl = pEl.parentNode));\n            if (self._v && target !== opts.trigger && pEl !== opts.trigger) {\n                self.hide();\n            }\n        };\n\n        self.el = document.createElement('div');\n        self.el.className = 'pika-single' + (opts.isRTL ? ' is-rtl' : '') + (opts.theme ? ' ' + opts.theme : '');\n\n        addEvent(self.el, 'mousedown', self._onMouseDown, true);\n        addEvent(self.el, 'touchend', self._onMouseDown, true);\n        addEvent(self.el, 'change', self._onChange);\n\n        if (opts.keyboardInput) {\n            addEvent(document, 'keydown', self._onKeyChange);\n        }\n\n        if (opts.field) {\n            if (opts.container) {\n                opts.container.appendChild(self.el);\n            } else if (opts.bound) {\n                document.body.appendChild(self.el);\n            } else {\n                opts.field.parentNode.insertBefore(self.el, opts.field.nextSibling);\n            }\n            addEvent(opts.field, 'change', self._onInputChange);\n\n            if (!opts.defaultDate) {\n                if (hasMoment && opts.field.value) {\n                    opts.defaultDate = moment(opts.field.value, opts.format).toDate();\n                } else {\n                    opts.defaultDate = new Date(Date.parse(opts.field.value));\n                }\n                opts.setDefaultDate = true;\n            }\n        }\n\n        var defDate = opts.defaultDate;\n\n        if (isDate(defDate)) {\n            if (opts.setDefaultDate) {\n                self.setDate(defDate, true);\n            } else {\n                self.gotoDate(defDate);\n            }\n        } else {\n            self.gotoDate(new Date());\n        }\n\n        if (opts.bound) {\n            this.hide();\n            self.el.className += ' is-bound';\n            addEvent(opts.trigger, 'click', self._onInputClick);\n            addEvent(opts.trigger, 'focus', self._onInputFocus);\n            addEvent(opts.trigger, 'blur', self._onInputBlur);\n        } else {\n            this.show();\n        }\n    };\n\n\n    /**\n     * public Pikaday API\n     */\n    Pikaday.prototype = {\n\n\n        /**\n         * configure functionality\n         */\n        config: function(options)\n        {\n            if (!this._o) {\n                this._o = extend({}, defaults, true);\n            }\n\n            var opts = extend(this._o, options, true);\n\n            opts.isRTL = !!opts.isRTL;\n\n            opts.field = (opts.field && opts.field.nodeName) ? opts.field : null;\n\n            opts.theme = (typeof opts.theme) === 'string' && opts.theme ? opts.theme : null;\n\n            opts.bound = !!(opts.bound !== undefined ? opts.field && opts.bound : opts.field);\n\n            opts.trigger = (opts.trigger && opts.trigger.nodeName) ? opts.trigger : opts.field;\n\n            opts.disableWeekends = !!opts.disableWeekends;\n\n            opts.disableDayFn = (typeof opts.disableDayFn) === 'function' ? opts.disableDayFn : null;\n\n            var nom = parseInt(opts.numberOfMonths, 10) || 1;\n            opts.numberOfMonths = nom > 4 ? 4 : nom;\n\n            if (!isDate(opts.minDate)) {\n                opts.minDate = false;\n            }\n            if (!isDate(opts.maxDate)) {\n                opts.maxDate = false;\n            }\n            if ((opts.minDate && opts.maxDate) && opts.maxDate < opts.minDate) {\n                opts.maxDate = opts.minDate = false;\n            }\n            if (opts.minDate) {\n                this.setMinDate(opts.minDate);\n            }\n            if (opts.maxDate) {\n                this.setMaxDate(opts.maxDate);\n            }\n\n            if (isArray(opts.yearRange)) {\n                var fallback = new Date().getFullYear() - 10;\n                opts.yearRange[0] = parseInt(opts.yearRange[0], 10) || fallback;\n                opts.yearRange[1] = parseInt(opts.yearRange[1], 10) || fallback;\n            } else {\n                opts.yearRange = Math.abs(parseInt(opts.yearRange, 10)) || defaults.yearRange;\n                if (opts.yearRange > 100) {\n                    opts.yearRange = 100;\n                }\n            }\n\n            return opts;\n        },\n\n        /**\n         * return a formatted string of the current selection (using Moment.js if available)\n         */\n        toString: function(format)\n        {\n            format = format || this._o.format;\n            if (!isDate(this._d)) {\n                return '';\n            }\n            if (this._o.toString) {\n              return this._o.toString(this._d, format);\n            }\n            if (hasMoment) {\n              return moment(this._d).format(format);\n            }\n            return this._d.toDateString();\n        },\n\n        /**\n         * return a Moment.js object of the current selection (if available)\n         */\n        getMoment: function()\n        {\n            return hasMoment ? moment(this._d) : null;\n        },\n\n        /**\n         * set the current selection from a Moment.js object (if available)\n         */\n        setMoment: function(date, preventOnSelect)\n        {\n            if (hasMoment && moment.isMoment(date)) {\n                this.setDate(date.toDate(), preventOnSelect);\n            }\n        },\n\n        /**\n         * return a Date object of the current selection\n         */\n        getDate: function()\n        {\n            return isDate(this._d) ? new Date(this._d.getTime()) : null;\n        },\n\n        /**\n         * set the current selection\n         */\n        setDate: function(date, preventOnSelect)\n        {\n            if (!date) {\n                this._d = null;\n\n                if (this._o.field) {\n                    this._o.field.value = '';\n                    fireEvent(this._o.field, 'change', { firedBy: this });\n                }\n\n                return this.draw();\n            }\n            if (typeof date === 'string') {\n                date = new Date(Date.parse(date));\n            }\n            if (!isDate(date)) {\n                return;\n            }\n\n            var min = this._o.minDate,\n                max = this._o.maxDate;\n\n            if (isDate(min) && date < min) {\n                date = min;\n            } else if (isDate(max) && date > max) {\n                date = max;\n            }\n\n            this._d = new Date(date.getTime());\n            setToStartOfDay(this._d);\n            this.gotoDate(this._d);\n\n            if (this._o.field) {\n                this._o.field.value = this.toString();\n                fireEvent(this._o.field, 'change', { firedBy: this });\n            }\n            if (!preventOnSelect && typeof this._o.onSelect === 'function') {\n                this._o.onSelect.call(this, this.getDate());\n            }\n        },\n\n        /**\n         * change view to a specific date\n         */\n        gotoDate: function(date)\n        {\n            var newCalendar = true;\n\n            if (!isDate(date)) {\n                return;\n            }\n\n            if (this.calendars) {\n                var firstVisibleDate = new Date(this.calendars[0].year, this.calendars[0].month, 1),\n                    lastVisibleDate = new Date(this.calendars[this.calendars.length-1].year, this.calendars[this.calendars.length-1].month, 1),\n                    visibleDate = date.getTime();\n                // get the end of the month\n                lastVisibleDate.setMonth(lastVisibleDate.getMonth()+1);\n                lastVisibleDate.setDate(lastVisibleDate.getDate()-1);\n                newCalendar = (visibleDate < firstVisibleDate.getTime() || lastVisibleDate.getTime() < visibleDate);\n            }\n\n            if (newCalendar) {\n                this.calendars = [{\n                    month: date.getMonth(),\n                    year: date.getFullYear()\n                }];\n                if (this._o.mainCalendar === 'right') {\n                    this.calendars[0].month += 1 - this._o.numberOfMonths;\n                }\n            }\n\n            this.adjustCalendars();\n        },\n\n        adjustDate: function(sign, days) {\n\n            var day = this.getDate() || new Date();\n            var difference = parseInt(days)*24*60*60*1000;\n\n            var newDay;\n\n            if (sign === 'add') {\n                newDay = new Date(day.valueOf() + difference);\n            } else if (sign === 'subtract') {\n                newDay = new Date(day.valueOf() - difference);\n            }\n\n            this.setDate(newDay);\n        },\n\n        adjustCalendars: function() {\n            this.calendars[0] = adjustCalendar(this.calendars[0]);\n            for (var c = 1; c < this._o.numberOfMonths; c++) {\n                this.calendars[c] = adjustCalendar({\n                    month: this.calendars[0].month + c,\n                    year: this.calendars[0].year\n                });\n            }\n            this.draw();\n        },\n\n        gotoToday: function()\n        {\n            this.gotoDate(new Date());\n        },\n\n        /**\n         * change view to a specific month (zero-index, e.g. 0: January)\n         */\n        gotoMonth: function(month)\n        {\n            if (!isNaN(month)) {\n                this.calendars[0].month = parseInt(month, 10);\n                this.adjustCalendars();\n            }\n        },\n\n        nextMonth: function()\n        {\n            this.calendars[0].month++;\n            this.adjustCalendars();\n        },\n\n        prevMonth: function()\n        {\n            this.calendars[0].month--;\n            this.adjustCalendars();\n        },\n\n        /**\n         * change view to a specific full year (e.g. \"2012\")\n         */\n        gotoYear: function(year)\n        {\n            if (!isNaN(year)) {\n                this.calendars[0].year = parseInt(year, 10);\n                this.adjustCalendars();\n            }\n        },\n\n        /**\n         * change the minDate\n         */\n        setMinDate: function(value)\n        {\n            if(value instanceof Date) {\n                setToStartOfDay(value);\n                this._o.minDate = value;\n                this._o.minYear  = value.getFullYear();\n                this._o.minMonth = value.getMonth();\n            } else {\n                this._o.minDate = defaults.minDate;\n                this._o.minYear  = defaults.minYear;\n                this._o.minMonth = defaults.minMonth;\n                this._o.startRange = defaults.startRange;\n            }\n\n            this.draw();\n        },\n\n        /**\n         * change the maxDate\n         */\n        setMaxDate: function(value)\n        {\n            if(value instanceof Date) {\n                setToStartOfDay(value);\n                this._o.maxDate = value;\n                this._o.maxYear = value.getFullYear();\n                this._o.maxMonth = value.getMonth();\n            } else {\n                this._o.maxDate = defaults.maxDate;\n                this._o.maxYear = defaults.maxYear;\n                this._o.maxMonth = defaults.maxMonth;\n                this._o.endRange = defaults.endRange;\n            }\n\n            this.draw();\n        },\n\n        setStartRange: function(value)\n        {\n            this._o.startRange = value;\n        },\n\n        setEndRange: function(value)\n        {\n            this._o.endRange = value;\n        },\n\n        /**\n         * refresh the HTML\n         */\n        draw: function(force)\n        {\n            if (!this._v && !force) {\n                return;\n            }\n            var opts = this._o,\n                minYear = opts.minYear,\n                maxYear = opts.maxYear,\n                minMonth = opts.minMonth,\n                maxMonth = opts.maxMonth,\n                html = '',\n                randId;\n\n            if (this._y <= minYear) {\n                this._y = minYear;\n                if (!isNaN(minMonth) && this._m < minMonth) {\n                    this._m = minMonth;\n                }\n            }\n            if (this._y >= maxYear) {\n                this._y = maxYear;\n                if (!isNaN(maxMonth) && this._m > maxMonth) {\n                    this._m = maxMonth;\n                }\n            }\n\n            randId = 'pika-title-' + Math.random().toString(36).replace(/[^a-z]+/g, '').substr(0, 2);\n\n            for (var c = 0; c < opts.numberOfMonths; c++) {\n                html += '<div class=\"pika-lendar\">' + renderTitle(this, c, this.calendars[c].year, this.calendars[c].month, this.calendars[0].year, randId) + this.render(this.calendars[c].year, this.calendars[c].month, randId) + '</div>';\n            }\n\n            this.el.innerHTML = html;\n\n            if (opts.bound) {\n                if(opts.field.type !== 'hidden') {\n                    sto(function() {\n                        opts.trigger.focus();\n                    }, 1);\n                }\n            }\n\n            if (typeof this._o.onDraw === 'function') {\n                this._o.onDraw(this);\n            }\n\n            if (opts.bound) {\n                // let the screen reader user know to use arrow keys\n                opts.field.setAttribute('aria-label', 'Use the arrow keys to pick a date');\n            }\n        },\n\n        adjustPosition: function()\n        {\n            var field, pEl, width, height, viewportWidth, viewportHeight, scrollTop, left, top, clientRect;\n\n            if (this._o.container) return;\n\n            this.el.style.position = 'absolute';\n\n            field = this._o.trigger;\n            pEl = field;\n            width = this.el.offsetWidth;\n            height = this.el.offsetHeight;\n            viewportWidth = window.innerWidth || document.documentElement.clientWidth;\n            viewportHeight = window.innerHeight || document.documentElement.clientHeight;\n            scrollTop = window.pageYOffset || document.body.scrollTop || document.documentElement.scrollTop;\n\n            if (typeof field.getBoundingClientRect === 'function') {\n                clientRect = field.getBoundingClientRect();\n                left = clientRect.left + window.pageXOffset;\n                top = clientRect.bottom + window.pageYOffset;\n            } else {\n                left = pEl.offsetLeft;\n                top  = pEl.offsetTop + pEl.offsetHeight;\n                while((pEl = pEl.offsetParent)) {\n                    left += pEl.offsetLeft;\n                    top  += pEl.offsetTop;\n                }\n            }\n\n            // default position is bottom & left\n            if ((this._o.reposition && left + width > viewportWidth) ||\n                (\n                    this._o.position.indexOf('right') > -1 &&\n                    left - width + field.offsetWidth > 0\n                )\n            ) {\n                left = left - width + field.offsetWidth;\n            }\n            if ((this._o.reposition && top + height > viewportHeight + scrollTop) ||\n                (\n                    this._o.position.indexOf('top') > -1 &&\n                    top - height - field.offsetHeight > 0\n                )\n            ) {\n                top = top - height - field.offsetHeight;\n            }\n\n            this.el.style.left = left + 'px';\n            this.el.style.top = top + 'px';\n        },\n\n        /**\n         * render HTML for a particular month\n         */\n        render: function(year, month, randId)\n        {\n            var opts   = this._o,\n                now    = new Date(),\n                days   = getDaysInMonth(year, month),\n                before = new Date(year, month, 1).getDay(),\n                data   = [],\n                row    = [];\n            setToStartOfDay(now);\n            if (opts.firstDay > 0) {\n                before -= opts.firstDay;\n                if (before < 0) {\n                    before += 7;\n                }\n            }\n            var previousMonth = month === 0 ? 11 : month - 1,\n                nextMonth = month === 11 ? 0 : month + 1,\n                yearOfPreviousMonth = month === 0 ? year - 1 : year,\n                yearOfNextMonth = month === 11 ? year + 1 : year,\n                daysInPreviousMonth = getDaysInMonth(yearOfPreviousMonth, previousMonth);\n            var cells = days + before,\n                after = cells;\n            while(after > 7) {\n                after -= 7;\n            }\n            cells += 7 - after;\n            var isWeekSelected = false;\n            for (var i = 0, r = 0; i < cells; i++)\n            {\n                var day = new Date(year, month, 1 + (i - before)),\n                    isSelected = isDate(this._d) ? compareDates(day, this._d) : false,\n                    isToday = compareDates(day, now),\n                    hasEvent = opts.events.indexOf(day.toDateString()) !== -1 ? true : false,\n                    isEmpty = i < before || i >= (days + before),\n                    dayNumber = 1 + (i - before),\n                    monthNumber = month,\n                    yearNumber = year,\n                    isStartRange = opts.startRange && compareDates(opts.startRange, day),\n                    isEndRange = opts.endRange && compareDates(opts.endRange, day),\n                    isInRange = opts.startRange && opts.endRange && opts.startRange < day && day < opts.endRange,\n                    isDisabled = (opts.minDate && day < opts.minDate) ||\n                                 (opts.maxDate && day > opts.maxDate) ||\n                                 (opts.disableWeekends && isWeekend(day)) ||\n                                 (opts.disableDayFn && opts.disableDayFn(day));\n\n                if (isEmpty) {\n                    if (i < before) {\n                        dayNumber = daysInPreviousMonth + dayNumber;\n                        monthNumber = previousMonth;\n                        yearNumber = yearOfPreviousMonth;\n                    } else {\n                        dayNumber = dayNumber - days;\n                        monthNumber = nextMonth;\n                        yearNumber = yearOfNextMonth;\n                    }\n                }\n\n                var dayConfig = {\n                        day: dayNumber,\n                        month: monthNumber,\n                        year: yearNumber,\n                        hasEvent: hasEvent,\n                        isSelected: isSelected,\n                        isToday: isToday,\n                        isDisabled: isDisabled,\n                        isEmpty: isEmpty,\n                        isStartRange: isStartRange,\n                        isEndRange: isEndRange,\n                        isInRange: isInRange,\n                        showDaysInNextAndPreviousMonths: opts.showDaysInNextAndPreviousMonths,\n                        enableSelectionDaysInNextAndPreviousMonths: opts.enableSelectionDaysInNextAndPreviousMonths\n                    };\n\n                if (opts.pickWholeWeek && isSelected) {\n                    isWeekSelected = true;\n                }\n\n                row.push(renderDay(dayConfig));\n\n                if (++r === 7) {\n                    if (opts.showWeekNumber) {\n                        row.unshift(renderWeek(i - before, month, year));\n                    }\n                    data.push(renderRow(row, opts.isRTL, opts.pickWholeWeek, isWeekSelected));\n                    row = [];\n                    r = 0;\n                    isWeekSelected = false;\n                }\n            }\n            return renderTable(opts, data, randId);\n        },\n\n        isVisible: function()\n        {\n            return this._v;\n        },\n\n        show: function()\n        {\n            if (!this.isVisible()) {\n                this._v = true;\n                this.draw();\n                removeClass(this.el, 'is-hidden');\n                if (this._o.bound) {\n                    addEvent(document, 'click', this._onClick);\n                    this.adjustPosition();\n                }\n                if (typeof this._o.onOpen === 'function') {\n                    this._o.onOpen.call(this);\n                }\n            }\n        },\n\n        hide: function()\n        {\n            var v = this._v;\n            if (v !== false) {\n                if (this._o.bound) {\n                    removeEvent(document, 'click', this._onClick);\n                }\n                this.el.style.position = 'static'; // reset\n                this.el.style.left = 'auto';\n                this.el.style.top = 'auto';\n                addClass(this.el, 'is-hidden');\n                this._v = false;\n                if (v !== undefined && typeof this._o.onClose === 'function') {\n                    this._o.onClose.call(this);\n                }\n            }\n        },\n\n        /**\n         * GAME OVER\n         */\n        destroy: function()\n        {\n            var opts = this._o;\n\n            this.hide();\n            removeEvent(this.el, 'mousedown', this._onMouseDown, true);\n            removeEvent(this.el, 'touchend', this._onMouseDown, true);\n            removeEvent(this.el, 'change', this._onChange);\n            if (opts.keyboardInput) {\n                removeEvent(document, 'keydown', this._onKeyChange);\n            }\n            if (opts.field) {\n                removeEvent(opts.field, 'change', this._onInputChange);\n                if (opts.bound) {\n                    removeEvent(opts.trigger, 'click', this._onInputClick);\n                    removeEvent(opts.trigger, 'focus', this._onInputFocus);\n                    removeEvent(opts.trigger, 'blur', this._onInputBlur);\n                }\n            }\n            if (this.el.parentNode) {\n                this.el.parentNode.removeChild(this.el);\n            }\n        }\n\n    };\n\n    return Pikaday;\n}));\n","!function(){\"use strict\";function e(){}function t(t,n){var o,r,i,l,a=E;for(l=arguments.length;l-- >2;)W.push(arguments[l]);n&&null!=n.children&&(W.length||W.push(n.children),delete n.children);while(W.length)if((r=W.pop())&&void 0!==r.pop)for(l=r.length;l--;)W.push(r[l]);else\"boolean\"==typeof r&&(r=null),(i=\"function\"!=typeof t)&&(null==r?r=\"\":\"number\"==typeof r?r+=\"\":\"string\"!=typeof r&&(i=!1)),i&&o?a[a.length-1]+=r:a===E?a=[r]:a.push(r),o=i;var u=new e;return u.nodeName=t,u.children=a,u.attributes=null==n?void 0:n,u.key=null==n?void 0:n.key,void 0!==S.vnode&&S.vnode(u),u}function n(e,t){for(var n in t)e[n]=t[n];return e}function o(e,o){return t(e.nodeName,n(n({},e.attributes),o),arguments.length>2?[].slice.call(arguments,2):e.children)}function r(e){!e.__d&&(e.__d=!0)&&1==A.push(e)&&(S.debounceRendering||P)(i)}function i(){var e,t=A;A=[];while(e=t.pop())e.__d&&k(e)}function l(e,t,n){return\"string\"==typeof t||\"number\"==typeof t?void 0!==e.splitText:\"string\"==typeof t.nodeName?!e._componentConstructor&&a(e,t.nodeName):n||e._componentConstructor===t.nodeName}function a(e,t){return e.__n===t||e.nodeName.toLowerCase()===t.toLowerCase()}function u(e){var t=n({},e.attributes);t.children=e.children;var o=e.nodeName.defaultProps;if(void 0!==o)for(var r in o)void 0===t[r]&&(t[r]=o[r]);return t}function _(e,t){var n=t?document.createElementNS(\"http://www.w3.org/2000/svg\",e):document.createElement(e);return n.__n=e,n}function p(e){var t=e.parentNode;t&&t.removeChild(e)}function c(e,t,n,o,r){if(\"className\"===t&&(t=\"class\"),\"key\"===t);else if(\"ref\"===t)n&&n(null),o&&o(e);else if(\"class\"!==t||r)if(\"style\"===t){if(o&&\"string\"!=typeof o&&\"string\"!=typeof n||(e.style.cssText=o||\"\"),o&&\"object\"==typeof o){if(\"string\"!=typeof n)for(var i in n)i in o||(e.style[i]=\"\");for(var i in o)e.style[i]=\"number\"==typeof o[i]&&!1===V.test(i)?o[i]+\"px\":o[i]}}else if(\"dangerouslySetInnerHTML\"===t)o&&(e.innerHTML=o.__html||\"\");else if(\"o\"==t[0]&&\"n\"==t[1]){var l=t!==(t=t.replace(/Capture$/,\"\"));t=t.toLowerCase().substring(2),o?n||e.addEventListener(t,f,l):e.removeEventListener(t,f,l),(e.__l||(e.__l={}))[t]=o}else if(\"list\"!==t&&\"type\"!==t&&!r&&t in e)s(e,t,null==o?\"\":o),null!=o&&!1!==o||e.removeAttribute(t);else{var a=r&&t!==(t=t.replace(/^xlink:?/,\"\"));null==o||!1===o?a?e.removeAttributeNS(\"http://www.w3.org/1999/xlink\",t.toLowerCase()):e.removeAttribute(t):\"function\"!=typeof o&&(a?e.setAttributeNS(\"http://www.w3.org/1999/xlink\",t.toLowerCase(),o):e.setAttribute(t,o))}else e.className=o||\"\"}function s(e,t,n){try{e[t]=n}catch(e){}}function f(e){return this.__l[e.type](S.event&&S.event(e)||e)}function d(){var e;while(e=D.pop())S.afterMount&&S.afterMount(e),e.componentDidMount&&e.componentDidMount()}function h(e,t,n,o,r,i){H++||(R=null!=r&&void 0!==r.ownerSVGElement,j=null!=e&&!(\"__preactattr_\"in e));var l=m(e,t,n,o,i);return r&&l.parentNode!==r&&r.appendChild(l),--H||(j=!1,i||d()),l}function m(e,t,n,o,r){var i=e,l=R;if(null!=t&&\"boolean\"!=typeof t||(t=\"\"),\"string\"==typeof t||\"number\"==typeof t)return e&&void 0!==e.splitText&&e.parentNode&&(!e._component||r)?e.nodeValue!=t&&(e.nodeValue=t):(i=document.createTextNode(t),e&&(e.parentNode&&e.parentNode.replaceChild(i,e),b(e,!0))),i.__preactattr_=!0,i;var u=t.nodeName;if(\"function\"==typeof u)return U(e,t,n,o);if(R=\"svg\"===u||\"foreignObject\"!==u&&R,u+=\"\",(!e||!a(e,u))&&(i=_(u,R),e)){while(e.firstChild)i.appendChild(e.firstChild);e.parentNode&&e.parentNode.replaceChild(i,e),b(e,!0)}var p=i.firstChild,c=i.__preactattr_,s=t.children;if(null==c){c=i.__preactattr_={};for(var f=i.attributes,d=f.length;d--;)c[f[d].name]=f[d].value}return!j&&s&&1===s.length&&\"string\"==typeof s[0]&&null!=p&&void 0!==p.splitText&&null==p.nextSibling?p.nodeValue!=s[0]&&(p.nodeValue=s[0]):(s&&s.length||null!=p)&&v(i,s,n,o,j||null!=c.dangerouslySetInnerHTML),g(i,t.attributes,c),R=l,i}function v(e,t,n,o,r){var i,a,u,_,c,s=e.childNodes,f=[],d={},h=0,v=0,y=s.length,g=0,w=t?t.length:0;if(0!==y)for(var C=0;C<y;C++){var x=s[C],N=x.__preactattr_,k=w&&N?x._component?x._component.__k:N.key:null;null!=k?(h++,d[k]=x):(N||(void 0!==x.splitText?!r||x.nodeValue.trim():r))&&(f[g++]=x)}if(0!==w)for(var C=0;C<w;C++){_=t[C],c=null;var k=_.key;if(null!=k)h&&void 0!==d[k]&&(c=d[k],d[k]=void 0,h--);else if(!c&&v<g)for(i=v;i<g;i++)if(void 0!==f[i]&&l(a=f[i],_,r)){c=a,f[i]=void 0,i===g-1&&g--,i===v&&v++;break}c=m(c,_,n,o),u=s[C],c&&c!==e&&c!==u&&(null==u?e.appendChild(c):c===u.nextSibling?p(u):e.insertBefore(c,u))}if(h)for(var C in d)void 0!==d[C]&&b(d[C],!1);while(v<=g)void 0!==(c=f[g--])&&b(c,!1)}function b(e,t){var n=e._component;n?L(n):(null!=e.__preactattr_&&e.__preactattr_.ref&&e.__preactattr_.ref(null),!1!==t&&null!=e.__preactattr_||p(e),y(e))}function y(e){e=e.lastChild;while(e){var t=e.previousSibling;b(e,!0),e=t}}function g(e,t,n){var o;for(o in n)t&&null!=t[o]||null==n[o]||c(e,o,n[o],n[o]=void 0,R);for(o in t)\"children\"===o||\"innerHTML\"===o||o in n&&t[o]===(\"value\"===o||\"checked\"===o?e[o]:n[o])||c(e,o,n[o],n[o]=t[o],R)}function w(e){var t=e.constructor.name;(I[t]||(I[t]=[])).push(e)}function C(e,t,n){var o,r=I[e.name];if(e.prototype&&e.prototype.render?(o=new e(t,n),T.call(o,t,n)):(o=new T(t,n),o.constructor=e,o.render=x),r)for(var i=r.length;i--;)if(r[i].constructor===e){o.__b=r[i].__b,r.splice(i,1);break}return o}function x(e,t,n){return this.constructor(e,n)}function N(e,t,n,o,i){e.__x||(e.__x=!0,(e.__r=t.ref)&&delete t.ref,(e.__k=t.key)&&delete t.key,!e.base||i?e.componentWillMount&&e.componentWillMount():e.componentWillReceiveProps&&e.componentWillReceiveProps(t,o),o&&o!==e.context&&(e.__c||(e.__c=e.context),e.context=o),e.__p||(e.__p=e.props),e.props=t,e.__x=!1,0!==n&&(1!==n&&!1===S.syncComponentUpdates&&e.base?r(e):k(e,1,i)),e.__r&&e.__r(e))}function k(e,t,o,r){if(!e.__x){var i,l,a,_=e.props,p=e.state,c=e.context,s=e.__p||_,f=e.__s||p,m=e.__c||c,v=e.base,y=e.__b,g=v||y,w=e._component,x=!1;if(v&&(e.props=s,e.state=f,e.context=m,2!==t&&e.shouldComponentUpdate&&!1===e.shouldComponentUpdate(_,p,c)?x=!0:e.componentWillUpdate&&e.componentWillUpdate(_,p,c),e.props=_,e.state=p,e.context=c),e.__p=e.__s=e.__c=e.__b=null,e.__d=!1,!x){i=e.render(_,p,c),e.getChildContext&&(c=n(n({},c),e.getChildContext()));var U,T,M=i&&i.nodeName;if(\"function\"==typeof M){var W=u(i);l=w,l&&l.constructor===M&&W.key==l.__k?N(l,W,1,c,!1):(U=l,e._component=l=C(M,W,c),l.__b=l.__b||y,l.__u=e,N(l,W,0,c,!1),k(l,1,o,!0)),T=l.base}else a=g,U=w,U&&(a=e._component=null),(g||1===t)&&(a&&(a._component=null),T=h(a,i,c,o||!v,g&&g.parentNode,!0));if(g&&T!==g&&l!==w){var E=g.parentNode;E&&T!==E&&(E.replaceChild(T,g),U||(g._component=null,b(g,!1)))}if(U&&L(U),e.base=T,T&&!r){var P=e,V=e;while(V=V.__u)(P=V).base=T;T._component=P,T._componentConstructor=P.constructor}}if(!v||o?D.unshift(e):x||(e.componentDidUpdate&&e.componentDidUpdate(s,f,m),S.afterUpdate&&S.afterUpdate(e)),null!=e.__h)while(e.__h.length)e.__h.pop().call(e);H||r||d()}}function U(e,t,n,o){var r=e&&e._component,i=r,l=e,a=r&&e._componentConstructor===t.nodeName,_=a,p=u(t);while(r&&!_&&(r=r.__u))_=r.constructor===t.nodeName;return r&&_&&(!o||r._component)?(N(r,p,3,n,o),e=r.base):(i&&!a&&(L(i),e=l=null),r=C(t.nodeName,p,n),e&&!r.__b&&(r.__b=e,l=null),N(r,p,1,n,o),e=r.base,l&&e!==l&&(l._component=null,b(l,!1))),e}function L(e){S.beforeUnmount&&S.beforeUnmount(e);var t=e.base;e.__x=!0,e.componentWillUnmount&&e.componentWillUnmount(),e.base=null;var n=e._component;n?L(n):t&&(t.__preactattr_&&t.__preactattr_.ref&&t.__preactattr_.ref(null),e.__b=t,p(t),w(e),y(t)),e.__r&&e.__r(null)}function T(e,t){this.__d=!0,this.context=t,this.props=e,this.state=this.state||{}}function M(e,t,n){return h(n,e,{},!1,t,!1)}var S={},W=[],E=[],P=\"function\"==typeof Promise?Promise.resolve().then.bind(Promise.resolve()):setTimeout,V=/acit|ex(?:s|g|n|p|$)|rph|ows|mnc|ntw|ine[ch]|zoo|^ord/i,A=[],D=[],H=0,R=!1,j=!1,I={};n(T.prototype,{setState:function(e,t){var o=this.state;this.__s||(this.__s=n({},o)),n(o,\"function\"==typeof e?e(o,this.props):e),t&&(this.__h=this.__h||[]).push(t),r(this)},forceUpdate:function(e){e&&(this.__h=this.__h||[]).push(e),k(this,2)},render:function(){}});var $={h:t,createElement:t,cloneElement:o,Component:T,render:M,rerender:i,options:S};\"undefined\"!=typeof module?module.exports=$:self.preact=$}();\n//# sourceMappingURL=preact.min.js.map","// shim for using process in browser\nvar process = module.exports = {};\n\n// cached from whatever global is present so that test runners that stub it\n// don't break things.  But we need to wrap it in a try catch in case it is\n// wrapped in strict mode code which doesn't define any globals.  It's inside a\n// function because try/catches deoptimize in certain engines.\n\nvar cachedSetTimeout;\nvar cachedClearTimeout;\n\nfunction defaultSetTimout() {\n    throw new Error('setTimeout has not been defined');\n}\nfunction defaultClearTimeout () {\n    throw new Error('clearTimeout has not been defined');\n}\n(function () {\n    try {\n        if (typeof setTimeout === 'function') {\n            cachedSetTimeout = setTimeout;\n        } else {\n            cachedSetTimeout = defaultSetTimout;\n        }\n    } catch (e) {\n        cachedSetTimeout = defaultSetTimout;\n    }\n    try {\n        if (typeof clearTimeout === 'function') {\n            cachedClearTimeout = clearTimeout;\n        } else {\n            cachedClearTimeout = defaultClearTimeout;\n        }\n    } catch (e) {\n        cachedClearTimeout = defaultClearTimeout;\n    }\n} ())\nfunction runTimeout(fun) {\n    if (cachedSetTimeout === setTimeout) {\n        //normal enviroments in sane situations\n        return setTimeout(fun, 0);\n    }\n    // if setTimeout wasn't available but was latter defined\n    if ((cachedSetTimeout === defaultSetTimout || !cachedSetTimeout) && setTimeout) {\n        cachedSetTimeout = setTimeout;\n        return setTimeout(fun, 0);\n    }\n    try {\n        // when when somebody has screwed with setTimeout but no I.E. maddness\n        return cachedSetTimeout(fun, 0);\n    } catch(e){\n        try {\n            // When we are in I.E. but the script has been evaled so I.E. doesn't trust the global object when called normally\n            return cachedSetTimeout.call(null, fun, 0);\n        } catch(e){\n            // same as above but when it's a version of I.E. that must have the global object for 'this', hopfully our context correct otherwise it will throw a global error\n            return cachedSetTimeout.call(this, fun, 0);\n        }\n    }\n\n\n}\nfunction runClearTimeout(marker) {\n    if (cachedClearTimeout === clearTimeout) {\n        //normal enviroments in sane situations\n        return clearTimeout(marker);\n    }\n    // if clearTimeout wasn't available but was latter defined\n    if ((cachedClearTimeout === defaultClearTimeout || !cachedClearTimeout) && clearTimeout) {\n        cachedClearTimeout = clearTimeout;\n        return clearTimeout(marker);\n    }\n    try {\n        // when when somebody has screwed with setTimeout but no I.E. maddness\n        return cachedClearTimeout(marker);\n    } catch (e){\n        try {\n            // When we are in I.E. but the script has been evaled so I.E. doesn't  trust the global object when called normally\n            return cachedClearTimeout.call(null, marker);\n        } catch (e){\n            // same as above but when it's a version of I.E. that must have the global object for 'this', hopfully our context correct otherwise it will throw a global error.\n            // Some versions of I.E. have different rules for clearTimeout vs setTimeout\n            return cachedClearTimeout.call(this, marker);\n        }\n    }\n\n\n\n}\nvar queue = [];\nvar draining = false;\nvar currentQueue;\nvar queueIndex = -1;\n\nfunction cleanUpNextTick() {\n    if (!draining || !currentQueue) {\n        return;\n    }\n    draining = false;\n    if (currentQueue.length) {\n        queue = currentQueue.concat(queue);\n    } else {\n        queueIndex = -1;\n    }\n    if (queue.length) {\n        drainQueue();\n    }\n}\n\nfunction drainQueue() {\n    if (draining) {\n        return;\n    }\n    var timeout = runTimeout(cleanUpNextTick);\n    draining = true;\n\n    var len = queue.length;\n    while(len) {\n        currentQueue = queue;\n        queue = [];\n        while (++queueIndex < len) {\n            if (currentQueue) {\n                currentQueue[queueIndex].run();\n            }\n        }\n        queueIndex = -1;\n        len = queue.length;\n    }\n    currentQueue = null;\n    draining = false;\n    runClearTimeout(timeout);\n}\n\nprocess.nextTick = function (fun) {\n    var args = new Array(arguments.length - 1);\n    if (arguments.length > 1) {\n        for (var i = 1; i < arguments.length; i++) {\n            args[i - 1] = arguments[i];\n        }\n    }\n    queue.push(new Item(fun, args));\n    if (queue.length === 1 && !draining) {\n        runTimeout(drainQueue);\n    }\n};\n\n// v8 likes predictible objects\nfunction Item(fun, array) {\n    this.fun = fun;\n    this.array = array;\n}\nItem.prototype.run = function () {\n    this.fun.apply(null, this.array);\n};\nprocess.title = 'browser';\nprocess.browser = true;\nprocess.env = {};\nprocess.argv = [];\nprocess.version = ''; // empty string to avoid regexp issues\nprocess.versions = {};\n\nfunction noop() {}\n\nprocess.on = noop;\nprocess.addListener = noop;\nprocess.once = noop;\nprocess.off = noop;\nprocess.removeListener = noop;\nprocess.removeAllListeners = noop;\nprocess.emit = noop;\nprocess.prependListener = noop;\nprocess.prependOnceListener = noop;\n\nprocess.listeners = function (name) { return [] }\n\nprocess.binding = function (name) {\n    throw new Error('process.binding is not supported');\n};\n\nprocess.cwd = function () { return '/' };\nprocess.chdir = function (dir) {\n    throw new Error('process.chdir is not supported');\n};\nprocess.umask = function() { return 0; };\n","'use strict';\n\nvar React = require('react');\nvar xtend = require('xtend');\n\nfunction astToReact(node, options) {\n  var parent = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : {};\n  var index = arguments.length > 3 && arguments[3] !== undefined ? arguments[3] : 0;\n\n  var renderer = options.renderers[node.type];\n\n  var pos = node.position.start;\n  var key = [node.type, pos.line, pos.column].join('-');\n\n  if (node.type === 'text') {\n    return renderer ? renderer(node.value, key) : node.value;\n  }\n\n  if (typeof renderer !== 'function' && typeof renderer !== 'string' && !isReactFragment(renderer)) {\n    throw new Error('Renderer for type `' + node.type + '` not defined or is not renderable');\n  }\n\n  var nodeProps = getNodeProps(node, key, options, renderer, parent, index);\n\n  return React.createElement(renderer, nodeProps, nodeProps.children || resolveChildren() || undefined);\n\n  function resolveChildren() {\n    return node.children && node.children.map(function (childNode, i) {\n      return astToReact(childNode, options, { node: node, props: nodeProps }, i);\n    });\n  }\n}\n\nfunction isReactFragment(renderer) {\n  return React.Fragment && React.Fragment === renderer;\n}\n\n// eslint-disable-next-line max-params, complexity\nfunction getNodeProps(node, key, opts, renderer, parent, index) {\n  var props = { key: key };\n\n  var isTagRenderer = typeof renderer === 'string';\n\n  // `sourcePos` is true if the user wants source information (line/column info from markdown source)\n  if (opts.sourcePos && node.position) {\n    props['data-sourcepos'] = flattenPosition(node.position);\n  }\n\n  if (opts.rawSourcePos && !isTagRenderer) {\n    props.sourcePosition = node.position;\n  }\n\n  var ref = node.identifier !== null && node.identifier !== undefined ? opts.definitions[node.identifier] || {} : null;\n\n  switch (node.type) {\n    case 'root':\n      assignDefined(props, { className: opts.className });\n      break;\n    case 'heading':\n      props.level = node.depth;\n      break;\n    case 'list':\n      props.start = node.start;\n      props.ordered = node.ordered;\n      props.tight = !node.loose;\n      break;\n    case 'listItem':\n      props.checked = node.checked;\n      props.tight = !node.loose;\n      props.children = (props.tight ? unwrapParagraphs(node) : node.children).map(function (childNode, i) {\n        return astToReact(childNode, opts, { node: node, props: props }, i);\n      });\n      break;\n    case 'definition':\n      assignDefined(props, { identifier: node.identifier, title: node.title, url: node.url });\n      break;\n    case 'code':\n      assignDefined(props, { language: node.lang && node.lang.split(/\\s/, 1)[0] });\n      break;\n    case 'inlineCode':\n      props.children = node.value;\n      props.inline = true;\n      break;\n    case 'link':\n      assignDefined(props, {\n        title: node.title || undefined,\n        href: opts.transformLinkUri ? opts.transformLinkUri(node.url, node.children, node.title) : node.url\n      });\n      break;\n    case 'image':\n      assignDefined(props, {\n        alt: node.alt || undefined,\n        title: node.title || undefined,\n        src: opts.transformImageUri ? opts.transformImageUri(node.url, node.children, node.title, node.alt) : node.url\n      });\n      break;\n    case 'linkReference':\n      assignDefined(props, xtend(ref, {\n        href: opts.transformLinkUri ? opts.transformLinkUri(ref.href) : ref.href\n      }));\n      break;\n    case 'imageReference':\n      assignDefined(props, {\n        src: opts.transformImageUri && ref.href ? opts.transformImageUri(ref.href, node.children, ref.title, node.alt) : ref.href,\n        title: ref.title || undefined,\n        alt: node.alt || undefined\n      });\n      break;\n    case 'table':\n    case 'tableHead':\n    case 'tableBody':\n      props.columnAlignment = node.align;\n      break;\n    case 'tableRow':\n      props.isHeader = parent.node.type === 'tableHead';\n      props.columnAlignment = parent.props.columnAlignment;\n      break;\n    case 'tableCell':\n      assignDefined(props, {\n        isHeader: parent.props.isHeader,\n        align: parent.props.columnAlignment[index]\n      });\n      break;\n    case 'virtualHtml':\n      props.tag = node.tag;\n      break;\n    case 'html':\n      // @todo find a better way than this\n      props.isBlock = node.position.start.line !== node.position.end.line;\n      props.escapeHtml = opts.escapeHtml;\n      props.skipHtml = opts.skipHtml;\n      break;\n    default:\n      assignDefined(props, xtend(node, {\n        type: undefined,\n        position: undefined,\n        children: undefined\n      }));\n  }\n\n  if (!isTagRenderer && node.value) {\n    props.value = node.value;\n  }\n\n  return props;\n}\n\nfunction assignDefined(target, attrs) {\n  for (var key in attrs) {\n    if (typeof attrs[key] !== 'undefined') {\n      target[key] = attrs[key];\n    }\n  }\n}\n\nfunction flattenPosition(pos) {\n  return [pos.start.line, ':', pos.start.column, '-', pos.end.line, ':', pos.end.column].map(String).join('');\n}\n\nfunction unwrapParagraphs(node) {\n  return node.children.reduce(function (array, child) {\n    return array.concat(child.type === 'paragraph' ? child.children || [] : [child]);\n  }, []);\n}\n\nmodule.exports = astToReact;","'use strict';\n\nmodule.exports = function getDefinitions(node) {\n  var defs = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};\n\n  return (node.children || []).reduce(function (definitions, child) {\n    if (child.type === 'definition') {\n      definitions[child.identifier] = {\n        href: child.url,\n        title: child.title\n      };\n    }\n\n    return getDefinitions(child, definitions);\n  }, defs);\n};","'use strict';\n\nvar visit = require('unist-util-visit');\n\nexports.ofType = function (types, mode) {\n  return function (node) {\n    types.forEach(function (type) {\n      return visit(node, type, disallow, true);\n    });\n    return node;\n  };\n\n  function disallow(node, index, parent) {\n    if (parent) {\n      untangle(node, index, parent, mode);\n    }\n  }\n};\n\nexports.ifNotMatch = function (allowNode, mode) {\n  return function (node) {\n    visit(node, disallow, true);\n    return node;\n  };\n\n  function disallow(node, index, parent) {\n    if (parent && !allowNode(node, index, parent)) {\n      untangle(node, index, parent, mode);\n    }\n  }\n};\n\nfunction untangle(node, index, parent, mode) {\n  if (mode === 'remove') {\n    parent.children.splice(index, 1);\n  } else if (mode === 'unwrap') {\n    var args = [index, 1];\n\n    if (node.children) {\n      args = args.concat(node.children);\n    }\n\n    Array.prototype.splice.apply(parent.children, args);\n  }\n}","'use strict';\n\n/**\n * Naive, simple plugin to match inline nodes without attributes\n * This allows say <strong>foo</strong>, but not <strong class=\"very\">foo</strong>\n * For proper HTML support, you'll want a different plugin\n **/\nvar visit = require('unist-util-visit');\n\nvar type = 'virtualHtml';\nvar selfClosingRe = /^<(area|base|br|col|embed|hr|img|input|keygen|link|meta|param|source|track|wbr)\\s*\\/?>$/i;\nvar simpleTagRe = /^<(\\/?)([a-z]+)\\s*>$/;\n\nmodule.exports = function (tree) {\n  var open = void 0;\n  var currentParent = void 0;\n  visit(tree, 'html', function (node, index, parent) {\n    if (currentParent !== parent) {\n      open = [];\n      currentParent = parent;\n    }\n\n    var selfClosing = getSelfClosing(node);\n    if (selfClosing) {\n      parent.children.splice(index, 1, {\n        type: type,\n        tag: selfClosing,\n        position: node.position\n      });\n      return true;\n    }\n\n    var current = getSimpleTag(node, parent);\n    if (!current) {\n      return true;\n    }\n\n    var matching = findAndPull(open, current.tag);\n\n    if (matching) {\n      parent.children.splice(index, 0, virtual(current, matching, parent));\n    } else if (!current.opening) {\n      open.push(current);\n    }\n\n    return true;\n  }, true // Iterate in reverse\n  );\n\n  return tree;\n};\n\nfunction findAndPull(open, matchingTag) {\n  var i = open.length;\n  while (i--) {\n    if (open[i].tag === matchingTag) {\n      return open.splice(i, 1)[0];\n    }\n  }\n\n  return false;\n}\n\nfunction getSimpleTag(node, parent) {\n  var match = node.value.match(simpleTagRe);\n  return match ? { tag: match[2], opening: !match[1], node: node } : false;\n}\n\nfunction getSelfClosing(node) {\n  var match = node.value.match(selfClosingRe);\n  return match ? match[1] : false;\n}\n\nfunction virtual(fromNode, toNode, parent) {\n  var fromIndex = parent.children.indexOf(fromNode.node);\n  var toIndex = parent.children.indexOf(toNode.node);\n\n  var extracted = parent.children.splice(fromIndex, toIndex - fromIndex + 1);\n  var children = extracted.slice(1, -1);\n  return {\n    type: type,\n    children: children,\n    tag: fromNode.tag,\n    position: {\n      start: fromNode.node.position.start,\n      end: toNode.node.position.end,\n      indent: []\n    }\n  };\n}","'use strict';\n\nfunction _toConsumableArray(arr) { if (Array.isArray(arr)) { for (var i = 0, arr2 = Array(arr.length); i < arr.length; i++) { arr2[i] = arr[i]; } return arr2; } else { return Array.from(arr); } }\n\nvar xtend = require('xtend');\nvar unified = require('unified');\nvar parse = require('remark-parse');\nvar PropTypes = require('prop-types');\nvar naiveHtml = require('./plugins/naive-html');\nvar disallowNode = require('./plugins/disallow-node');\nvar astToReact = require('./ast-to-react');\nvar wrapTableRows = require('./wrap-table-rows');\nvar getDefinitions = require('./get-definitions');\nvar uriTransformer = require('./uriTransformer');\nvar defaultRenderers = require('./renderers');\n\nvar allTypes = Object.keys(defaultRenderers);\n\nvar ReactMarkdown = function ReactMarkdown(props) {\n  var src = props.source || props.children || '';\n\n  if (props.allowedTypes && props.disallowedTypes) {\n    throw new Error('Only one of `allowedTypes` and `disallowedTypes` should be defined');\n  }\n\n  var renderers = xtend(defaultRenderers, props.renderers);\n\n  var plugins = [parse].concat(props.plugins || []);\n  var parser = plugins.reduce(applyParserPlugin, unified());\n\n  var rawAst = parser.parse(src);\n  var renderProps = xtend(props, {\n    renderers: renderers,\n    definitions: getDefinitions(rawAst)\n  });\n\n  var astPlugins = determineAstPlugins(props);\n  var ast = astPlugins.reduce(function (node, plugin) {\n    return plugin(node, renderProps);\n  }, rawAst);\n\n  return astToReact(ast, renderProps);\n};\n\nfunction applyParserPlugin(parser, plugin) {\n  return Array.isArray(plugin) ? parser.use.apply(parser, _toConsumableArray(plugin)) : parser.use(plugin);\n}\n\nfunction determineAstPlugins(props) {\n  var plugins = [wrapTableRows];\n\n  var disallowedTypes = props.disallowedTypes;\n  if (props.allowedTypes) {\n    disallowedTypes = allTypes.filter(function (type) {\n      return type !== 'root' && props.allowedTypes.indexOf(type) === -1;\n    });\n  }\n\n  var removalMethod = props.unwrapDisallowed ? 'unwrap' : 'remove';\n  if (disallowedTypes && disallowedTypes.length > 0) {\n    plugins.push(disallowNode.ofType(disallowedTypes, removalMethod));\n  }\n\n  if (props.allowNode) {\n    plugins.push(disallowNode.ifNotMatch(props.allowNode, removalMethod));\n  }\n\n  var renderHtml = !props.escapeHtml && !props.skipHtml;\n  if (renderHtml) {\n    plugins.push(naiveHtml);\n  }\n\n  return props.astPlugins ? plugins.concat(props.astPlugins) : plugins;\n}\n\nReactMarkdown.defaultProps = {\n  renderers: {},\n  escapeHtml: true,\n  skipHtml: false,\n  sourcePos: false,\n  rawSourcePos: false,\n  transformLinkUri: uriTransformer,\n  astPlugins: [],\n  plugins: []\n};\n\nReactMarkdown.propTypes = {\n  className: PropTypes.string,\n  source: PropTypes.string,\n  children: PropTypes.string,\n  sourcePos: PropTypes.bool,\n  rawSourcePos: PropTypes.bool,\n  escapeHtml: PropTypes.bool,\n  skipHtml: PropTypes.bool,\n  allowNode: PropTypes.func,\n  allowedTypes: PropTypes.arrayOf(PropTypes.oneOf(allTypes)),\n  disallowedTypes: PropTypes.arrayOf(PropTypes.oneOf(allTypes)),\n  transformLinkUri: PropTypes.oneOfType([PropTypes.func, PropTypes.bool]),\n  transformImageUri: PropTypes.func,\n  astPlugins: PropTypes.arrayOf(PropTypes.func),\n  unwrapDisallowed: PropTypes.bool,\n  renderers: PropTypes.object,\n  plugins: PropTypes.array\n};\n\nReactMarkdown.types = allTypes;\nReactMarkdown.renderers = defaultRenderers;\nReactMarkdown.uriTransformer = uriTransformer;\n\nmodule.exports = ReactMarkdown;","/* eslint-disable react/prop-types, react/no-multi-comp */\n'use strict';\n\nvar xtend = require('xtend');\nvar React = require('react');\nvar createElement = React.createElement;\n\nmodule.exports = {\n  root: 'div',\n  break: 'br',\n  paragraph: 'p',\n  emphasis: 'em',\n  strong: 'strong',\n  thematicBreak: 'hr',\n  blockquote: 'blockquote',\n  delete: 'del',\n  link: 'a',\n  image: 'img',\n  linkReference: 'a',\n  imageReference: 'img',\n  table: SimpleRenderer.bind(null, 'table'),\n  tableHead: SimpleRenderer.bind(null, 'thead'),\n  tableBody: SimpleRenderer.bind(null, 'tbody'),\n  tableRow: SimpleRenderer.bind(null, 'tr'),\n  tableCell: TableCell,\n\n  list: List,\n  listItem: ListItem,\n  definition: NullRenderer,\n  heading: Heading,\n  inlineCode: InlineCode,\n  code: CodeBlock,\n  html: Html,\n  virtualHtml: VirtualHtml\n};\n\nfunction SimpleRenderer(tag, props) {\n  return createElement(tag, getCoreProps(props), props.children);\n}\n\nfunction TableCell(props) {\n  var style = props.align ? { textAlign: props.align } : undefined;\n  var coreProps = getCoreProps(props);\n  return createElement(props.isHeader ? 'th' : 'td', style ? xtend({ style: style }, coreProps) : coreProps, props.children);\n}\n\nfunction Heading(props) {\n  return createElement('h' + props.level, getCoreProps(props), props.children);\n}\n\nfunction List(props) {\n  var attrs = getCoreProps(props);\n  if (props.start !== null && props.start !== 1) {\n    attrs.start = props.start.toString();\n  }\n\n  return createElement(props.ordered ? 'ol' : 'ul', attrs, props.children);\n}\n\nfunction ListItem(props) {\n  var checkbox = null;\n  if (props.checked !== null) {\n    var checked = props.checked;\n    checkbox = createElement('input', { type: 'checkbox', checked: checked, readOnly: true });\n  }\n\n  return createElement('li', getCoreProps(props), checkbox, props.children);\n}\n\nfunction CodeBlock(props) {\n  var className = props.language && 'language-' + props.language;\n  var code = createElement('code', className ? { className: className } : null, props.value);\n  return createElement('pre', getCoreProps(props), code);\n}\n\nfunction InlineCode(props) {\n  return createElement('code', getCoreProps(props), props.children);\n}\n\nfunction Html(props) {\n  if (props.skipHtml) {\n    return null;\n  }\n\n  var tag = props.isBlock ? 'div' : 'span';\n  if (props.escapeHtml) {\n    // @todo when fiber lands, we can simply render props.value\n    return createElement(tag, null, props.value);\n  }\n\n  var nodeProps = { dangerouslySetInnerHTML: { __html: props.value } };\n  return createElement(tag, nodeProps);\n}\n\nfunction VirtualHtml(props) {\n  return createElement(props.tag, getCoreProps(props), props.children);\n}\n\nfunction NullRenderer() {\n  return null;\n}\n\nfunction getCoreProps(props) {\n  return props['data-sourcepos'] ? { 'data-sourcepos': props['data-sourcepos'] } : {};\n}","'use strict';\n\nvar protocols = ['http', 'https', 'mailto', 'tel'];\n\nmodule.exports = function uriTransformer(uri) {\n  var url = (uri || '').trim();\n  var first = url.charAt(0);\n\n  if (first === '#' || first === '/') {\n    return url;\n  }\n\n  var colon = url.indexOf(':');\n  if (colon === -1) {\n    return url;\n  }\n\n  var length = protocols.length;\n  var index = -1;\n\n  while (++index < length) {\n    var protocol = protocols[index];\n\n    if (colon === protocol.length && url.slice(0, protocol.length) === protocol) {\n      return url;\n    }\n  }\n\n  index = url.indexOf('?');\n  if (index !== -1 && colon > index) {\n    return url;\n  }\n\n  index = url.indexOf('#');\n  if (index !== -1 && colon > index) {\n    return url;\n  }\n\n  // eslint-disable-next-line no-script-url\n  return 'javascript:void(0)';\n};","'use strict';\n\nvar visit = require('unist-util-visit');\n\nmodule.exports = function (node) {\n  visit(node, 'table', wrap);\n  return node;\n};\n\nfunction wrap(table) {\n  var children = table.children;\n  table.children = [{\n    type: 'tableHead',\n    align: table.align,\n    children: [children[0]],\n    position: children[0].position\n  }];\n  if (children.length > 1) {\n    table.children.push({\n      type: 'tableBody',\n      align: table.align,\n      children: children.slice(1),\n      position: {\n        start: children[1].position.start,\n        end: children[children.length - 1].position.end\n      }\n    });\n  }\n}","'use strict';\n\nmodule.exports = breaks;\n\nfunction breaks() {\n  var parser = this.Parser;\n  var tokenizers;\n\n  if (!isRemarkParser(parser)) {\n    throw new Error('Missing parser to attach `remark-breaks` to');\n  }\n\n  tokenizers = parser.prototype.inlineTokenizers;\n\n  tokenizeBreak.locator = tokenizers.break.locator;\n\n  tokenizers.break = tokenizeBreak;\n\n  function tokenizeBreak(eat, value, silent) {\n    var length = value.length;\n    var index = -1;\n    var queue = '';\n    var character;\n\n    while (++index < length) {\n      character = value.charAt(index);\n\n      if (character === '\\n') {\n        /* istanbul ignore if - never used (yet) */\n        if (silent) {\n          return true;\n        }\n\n        queue += character;\n\n        return eat(queue)({type: 'break'});\n      }\n\n      if (character !== ' ') {\n        return;\n      }\n\n      queue += character;\n    }\n  }\n}\n\nfunction isRemarkParser(parser) {\n  return Boolean(\n    parser &&\n    parser.prototype &&\n    parser.prototype.inlineTokenizers &&\n    parser.prototype.inlineTokenizers.break &&\n    parser.prototype.inlineTokenizers.break.locator\n  );\n}\n","'use strict';\n\nvar unherit = require('unherit');\nvar xtend = require('xtend');\nvar Parser = require('./lib/parser.js');\n\nmodule.exports = parse;\nparse.Parser = Parser;\n\nfunction parse(options) {\n  var Local = unherit(Parser);\n  Local.prototype.options = xtend(Local.prototype.options, this.data('settings'), options);\n  this.Parser = Local;\n}\n","'use strict';\n\nvar xtend = require('xtend');\nvar entities = require('parse-entities');\n\nmodule.exports = factory;\n\n/* Factory to create an entity decoder. */\nfunction factory(ctx) {\n  decoder.raw = decodeRaw;\n\n  return decoder;\n\n  /* Normalize `position` to add an `indent`. */\n  function normalize(position) {\n    var offsets = ctx.offset;\n    var line = position.line;\n    var result = [];\n\n    while (++line) {\n      if (!(line in offsets)) {\n        break;\n      }\n\n      result.push((offsets[line] || 0) + 1);\n    }\n\n    return {\n      start: position,\n      indent: result\n    };\n  }\n\n  /* Handle a warning.\n   * See https://github.com/wooorm/parse-entities\n   * for the warnings. */\n  function handleWarning(reason, position, code) {\n    if (code === 3) {\n      return;\n    }\n\n    ctx.file.message(reason, position);\n  }\n\n  /* Decode `value` (at `position`) into text-nodes. */\n  function decoder(value, position, handler) {\n    entities(value, {\n      position: normalize(position),\n      warning: handleWarning,\n      text: handler,\n      reference: handler,\n      textContext: ctx,\n      referenceContext: ctx\n    });\n  }\n\n  /* Decode `value` (at `position`) into a string. */\n  function decodeRaw(value, position, options) {\n    return entities(value, xtend(options, {\n      position: normalize(position),\n      warning: handleWarning\n    }));\n  }\n}\n","'use strict';\n\nmodule.exports = {\n  position: true,\n  gfm: true,\n  commonmark: false,\n  footnotes: false,\n  pedantic: false,\n  blocks: require('./block-elements.json')\n};\n","'use strict';\n\nmodule.exports = locate;\n\nfunction locate(value, fromIndex) {\n  var index = value.indexOf('\\n', fromIndex);\n\n  while (index > fromIndex) {\n    if (value.charAt(index - 1) !== ' ') {\n      break;\n    }\n\n    index--;\n  }\n\n  return index;\n}\n","'use strict';\n\nmodule.exports = locate;\n\nfunction locate(value, fromIndex) {\n  return value.indexOf('`', fromIndex);\n}\n","'use strict';\n\nmodule.exports = locate;\n\nfunction locate(value, fromIndex) {\n  return value.indexOf('~~', fromIndex);\n}\n","'use strict';\n\nmodule.exports = locate;\n\nfunction locate(value, fromIndex) {\n  var asterisk = value.indexOf('*', fromIndex);\n  var underscore = value.indexOf('_', fromIndex);\n\n  if (underscore === -1) {\n    return asterisk;\n  }\n\n  if (asterisk === -1) {\n    return underscore;\n  }\n\n  return underscore < asterisk ? underscore : asterisk;\n}\n","'use strict';\n\nmodule.exports = locate;\n\nfunction locate(value, fromIndex) {\n  return value.indexOf('\\\\', fromIndex);\n}\n","'use strict';\n\nmodule.exports = locate;\n\nfunction locate(value, fromIndex) {\n  var link = value.indexOf('[', fromIndex);\n  var image = value.indexOf('![', fromIndex);\n\n  if (image === -1) {\n    return link;\n  }\n\n  /* Link can never be `-1` if an image is found, so we don’t need\n   * to check for that :) */\n  return link < image ? link : image;\n}\n","'use strict';\n\nmodule.exports = locate;\n\nfunction locate(value, fromIndex) {\n  var asterisk = value.indexOf('**', fromIndex);\n  var underscore = value.indexOf('__', fromIndex);\n\n  if (underscore === -1) {\n    return asterisk;\n  }\n\n  if (asterisk === -1) {\n    return underscore;\n  }\n\n  return underscore < asterisk ? underscore : asterisk;\n}\n","'use strict';\n\nmodule.exports = locate;\n\nfunction locate(value, fromIndex) {\n  return value.indexOf('<', fromIndex);\n}\n","'use strict';\n\nmodule.exports = locate;\n\nvar PROTOCOLS = ['https://', 'http://', 'mailto:'];\n\nfunction locate(value, fromIndex) {\n  var length = PROTOCOLS.length;\n  var index = -1;\n  var min = -1;\n  var position;\n\n  if (!this.options.gfm) {\n    return -1;\n  }\n\n  while (++index < length) {\n    position = value.indexOf(PROTOCOLS[index], fromIndex);\n\n    if (position !== -1 && (position < min || min === -1)) {\n      min = position;\n    }\n  }\n\n  return min;\n}\n","'use strict';\n\nvar xtend = require('xtend');\nvar removePosition = require('unist-util-remove-position');\n\nmodule.exports = parse;\n\nvar C_NEWLINE = '\\n';\nvar EXPRESSION_LINE_BREAKS = /\\r\\n|\\r/g;\n\n/* Parse the bound file. */\nfunction parse() {\n  var self = this;\n  var value = String(self.file);\n  var start = {line: 1, column: 1, offset: 0};\n  var content = xtend(start);\n  var node;\n\n  /* Clean non-unix newlines: `\\r\\n` and `\\r` are all\n   * changed to `\\n`.  This should not affect positional\n   * information. */\n  value = value.replace(EXPRESSION_LINE_BREAKS, C_NEWLINE);\n\n  if (value.charCodeAt(0) === 0xFEFF) {\n    value = value.slice(1);\n\n    content.column++;\n    content.offset++;\n  }\n\n  node = {\n    type: 'root',\n    children: self.tokenizeBlock(value, content),\n    position: {\n      start: start,\n      end: self.eof || xtend(start)\n    }\n  };\n\n  if (!self.options.position) {\n    removePosition(node, true);\n  }\n\n  return node;\n}\n","'use strict';\n\nvar xtend = require('xtend');\nvar toggle = require('state-toggle');\nvar vfileLocation = require('vfile-location');\nvar unescape = require('./unescape');\nvar decode = require('./decode');\nvar tokenizer = require('./tokenizer');\n\nmodule.exports = Parser;\n\nfunction Parser(doc, file) {\n  this.file = file;\n  this.offset = {};\n  this.options = xtend(this.options);\n  this.setOptions({});\n\n  this.inList = false;\n  this.inBlock = false;\n  this.inLink = false;\n  this.atStart = true;\n\n  this.toOffset = vfileLocation(file).toOffset;\n  this.unescape = unescape(this, 'escape');\n  this.decode = decode(this);\n}\n\nvar proto = Parser.prototype;\n\n/* Expose core. */\nproto.setOptions = require('./set-options');\nproto.parse = require('./parse');\n\n/* Expose `defaults`. */\nproto.options = require('./defaults');\n\n/* Enter and exit helpers. */\nproto.exitStart = toggle('atStart', true);\nproto.enterList = toggle('inList', false);\nproto.enterLink = toggle('inLink', false);\nproto.enterBlock = toggle('inBlock', false);\n\n/* Nodes that can interupt a paragraph:\n *\n * ```markdown\n * A paragraph, followed by a thematic break.\n * ___\n * ```\n *\n * In the above example, the thematic break “interupts”\n * the paragraph. */\nproto.interruptParagraph = [\n  ['thematicBreak'],\n  ['atxHeading'],\n  ['fencedCode'],\n  ['blockquote'],\n  ['html'],\n  ['setextHeading', {commonmark: false}],\n  ['definition', {commonmark: false}],\n  ['footnote', {commonmark: false}]\n];\n\n/* Nodes that can interupt a list:\n *\n * ```markdown\n * - One\n * ___\n * ```\n *\n * In the above example, the thematic break “interupts”\n * the list. */\nproto.interruptList = [\n  ['atxHeading', {pedantic: false}],\n  ['fencedCode', {pedantic: false}],\n  ['thematicBreak', {pedantic: false}],\n  ['definition', {commonmark: false}],\n  ['footnote', {commonmark: false}]\n];\n\n/* Nodes that can interupt a blockquote:\n *\n * ```markdown\n * > A paragraph.\n * ___\n * ```\n *\n * In the above example, the thematic break “interupts”\n * the blockquote. */\nproto.interruptBlockquote = [\n  ['indentedCode', {commonmark: true}],\n  ['fencedCode', {commonmark: true}],\n  ['atxHeading', {commonmark: true}],\n  ['setextHeading', {commonmark: true}],\n  ['thematicBreak', {commonmark: true}],\n  ['html', {commonmark: true}],\n  ['list', {commonmark: true}],\n  ['definition', {commonmark: false}],\n  ['footnote', {commonmark: false}]\n];\n\n/* Handlers. */\nproto.blockTokenizers = {\n  newline: require('./tokenize/newline'),\n  indentedCode: require('./tokenize/code-indented'),\n  fencedCode: require('./tokenize/code-fenced'),\n  blockquote: require('./tokenize/blockquote'),\n  atxHeading: require('./tokenize/heading-atx'),\n  thematicBreak: require('./tokenize/thematic-break'),\n  list: require('./tokenize/list'),\n  setextHeading: require('./tokenize/heading-setext'),\n  html: require('./tokenize/html-block'),\n  footnote: require('./tokenize/footnote-definition'),\n  definition: require('./tokenize/definition'),\n  table: require('./tokenize/table'),\n  paragraph: require('./tokenize/paragraph')\n};\n\nproto.inlineTokenizers = {\n  escape: require('./tokenize/escape'),\n  autoLink: require('./tokenize/auto-link'),\n  url: require('./tokenize/url'),\n  html: require('./tokenize/html-inline'),\n  link: require('./tokenize/link'),\n  reference: require('./tokenize/reference'),\n  strong: require('./tokenize/strong'),\n  emphasis: require('./tokenize/emphasis'),\n  deletion: require('./tokenize/delete'),\n  code: require('./tokenize/code-inline'),\n  break: require('./tokenize/break'),\n  text: require('./tokenize/text')\n};\n\n/* Expose precedence. */\nproto.blockMethods = keys(proto.blockTokenizers);\nproto.inlineMethods = keys(proto.inlineTokenizers);\n\n/* Tokenizers. */\nproto.tokenizeBlock = tokenizer('block');\nproto.tokenizeInline = tokenizer('inline');\nproto.tokenizeFactory = tokenizer;\n\n/* Get all keys in `value`. */\nfunction keys(value) {\n  var result = [];\n  var key;\n\n  for (key in value) {\n    result.push(key);\n  }\n\n  return result;\n}\n","'use strict';\n\nvar xtend = require('xtend');\nvar escapes = require('markdown-escapes');\nvar defaults = require('./defaults');\n\nmodule.exports = setOptions;\n\nfunction setOptions(options) {\n  var self = this;\n  var current = self.options;\n  var key;\n  var value;\n\n  if (options == null) {\n    options = {};\n  } else if (typeof options === 'object') {\n    options = xtend(options);\n  } else {\n    throw new Error(\n      'Invalid value `' + options + '` ' +\n      'for setting `options`'\n    );\n  }\n\n  for (key in defaults) {\n    value = options[key];\n\n    if (value == null) {\n      value = current[key];\n    }\n\n    if (\n      (key !== 'blocks' && typeof value !== 'boolean') ||\n      (key === 'blocks' && typeof value !== 'object')\n    ) {\n      throw new Error('Invalid value `' + value + '` for setting `options.' + key + '`');\n    }\n\n    options[key] = value;\n  }\n\n  self.options = options;\n  self.escape = escapes(options);\n\n  return self;\n}\n","'use strict';\n\nvar whitespace = require('is-whitespace-character');\nvar decode = require('parse-entities');\nvar locate = require('../locate/tag');\n\nmodule.exports = autoLink;\nautoLink.locator = locate;\nautoLink.notInLink = true;\n\nvar C_LT = '<';\nvar C_GT = '>';\nvar C_AT_SIGN = '@';\nvar C_SLASH = '/';\nvar MAILTO = 'mailto:';\nvar MAILTO_LENGTH = MAILTO.length;\n\n/* Tokenise a link. */\nfunction autoLink(eat, value, silent) {\n  var self;\n  var subvalue;\n  var length;\n  var index;\n  var queue;\n  var character;\n  var hasAtCharacter;\n  var link;\n  var now;\n  var content;\n  var tokenizers;\n  var exit;\n\n  if (value.charAt(0) !== C_LT) {\n    return;\n  }\n\n  self = this;\n  subvalue = '';\n  length = value.length;\n  index = 0;\n  queue = '';\n  hasAtCharacter = false;\n  link = '';\n\n  index++;\n  subvalue = C_LT;\n\n  while (index < length) {\n    character = value.charAt(index);\n\n    if (\n      whitespace(character) ||\n      character === C_GT ||\n      character === C_AT_SIGN ||\n      (character === ':' && value.charAt(index + 1) === C_SLASH)\n    ) {\n      break;\n    }\n\n    queue += character;\n    index++;\n  }\n\n  if (!queue) {\n    return;\n  }\n\n  link += queue;\n  queue = '';\n\n  character = value.charAt(index);\n  link += character;\n  index++;\n\n  if (character === C_AT_SIGN) {\n    hasAtCharacter = true;\n  } else {\n    if (\n      character !== ':' ||\n      value.charAt(index + 1) !== C_SLASH\n    ) {\n      return;\n    }\n\n    link += C_SLASH;\n    index++;\n  }\n\n  while (index < length) {\n    character = value.charAt(index);\n\n    if (whitespace(character) || character === C_GT) {\n      break;\n    }\n\n    queue += character;\n    index++;\n  }\n\n  character = value.charAt(index);\n\n  if (!queue || character !== C_GT) {\n    return;\n  }\n\n  /* istanbul ignore if - never used (yet) */\n  if (silent) {\n    return true;\n  }\n\n  link += queue;\n  content = link;\n  subvalue += link + character;\n  now = eat.now();\n  now.column++;\n  now.offset++;\n\n  if (hasAtCharacter) {\n    if (link.slice(0, MAILTO_LENGTH).toLowerCase() === MAILTO) {\n      content = content.substr(MAILTO_LENGTH);\n      now.column += MAILTO_LENGTH;\n      now.offset += MAILTO_LENGTH;\n    } else {\n      link = MAILTO + link;\n    }\n  }\n\n  /* Temporarily remove all tokenizers except text in autolinks. */\n  tokenizers = self.inlineTokenizers;\n  self.inlineTokenizers = {text: tokenizers.text};\n\n  exit = self.enterLink();\n\n  content = self.tokenizeInline(content, now);\n\n  self.inlineTokenizers = tokenizers;\n  exit();\n\n  return eat(subvalue)({\n    type: 'link',\n    title: null,\n    url: decode(link, {nonTerminated: false}),\n    children: content\n  });\n}\n","'use strict';\n\nvar trim = require('trim');\nvar interrupt = require('../util/interrupt');\n\nmodule.exports = blockquote;\n\nvar C_NEWLINE = '\\n';\nvar C_TAB = '\\t';\nvar C_SPACE = ' ';\nvar C_GT = '>';\n\n/* Tokenise a blockquote. */\nfunction blockquote(eat, value, silent) {\n  var self = this;\n  var offsets = self.offset;\n  var tokenizers = self.blockTokenizers;\n  var interruptors = self.interruptBlockquote;\n  var now = eat.now();\n  var currentLine = now.line;\n  var length = value.length;\n  var values = [];\n  var contents = [];\n  var indents = [];\n  var add;\n  var index = 0;\n  var character;\n  var rest;\n  var nextIndex;\n  var content;\n  var line;\n  var startIndex;\n  var prefixed;\n  var exit;\n\n  while (index < length) {\n    character = value.charAt(index);\n\n    if (character !== C_SPACE && character !== C_TAB) {\n      break;\n    }\n\n    index++;\n  }\n\n  if (value.charAt(index) !== C_GT) {\n    return;\n  }\n\n  if (silent) {\n    return true;\n  }\n\n  index = 0;\n\n  while (index < length) {\n    nextIndex = value.indexOf(C_NEWLINE, index);\n    startIndex = index;\n    prefixed = false;\n\n    if (nextIndex === -1) {\n      nextIndex = length;\n    }\n\n    while (index < length) {\n      character = value.charAt(index);\n\n      if (character !== C_SPACE && character !== C_TAB) {\n        break;\n      }\n\n      index++;\n    }\n\n    if (value.charAt(index) === C_GT) {\n      index++;\n      prefixed = true;\n\n      if (value.charAt(index) === C_SPACE) {\n        index++;\n      }\n    } else {\n      index = startIndex;\n    }\n\n    content = value.slice(index, nextIndex);\n\n    if (!prefixed && !trim(content)) {\n      index = startIndex;\n      break;\n    }\n\n    if (!prefixed) {\n      rest = value.slice(index);\n\n      /* Check if the following code contains a possible\n       * block. */\n      if (interrupt(interruptors, tokenizers, self, [eat, rest, true])) {\n        break;\n      }\n    }\n\n    line = startIndex === index ? content : value.slice(startIndex, nextIndex);\n\n    indents.push(index - startIndex);\n    values.push(line);\n    contents.push(content);\n\n    index = nextIndex + 1;\n  }\n\n  index = -1;\n  length = indents.length;\n  add = eat(values.join(C_NEWLINE));\n\n  while (++index < length) {\n    offsets[currentLine] = (offsets[currentLine] || 0) + indents[index];\n    currentLine++;\n  }\n\n  exit = self.enterBlock();\n  contents = self.tokenizeBlock(contents.join(C_NEWLINE), now);\n  exit();\n\n  return add({\n    type: 'blockquote',\n    children: contents\n  });\n}\n","'use strict';\n\nvar locate = require('../locate/break');\n\nmodule.exports = hardBreak;\nhardBreak.locator = locate;\n\nvar MIN_BREAK_LENGTH = 2;\n\nfunction hardBreak(eat, value, silent) {\n  var length = value.length;\n  var index = -1;\n  var queue = '';\n  var character;\n\n  while (++index < length) {\n    character = value.charAt(index);\n\n    if (character === '\\n') {\n      if (index < MIN_BREAK_LENGTH) {\n        return;\n      }\n\n      /* istanbul ignore if - never used (yet) */\n      if (silent) {\n        return true;\n      }\n\n      queue += character;\n\n      return eat(queue)({type: 'break'});\n    }\n\n    if (character !== ' ') {\n      return;\n    }\n\n    queue += character;\n  }\n}\n","'use strict';\n\nvar trim = require('trim-trailing-lines');\n\nmodule.exports = fencedCode;\n\nvar C_NEWLINE = '\\n';\nvar C_TAB = '\\t';\nvar C_SPACE = ' ';\nvar C_TILDE = '~';\nvar C_TICK = '`';\n\nvar MIN_FENCE_COUNT = 3;\nvar CODE_INDENT_COUNT = 4;\n\nfunction fencedCode(eat, value, silent) {\n  var self = this;\n  var settings = self.options;\n  var length = value.length + 1;\n  var index = 0;\n  var subvalue = '';\n  var fenceCount;\n  var marker;\n  var character;\n  var flag;\n  var queue;\n  var content;\n  var exdentedContent;\n  var closing;\n  var exdentedClosing;\n  var indent;\n  var now;\n\n  if (!settings.gfm) {\n    return;\n  }\n\n  /* Eat initial spacing. */\n  while (index < length) {\n    character = value.charAt(index);\n\n    if (character !== C_SPACE && character !== C_TAB) {\n      break;\n    }\n\n    subvalue += character;\n    index++;\n  }\n\n  indent = index;\n\n  /* Eat the fence. */\n  character = value.charAt(index);\n\n  if (character !== C_TILDE && character !== C_TICK) {\n    return;\n  }\n\n  index++;\n  marker = character;\n  fenceCount = 1;\n  subvalue += character;\n\n  while (index < length) {\n    character = value.charAt(index);\n\n    if (character !== marker) {\n      break;\n    }\n\n    subvalue += character;\n    fenceCount++;\n    index++;\n  }\n\n  if (fenceCount < MIN_FENCE_COUNT) {\n    return;\n  }\n\n  /* Eat spacing before flag. */\n  while (index < length) {\n    character = value.charAt(index);\n\n    if (character !== C_SPACE && character !== C_TAB) {\n      break;\n    }\n\n    subvalue += character;\n    index++;\n  }\n\n  /* Eat flag. */\n  flag = '';\n  queue = '';\n\n  while (index < length) {\n    character = value.charAt(index);\n\n    if (\n      character === C_NEWLINE ||\n      character === C_TILDE ||\n      character === C_TICK\n    ) {\n      break;\n    }\n\n    if (character === C_SPACE || character === C_TAB) {\n      queue += character;\n    } else {\n      flag += queue + character;\n      queue = '';\n    }\n\n    index++;\n  }\n\n  character = value.charAt(index);\n\n  if (character && character !== C_NEWLINE) {\n    return;\n  }\n\n  if (silent) {\n    return true;\n  }\n\n  now = eat.now();\n  now.column += subvalue.length;\n  now.offset += subvalue.length;\n\n  subvalue += flag;\n  flag = self.decode.raw(self.unescape(flag), now);\n\n  if (queue) {\n    subvalue += queue;\n  }\n\n  queue = '';\n  closing = '';\n  exdentedClosing = '';\n  content = '';\n  exdentedContent = '';\n\n  /* Eat content. */\n  while (index < length) {\n    character = value.charAt(index);\n    content += closing;\n    exdentedContent += exdentedClosing;\n    closing = '';\n    exdentedClosing = '';\n\n    if (character !== C_NEWLINE) {\n      content += character;\n      exdentedClosing += character;\n      index++;\n      continue;\n    }\n\n    /* Add the newline to `subvalue` if its the first\n     * character.  Otherwise, add it to the `closing`\n     * queue. */\n    if (content) {\n      closing += character;\n      exdentedClosing += character;\n    } else {\n      subvalue += character;\n    }\n\n    queue = '';\n    index++;\n\n    while (index < length) {\n      character = value.charAt(index);\n\n      if (character !== C_SPACE) {\n        break;\n      }\n\n      queue += character;\n      index++;\n    }\n\n    closing += queue;\n    exdentedClosing += queue.slice(indent);\n\n    if (queue.length >= CODE_INDENT_COUNT) {\n      continue;\n    }\n\n    queue = '';\n\n    while (index < length) {\n      character = value.charAt(index);\n\n      if (character !== marker) {\n        break;\n      }\n\n      queue += character;\n      index++;\n    }\n\n    closing += queue;\n    exdentedClosing += queue;\n\n    if (queue.length < fenceCount) {\n      continue;\n    }\n\n    queue = '';\n\n    while (index < length) {\n      character = value.charAt(index);\n\n      if (character !== C_SPACE && character !== C_TAB) {\n        break;\n      }\n\n      closing += character;\n      exdentedClosing += character;\n      index++;\n    }\n\n    if (!character || character === C_NEWLINE) {\n      break;\n    }\n  }\n\n  subvalue += content + closing;\n\n  return eat(subvalue)({\n    type: 'code',\n    lang: flag || null,\n    value: trim(exdentedContent)\n  });\n}\n","'use strict';\n\nvar repeat = require('repeat-string');\nvar trim = require('trim-trailing-lines');\n\nmodule.exports = indentedCode;\n\nvar C_NEWLINE = '\\n';\nvar C_TAB = '\\t';\nvar C_SPACE = ' ';\n\nvar CODE_INDENT_COUNT = 4;\nvar CODE_INDENT = repeat(C_SPACE, CODE_INDENT_COUNT);\n\n/* Tokenise indented code. */\nfunction indentedCode(eat, value, silent) {\n  var index = -1;\n  var length = value.length;\n  var subvalue = '';\n  var content = '';\n  var subvalueQueue = '';\n  var contentQueue = '';\n  var character;\n  var blankQueue;\n  var indent;\n\n  while (++index < length) {\n    character = value.charAt(index);\n\n    if (indent) {\n      indent = false;\n\n      subvalue += subvalueQueue;\n      content += contentQueue;\n      subvalueQueue = '';\n      contentQueue = '';\n\n      if (character === C_NEWLINE) {\n        subvalueQueue = character;\n        contentQueue = character;\n      } else {\n        subvalue += character;\n        content += character;\n\n        while (++index < length) {\n          character = value.charAt(index);\n\n          if (!character || character === C_NEWLINE) {\n            contentQueue = character;\n            subvalueQueue = character;\n            break;\n          }\n\n          subvalue += character;\n          content += character;\n        }\n      }\n    } else if (\n      character === C_SPACE &&\n      value.charAt(index + 1) === character &&\n      value.charAt(index + 2) === character &&\n      value.charAt(index + 3) === character\n    ) {\n      subvalueQueue += CODE_INDENT;\n      index += 3;\n      indent = true;\n    } else if (character === C_TAB) {\n      subvalueQueue += character;\n      indent = true;\n    } else {\n      blankQueue = '';\n\n      while (character === C_TAB || character === C_SPACE) {\n        blankQueue += character;\n        character = value.charAt(++index);\n      }\n\n      if (character !== C_NEWLINE) {\n        break;\n      }\n\n      subvalueQueue += blankQueue + character;\n      contentQueue += character;\n    }\n  }\n\n  if (content) {\n    if (silent) {\n      return true;\n    }\n\n    return eat(subvalue)({\n      type: 'code',\n      lang: null,\n      value: trim(content)\n    });\n  }\n}\n","'use strict';\n\nvar whitespace = require('is-whitespace-character');\nvar locate = require('../locate/code-inline');\n\nmodule.exports = inlineCode;\ninlineCode.locator = locate;\n\nvar C_TICK = '`';\n\n/* Tokenise inline code. */\nfunction inlineCode(eat, value, silent) {\n  var length = value.length;\n  var index = 0;\n  var queue = '';\n  var tickQueue = '';\n  var contentQueue;\n  var subqueue;\n  var count;\n  var openingCount;\n  var subvalue;\n  var character;\n  var found;\n  var next;\n\n  while (index < length) {\n    if (value.charAt(index) !== C_TICK) {\n      break;\n    }\n\n    queue += C_TICK;\n    index++;\n  }\n\n  if (!queue) {\n    return;\n  }\n\n  subvalue = queue;\n  openingCount = index;\n  queue = '';\n  next = value.charAt(index);\n  count = 0;\n\n  while (index < length) {\n    character = next;\n    next = value.charAt(index + 1);\n\n    if (character === C_TICK) {\n      count++;\n      tickQueue += character;\n    } else {\n      count = 0;\n      queue += character;\n    }\n\n    if (count && next !== C_TICK) {\n      if (count === openingCount) {\n        subvalue += queue + tickQueue;\n        found = true;\n        break;\n      }\n\n      queue += tickQueue;\n      tickQueue = '';\n    }\n\n    index++;\n  }\n\n  if (!found) {\n    if (openingCount % 2 !== 0) {\n      return;\n    }\n\n    queue = '';\n  }\n\n  /* istanbul ignore if - never used (yet) */\n  if (silent) {\n    return true;\n  }\n\n  contentQueue = '';\n  subqueue = '';\n  length = queue.length;\n  index = -1;\n\n  while (++index < length) {\n    character = queue.charAt(index);\n\n    if (whitespace(character)) {\n      subqueue += character;\n      continue;\n    }\n\n    if (subqueue) {\n      if (contentQueue) {\n        contentQueue += subqueue;\n      }\n\n      subqueue = '';\n    }\n\n    contentQueue += character;\n  }\n\n  return eat(subvalue)({\n    type: 'inlineCode',\n    value: contentQueue\n  });\n}\n","'use strict';\n\nvar whitespace = require('is-whitespace-character');\nvar normalize = require('../util/normalize');\n\nmodule.exports = definition;\ndefinition.notInList = true;\ndefinition.notInBlock = true;\n\nvar C_DOUBLE_QUOTE = '\"';\nvar C_SINGLE_QUOTE = '\\'';\nvar C_BACKSLASH = '\\\\';\nvar C_NEWLINE = '\\n';\nvar C_TAB = '\\t';\nvar C_SPACE = ' ';\nvar C_BRACKET_OPEN = '[';\nvar C_BRACKET_CLOSE = ']';\nvar C_PAREN_OPEN = '(';\nvar C_PAREN_CLOSE = ')';\nvar C_COLON = ':';\nvar C_LT = '<';\nvar C_GT = '>';\n\nfunction definition(eat, value, silent) {\n  var self = this;\n  var commonmark = self.options.commonmark;\n  var index = 0;\n  var length = value.length;\n  var subvalue = '';\n  var beforeURL;\n  var beforeTitle;\n  var queue;\n  var character;\n  var test;\n  var identifier;\n  var url;\n  var title;\n\n  while (index < length) {\n    character = value.charAt(index);\n\n    if (character !== C_SPACE && character !== C_TAB) {\n      break;\n    }\n\n    subvalue += character;\n    index++;\n  }\n\n  character = value.charAt(index);\n\n  if (character !== C_BRACKET_OPEN) {\n    return;\n  }\n\n  index++;\n  subvalue += character;\n  queue = '';\n\n  while (index < length) {\n    character = value.charAt(index);\n\n    if (character === C_BRACKET_CLOSE) {\n      break;\n    } else if (character === C_BACKSLASH) {\n      queue += character;\n      index++;\n      character = value.charAt(index);\n    }\n\n    queue += character;\n    index++;\n  }\n\n  if (\n    !queue ||\n    value.charAt(index) !== C_BRACKET_CLOSE ||\n    value.charAt(index + 1) !== C_COLON\n  ) {\n    return;\n  }\n\n  identifier = queue;\n  subvalue += queue + C_BRACKET_CLOSE + C_COLON;\n  index = subvalue.length;\n  queue = '';\n\n  while (index < length) {\n    character = value.charAt(index);\n\n    if (\n      character !== C_TAB &&\n      character !== C_SPACE &&\n      character !== C_NEWLINE\n    ) {\n      break;\n    }\n\n    subvalue += character;\n    index++;\n  }\n\n  character = value.charAt(index);\n  queue = '';\n  beforeURL = subvalue;\n\n  if (character === C_LT) {\n    index++;\n\n    while (index < length) {\n      character = value.charAt(index);\n\n      if (!isEnclosedURLCharacter(character)) {\n        break;\n      }\n\n      queue += character;\n      index++;\n    }\n\n    character = value.charAt(index);\n\n    if (character === isEnclosedURLCharacter.delimiter) {\n      subvalue += C_LT + queue + character;\n      index++;\n    } else {\n      if (commonmark) {\n        return;\n      }\n\n      index -= queue.length + 1;\n      queue = '';\n    }\n  }\n\n  if (!queue) {\n    while (index < length) {\n      character = value.charAt(index);\n\n      if (!isUnclosedURLCharacter(character)) {\n        break;\n      }\n\n      queue += character;\n      index++;\n    }\n\n    subvalue += queue;\n  }\n\n  if (!queue) {\n    return;\n  }\n\n  url = queue;\n  queue = '';\n\n  while (index < length) {\n    character = value.charAt(index);\n\n    if (\n      character !== C_TAB &&\n      character !== C_SPACE &&\n      character !== C_NEWLINE\n    ) {\n      break;\n    }\n\n    queue += character;\n    index++;\n  }\n\n  character = value.charAt(index);\n  test = null;\n\n  if (character === C_DOUBLE_QUOTE) {\n    test = C_DOUBLE_QUOTE;\n  } else if (character === C_SINGLE_QUOTE) {\n    test = C_SINGLE_QUOTE;\n  } else if (character === C_PAREN_OPEN) {\n    test = C_PAREN_CLOSE;\n  }\n\n  if (!test) {\n    queue = '';\n    index = subvalue.length;\n  } else if (queue) {\n    subvalue += queue + character;\n    index = subvalue.length;\n    queue = '';\n\n    while (index < length) {\n      character = value.charAt(index);\n\n      if (character === test) {\n        break;\n      }\n\n      if (character === C_NEWLINE) {\n        index++;\n        character = value.charAt(index);\n\n        if (character === C_NEWLINE || character === test) {\n          return;\n        }\n\n        queue += C_NEWLINE;\n      }\n\n      queue += character;\n      index++;\n    }\n\n    character = value.charAt(index);\n\n    if (character !== test) {\n      return;\n    }\n\n    beforeTitle = subvalue;\n    subvalue += queue + character;\n    index++;\n    title = queue;\n    queue = '';\n  } else {\n    return;\n  }\n\n  while (index < length) {\n    character = value.charAt(index);\n\n    if (character !== C_TAB && character !== C_SPACE) {\n      break;\n    }\n\n    subvalue += character;\n    index++;\n  }\n\n  character = value.charAt(index);\n\n  if (!character || character === C_NEWLINE) {\n    if (silent) {\n      return true;\n    }\n\n    beforeURL = eat(beforeURL).test().end;\n    url = self.decode.raw(self.unescape(url), beforeURL, {nonTerminated: false});\n\n    if (title) {\n      beforeTitle = eat(beforeTitle).test().end;\n      title = self.decode.raw(self.unescape(title), beforeTitle);\n    }\n\n    return eat(subvalue)({\n      type: 'definition',\n      identifier: normalize(identifier),\n      title: title || null,\n      url: url\n    });\n  }\n}\n\n/* Check if `character` can be inside an enclosed URI. */\nfunction isEnclosedURLCharacter(character) {\n  return character !== C_GT &&\n    character !== C_BRACKET_OPEN &&\n    character !== C_BRACKET_CLOSE;\n}\n\nisEnclosedURLCharacter.delimiter = C_GT;\n\n/* Check if `character` can be inside an unclosed URI. */\nfunction isUnclosedURLCharacter(character) {\n  return character !== C_BRACKET_OPEN &&\n    character !== C_BRACKET_CLOSE &&\n    !whitespace(character);\n}\n","'use strict';\n\nvar whitespace = require('is-whitespace-character');\nvar locate = require('../locate/delete');\n\nmodule.exports = strikethrough;\nstrikethrough.locator = locate;\n\nvar C_TILDE = '~';\nvar DOUBLE = '~~';\n\nfunction strikethrough(eat, value, silent) {\n  var self = this;\n  var character = '';\n  var previous = '';\n  var preceding = '';\n  var subvalue = '';\n  var index;\n  var length;\n  var now;\n\n  if (\n    !self.options.gfm ||\n    value.charAt(0) !== C_TILDE ||\n    value.charAt(1) !== C_TILDE ||\n    whitespace(value.charAt(2))\n  ) {\n    return;\n  }\n\n  index = 1;\n  length = value.length;\n  now = eat.now();\n  now.column += 2;\n  now.offset += 2;\n\n  while (++index < length) {\n    character = value.charAt(index);\n\n    if (\n      character === C_TILDE &&\n      previous === C_TILDE &&\n      (!preceding || !whitespace(preceding))\n    ) {\n      /* istanbul ignore if - never used (yet) */\n      if (silent) {\n        return true;\n      }\n\n      return eat(DOUBLE + subvalue + DOUBLE)({\n        type: 'delete',\n        children: self.tokenizeInline(subvalue, now)\n      });\n    }\n\n    subvalue += previous;\n    preceding = previous;\n    previous = character;\n  }\n}\n","'use strict';\n\nvar trim = require('trim');\nvar word = require('is-word-character');\nvar whitespace = require('is-whitespace-character');\nvar locate = require('../locate/emphasis');\n\nmodule.exports = emphasis;\nemphasis.locator = locate;\n\nvar C_ASTERISK = '*';\nvar C_UNDERSCORE = '_';\n\nfunction emphasis(eat, value, silent) {\n  var self = this;\n  var index = 0;\n  var character = value.charAt(index);\n  var now;\n  var pedantic;\n  var marker;\n  var queue;\n  var subvalue;\n  var length;\n  var prev;\n\n  if (character !== C_ASTERISK && character !== C_UNDERSCORE) {\n    return;\n  }\n\n  pedantic = self.options.pedantic;\n  subvalue = character;\n  marker = character;\n  length = value.length;\n  index++;\n  queue = '';\n  character = '';\n\n  if (pedantic && whitespace(value.charAt(index))) {\n    return;\n  }\n\n  while (index < length) {\n    prev = character;\n    character = value.charAt(index);\n\n    if (character === marker && (!pedantic || !whitespace(prev))) {\n      character = value.charAt(++index);\n\n      if (character !== marker) {\n        if (!trim(queue) || prev === marker) {\n          return;\n        }\n\n        if (!pedantic && marker === C_UNDERSCORE && word(character)) {\n          queue += marker;\n          continue;\n        }\n\n        /* istanbul ignore if - never used (yet) */\n        if (silent) {\n          return true;\n        }\n\n        now = eat.now();\n        now.column++;\n        now.offset++;\n\n        return eat(subvalue + queue + marker)({\n          type: 'emphasis',\n          children: self.tokenizeInline(queue, now)\n        });\n      }\n\n      queue += marker;\n    }\n\n    if (!pedantic && character === '\\\\') {\n      queue += character;\n      character = value.charAt(++index);\n    }\n\n    queue += character;\n    index++;\n  }\n}\n","'use strict';\n\nvar locate = require('../locate/escape');\n\nmodule.exports = escape;\nescape.locator = locate;\n\nfunction escape(eat, value, silent) {\n  var self = this;\n  var character;\n  var node;\n\n  if (value.charAt(0) === '\\\\') {\n    character = value.charAt(1);\n\n    if (self.escape.indexOf(character) !== -1) {\n      /* istanbul ignore if - never used (yet) */\n      if (silent) {\n        return true;\n      }\n\n      if (character === '\\n') {\n        node = {type: 'break'};\n      } else {\n        node = {\n          type: 'text',\n          value: character\n        };\n      }\n\n      return eat('\\\\' + character)(node);\n    }\n  }\n}\n","'use strict';\n\nvar whitespace = require('is-whitespace-character');\nvar normalize = require('../util/normalize');\n\nmodule.exports = footnoteDefinition;\nfootnoteDefinition.notInList = true;\nfootnoteDefinition.notInBlock = true;\n\nvar C_BACKSLASH = '\\\\';\nvar C_NEWLINE = '\\n';\nvar C_TAB = '\\t';\nvar C_SPACE = ' ';\nvar C_BRACKET_OPEN = '[';\nvar C_BRACKET_CLOSE = ']';\nvar C_CARET = '^';\nvar C_COLON = ':';\n\nvar EXPRESSION_INITIAL_TAB = /^( {4}|\\t)?/gm;\n\nfunction footnoteDefinition(eat, value, silent) {\n  var self = this;\n  var offsets = self.offset;\n  var index;\n  var length;\n  var subvalue;\n  var now;\n  var currentLine;\n  var content;\n  var queue;\n  var subqueue;\n  var character;\n  var identifier;\n  var add;\n  var exit;\n\n  if (!self.options.footnotes) {\n    return;\n  }\n\n  index = 0;\n  length = value.length;\n  subvalue = '';\n  now = eat.now();\n  currentLine = now.line;\n\n  while (index < length) {\n    character = value.charAt(index);\n\n    if (!whitespace(character)) {\n      break;\n    }\n\n    subvalue += character;\n    index++;\n  }\n\n  if (\n    value.charAt(index) !== C_BRACKET_OPEN ||\n    value.charAt(index + 1) !== C_CARET\n  ) {\n    return;\n  }\n\n  subvalue += C_BRACKET_OPEN + C_CARET;\n  index = subvalue.length;\n  queue = '';\n\n  while (index < length) {\n    character = value.charAt(index);\n\n    if (character === C_BRACKET_CLOSE) {\n      break;\n    } else if (character === C_BACKSLASH) {\n      queue += character;\n      index++;\n      character = value.charAt(index);\n    }\n\n    queue += character;\n    index++;\n  }\n\n  if (\n    !queue ||\n    value.charAt(index) !== C_BRACKET_CLOSE ||\n    value.charAt(index + 1) !== C_COLON\n  ) {\n    return;\n  }\n\n  if (silent) {\n    return true;\n  }\n\n  identifier = normalize(queue);\n  subvalue += queue + C_BRACKET_CLOSE + C_COLON;\n  index = subvalue.length;\n\n  while (index < length) {\n    character = value.charAt(index);\n\n    if (character !== C_TAB && character !== C_SPACE) {\n      break;\n    }\n\n    subvalue += character;\n    index++;\n  }\n\n  now.column += subvalue.length;\n  now.offset += subvalue.length;\n  queue = '';\n  content = '';\n  subqueue = '';\n\n  while (index < length) {\n    character = value.charAt(index);\n\n    if (character === C_NEWLINE) {\n      subqueue = character;\n      index++;\n\n      while (index < length) {\n        character = value.charAt(index);\n\n        if (character !== C_NEWLINE) {\n          break;\n        }\n\n        subqueue += character;\n        index++;\n      }\n\n      queue += subqueue;\n      subqueue = '';\n\n      while (index < length) {\n        character = value.charAt(index);\n\n        if (character !== C_SPACE) {\n          break;\n        }\n\n        subqueue += character;\n        index++;\n      }\n\n      if (subqueue.length === 0) {\n        break;\n      }\n\n      queue += subqueue;\n    }\n\n    if (queue) {\n      content += queue;\n      queue = '';\n    }\n\n    content += character;\n    index++;\n  }\n\n  subvalue += content;\n\n  content = content.replace(EXPRESSION_INITIAL_TAB, function (line) {\n    offsets[currentLine] = (offsets[currentLine] || 0) + line.length;\n    currentLine++;\n\n    return '';\n  });\n\n  add = eat(subvalue);\n\n  exit = self.enterBlock();\n  content = self.tokenizeBlock(content, now);\n  exit();\n\n  return add({\n    type: 'footnoteDefinition',\n    identifier: identifier,\n    children: content\n  });\n}\n","'use strict';\n\nmodule.exports = atxHeading;\n\nvar C_NEWLINE = '\\n';\nvar C_TAB = '\\t';\nvar C_SPACE = ' ';\nvar C_HASH = '#';\n\nvar MAX_ATX_COUNT = 6;\n\nfunction atxHeading(eat, value, silent) {\n  var self = this;\n  var settings = self.options;\n  var length = value.length + 1;\n  var index = -1;\n  var now = eat.now();\n  var subvalue = '';\n  var content = '';\n  var character;\n  var queue;\n  var depth;\n\n  /* Eat initial spacing. */\n  while (++index < length) {\n    character = value.charAt(index);\n\n    if (character !== C_SPACE && character !== C_TAB) {\n      index--;\n      break;\n    }\n\n    subvalue += character;\n  }\n\n  /* Eat hashes. */\n  depth = 0;\n\n  while (++index <= length) {\n    character = value.charAt(index);\n\n    if (character !== C_HASH) {\n      index--;\n      break;\n    }\n\n    subvalue += character;\n    depth++;\n  }\n\n  if (depth > MAX_ATX_COUNT) {\n    return;\n  }\n\n  if (\n    !depth ||\n    (!settings.pedantic && value.charAt(index + 1) === C_HASH)\n  ) {\n    return;\n  }\n\n  length = value.length + 1;\n\n  /* Eat intermediate white-space. */\n  queue = '';\n\n  while (++index < length) {\n    character = value.charAt(index);\n\n    if (character !== C_SPACE && character !== C_TAB) {\n      index--;\n      break;\n    }\n\n    queue += character;\n  }\n\n  /* Exit when not in pedantic mode without spacing. */\n  if (\n    !settings.pedantic &&\n    queue.length === 0 &&\n    character &&\n    character !== C_NEWLINE\n  ) {\n    return;\n  }\n\n  if (silent) {\n    return true;\n  }\n\n  /* Eat content. */\n  subvalue += queue;\n  queue = '';\n  content = '';\n\n  while (++index < length) {\n    character = value.charAt(index);\n\n    if (!character || character === C_NEWLINE) {\n      break;\n    }\n\n    if (\n      character !== C_SPACE &&\n      character !== C_TAB &&\n      character !== C_HASH\n    ) {\n      content += queue + character;\n      queue = '';\n      continue;\n    }\n\n    while (character === C_SPACE || character === C_TAB) {\n      queue += character;\n      character = value.charAt(++index);\n    }\n\n    while (character === C_HASH) {\n      queue += character;\n      character = value.charAt(++index);\n    }\n\n    while (character === C_SPACE || character === C_TAB) {\n      queue += character;\n      character = value.charAt(++index);\n    }\n\n    index--;\n  }\n\n  now.column += subvalue.length;\n  now.offset += subvalue.length;\n  subvalue += content + queue;\n\n  return eat(subvalue)({\n    type: 'heading',\n    depth: depth,\n    children: self.tokenizeInline(content, now)\n  });\n}\n","'use strict';\n\nmodule.exports = setextHeading;\n\nvar C_NEWLINE = '\\n';\nvar C_TAB = '\\t';\nvar C_SPACE = ' ';\nvar C_EQUALS = '=';\nvar C_DASH = '-';\n\nvar MAX_HEADING_INDENT = 3;\n\n/* Map of characters which can be used to mark setext\n * headers, mapping to their corresponding depth. */\nvar SETEXT_MARKERS = {};\n\nSETEXT_MARKERS[C_EQUALS] = 1;\nSETEXT_MARKERS[C_DASH] = 2;\n\nfunction setextHeading(eat, value, silent) {\n  var self = this;\n  var now = eat.now();\n  var length = value.length;\n  var index = -1;\n  var subvalue = '';\n  var content;\n  var queue;\n  var character;\n  var marker;\n  var depth;\n\n  /* Eat initial indentation. */\n  while (++index < length) {\n    character = value.charAt(index);\n\n    if (character !== C_SPACE || index >= MAX_HEADING_INDENT) {\n      index--;\n      break;\n    }\n\n    subvalue += character;\n  }\n\n  /* Eat content. */\n  content = '';\n  queue = '';\n\n  while (++index < length) {\n    character = value.charAt(index);\n\n    if (character === C_NEWLINE) {\n      index--;\n      break;\n    }\n\n    if (character === C_SPACE || character === C_TAB) {\n      queue += character;\n    } else {\n      content += queue + character;\n      queue = '';\n    }\n  }\n\n  now.column += subvalue.length;\n  now.offset += subvalue.length;\n  subvalue += content + queue;\n\n  /* Ensure the content is followed by a newline and a\n   * valid marker. */\n  character = value.charAt(++index);\n  marker = value.charAt(++index);\n\n  if (character !== C_NEWLINE || !SETEXT_MARKERS[marker]) {\n    return;\n  }\n\n  subvalue += character;\n\n  /* Eat Setext-line. */\n  queue = marker;\n  depth = SETEXT_MARKERS[marker];\n\n  while (++index < length) {\n    character = value.charAt(index);\n\n    if (character !== marker) {\n      if (character !== C_NEWLINE) {\n        return;\n      }\n\n      index--;\n      break;\n    }\n\n    queue += character;\n  }\n\n  if (silent) {\n    return true;\n  }\n\n  return eat(subvalue + queue)({\n    type: 'heading',\n    depth: depth,\n    children: self.tokenizeInline(content, now)\n  });\n}\n","'use strict';\n\nvar openCloseTag = require('../util/html').openCloseTag;\n\nmodule.exports = blockHTML;\n\nvar C_TAB = '\\t';\nvar C_SPACE = ' ';\nvar C_NEWLINE = '\\n';\nvar C_LT = '<';\n\nfunction blockHTML(eat, value, silent) {\n  var self = this;\n  var blocks = self.options.blocks;\n  var length = value.length;\n  var index = 0;\n  var next;\n  var line;\n  var offset;\n  var character;\n  var count;\n  var sequence;\n  var subvalue;\n\n  var sequences = [\n    [/^<(script|pre|style)(?=(\\s|>|$))/i, /<\\/(script|pre|style)>/i, true],\n    [/^<!--/, /-->/, true],\n    [/^<\\?/, /\\?>/, true],\n    [/^<![A-Za-z]/, />/, true],\n    [/^<!\\[CDATA\\[/, /\\]\\]>/, true],\n    [new RegExp('^</?(' + blocks.join('|') + ')(?=(\\\\s|/?>|$))', 'i'), /^$/, true],\n    [new RegExp(openCloseTag.source + '\\\\s*$'), /^$/, false]\n  ];\n\n  /* Eat initial spacing. */\n  while (index < length) {\n    character = value.charAt(index);\n\n    if (character !== C_TAB && character !== C_SPACE) {\n      break;\n    }\n\n    index++;\n  }\n\n  if (value.charAt(index) !== C_LT) {\n    return;\n  }\n\n  next = value.indexOf(C_NEWLINE, index + 1);\n  next = next === -1 ? length : next;\n  line = value.slice(index, next);\n  offset = -1;\n  count = sequences.length;\n\n  while (++offset < count) {\n    if (sequences[offset][0].test(line)) {\n      sequence = sequences[offset];\n      break;\n    }\n  }\n\n  if (!sequence) {\n    return;\n  }\n\n  if (silent) {\n    return sequence[2];\n  }\n\n  index = next;\n\n  if (!sequence[1].test(line)) {\n    while (index < length) {\n      next = value.indexOf(C_NEWLINE, index + 1);\n      next = next === -1 ? length : next;\n      line = value.slice(index + 1, next);\n\n      if (sequence[1].test(line)) {\n        if (line) {\n          index = next;\n        }\n\n        break;\n      }\n\n      index = next;\n    }\n  }\n\n  subvalue = value.slice(0, index);\n\n  return eat(subvalue)({type: 'html', value: subvalue});\n}\n","'use strict';\n\nvar alphabetical = require('is-alphabetical');\nvar locate = require('../locate/tag');\nvar tag = require('../util/html').tag;\n\nmodule.exports = inlineHTML;\ninlineHTML.locator = locate;\n\nvar EXPRESSION_HTML_LINK_OPEN = /^<a /i;\nvar EXPRESSION_HTML_LINK_CLOSE = /^<\\/a>/i;\n\nfunction inlineHTML(eat, value, silent) {\n  var self = this;\n  var length = value.length;\n  var character;\n  var subvalue;\n\n  if (value.charAt(0) !== '<' || length < 3) {\n    return;\n  }\n\n  character = value.charAt(1);\n\n  if (\n    !alphabetical(character) &&\n    character !== '?' &&\n    character !== '!' &&\n    character !== '/'\n  ) {\n    return;\n  }\n\n  subvalue = value.match(tag);\n\n  if (!subvalue) {\n    return;\n  }\n\n  /* istanbul ignore if - not used yet. */\n  if (silent) {\n    return true;\n  }\n\n  subvalue = subvalue[0];\n\n  if (!self.inLink && EXPRESSION_HTML_LINK_OPEN.test(subvalue)) {\n    self.inLink = true;\n  } else if (self.inLink && EXPRESSION_HTML_LINK_CLOSE.test(subvalue)) {\n    self.inLink = false;\n  }\n\n  return eat(subvalue)({type: 'html', value: subvalue});\n}\n","'use strict';\n\nvar whitespace = require('is-whitespace-character');\nvar locate = require('../locate/link');\n\nmodule.exports = link;\nlink.locator = locate;\n\nvar own = {}.hasOwnProperty;\n\nvar C_BACKSLASH = '\\\\';\nvar C_BRACKET_OPEN = '[';\nvar C_BRACKET_CLOSE = ']';\nvar C_PAREN_OPEN = '(';\nvar C_PAREN_CLOSE = ')';\nvar C_LT = '<';\nvar C_GT = '>';\nvar C_TICK = '`';\nvar C_DOUBLE_QUOTE = '\"';\nvar C_SINGLE_QUOTE = '\\'';\n\n/* Map of characters, which can be used to mark link\n * and image titles. */\nvar LINK_MARKERS = {};\n\nLINK_MARKERS[C_DOUBLE_QUOTE] = C_DOUBLE_QUOTE;\nLINK_MARKERS[C_SINGLE_QUOTE] = C_SINGLE_QUOTE;\n\n/* Map of characters, which can be used to mark link\n * and image titles in commonmark-mode. */\nvar COMMONMARK_LINK_MARKERS = {};\n\nCOMMONMARK_LINK_MARKERS[C_DOUBLE_QUOTE] = C_DOUBLE_QUOTE;\nCOMMONMARK_LINK_MARKERS[C_SINGLE_QUOTE] = C_SINGLE_QUOTE;\nCOMMONMARK_LINK_MARKERS[C_PAREN_OPEN] = C_PAREN_CLOSE;\n\nfunction link(eat, value, silent) {\n  var self = this;\n  var subvalue = '';\n  var index = 0;\n  var character = value.charAt(0);\n  var pedantic = self.options.pedantic;\n  var commonmark = self.options.commonmark;\n  var gfm = self.options.gfm;\n  var closed;\n  var count;\n  var opening;\n  var beforeURL;\n  var beforeTitle;\n  var subqueue;\n  var hasMarker;\n  var markers;\n  var isImage;\n  var content;\n  var marker;\n  var length;\n  var title;\n  var depth;\n  var queue;\n  var url;\n  var now;\n  var exit;\n  var node;\n\n  /* Detect whether this is an image. */\n  if (character === '!') {\n    isImage = true;\n    subvalue = character;\n    character = value.charAt(++index);\n  }\n\n  /* Eat the opening. */\n  if (character !== C_BRACKET_OPEN) {\n    return;\n  }\n\n  /* Exit when this is a link and we’re already inside\n   * a link. */\n  if (!isImage && self.inLink) {\n    return;\n  }\n\n  subvalue += character;\n  queue = '';\n  index++;\n\n  /* Eat the content. */\n  length = value.length;\n  now = eat.now();\n  depth = 0;\n\n  now.column += index;\n  now.offset += index;\n\n  while (index < length) {\n    character = value.charAt(index);\n    subqueue = character;\n\n    if (character === C_TICK) {\n      /* Inline-code in link content. */\n      count = 1;\n\n      while (value.charAt(index + 1) === C_TICK) {\n        subqueue += character;\n        index++;\n        count++;\n      }\n\n      if (!opening) {\n        opening = count;\n      } else if (count >= opening) {\n        opening = 0;\n      }\n    } else if (character === C_BACKSLASH) {\n      /* Allow brackets to be escaped. */\n      index++;\n      subqueue += value.charAt(index);\n    /* In GFM mode, brackets in code still count.\n     * In all other modes, they don’t.  This empty\n     * block prevents the next statements are\n     * entered. */\n    } else if ((!opening || gfm) && character === C_BRACKET_OPEN) {\n      depth++;\n    } else if ((!opening || gfm) && character === C_BRACKET_CLOSE) {\n      if (depth) {\n        depth--;\n      } else {\n        /* Allow white-space between content and\n         * url in GFM mode. */\n        if (!pedantic) {\n          while (index < length) {\n            character = value.charAt(index + 1);\n\n            if (!whitespace(character)) {\n              break;\n            }\n\n            subqueue += character;\n            index++;\n          }\n        }\n\n        if (value.charAt(index + 1) !== C_PAREN_OPEN) {\n          return;\n        }\n\n        subqueue += C_PAREN_OPEN;\n        closed = true;\n        index++;\n\n        break;\n      }\n    }\n\n    queue += subqueue;\n    subqueue = '';\n    index++;\n  }\n\n  /* Eat the content closing. */\n  if (!closed) {\n    return;\n  }\n\n  content = queue;\n  subvalue += queue + subqueue;\n  index++;\n\n  /* Eat white-space. */\n  while (index < length) {\n    character = value.charAt(index);\n\n    if (!whitespace(character)) {\n      break;\n    }\n\n    subvalue += character;\n    index++;\n  }\n\n  /* Eat the URL. */\n  character = value.charAt(index);\n  markers = commonmark ? COMMONMARK_LINK_MARKERS : LINK_MARKERS;\n  queue = '';\n  beforeURL = subvalue;\n\n  if (character === C_LT) {\n    index++;\n    beforeURL += C_LT;\n\n    while (index < length) {\n      character = value.charAt(index);\n\n      if (character === C_GT) {\n        break;\n      }\n\n      if (commonmark && character === '\\n') {\n        return;\n      }\n\n      queue += character;\n      index++;\n    }\n\n    if (value.charAt(index) !== C_GT) {\n      return;\n    }\n\n    subvalue += C_LT + queue + C_GT;\n    url = queue;\n    index++;\n  } else {\n    character = null;\n    subqueue = '';\n\n    while (index < length) {\n      character = value.charAt(index);\n\n      if (subqueue && own.call(markers, character)) {\n        break;\n      }\n\n      if (whitespace(character)) {\n        if (!pedantic) {\n          break;\n        }\n\n        subqueue += character;\n      } else {\n        if (character === C_PAREN_OPEN) {\n          depth++;\n        } else if (character === C_PAREN_CLOSE) {\n          if (depth === 0) {\n            break;\n          }\n\n          depth--;\n        }\n\n        queue += subqueue;\n        subqueue = '';\n\n        if (character === C_BACKSLASH) {\n          queue += C_BACKSLASH;\n          character = value.charAt(++index);\n        }\n\n        queue += character;\n      }\n\n      index++;\n    }\n\n    subvalue += queue;\n    url = queue;\n    index = subvalue.length;\n  }\n\n  /* Eat white-space. */\n  queue = '';\n\n  while (index < length) {\n    character = value.charAt(index);\n\n    if (!whitespace(character)) {\n      break;\n    }\n\n    queue += character;\n    index++;\n  }\n\n  character = value.charAt(index);\n  subvalue += queue;\n\n  /* Eat the title. */\n  if (queue && own.call(markers, character)) {\n    index++;\n    subvalue += character;\n    queue = '';\n    marker = markers[character];\n    beforeTitle = subvalue;\n\n    /* In commonmark-mode, things are pretty easy: the\n     * marker cannot occur inside the title.\n     *\n     * Non-commonmark does, however, support nested\n     * delimiters. */\n    if (commonmark) {\n      while (index < length) {\n        character = value.charAt(index);\n\n        if (character === marker) {\n          break;\n        }\n\n        if (character === C_BACKSLASH) {\n          queue += C_BACKSLASH;\n          character = value.charAt(++index);\n        }\n\n        index++;\n        queue += character;\n      }\n\n      character = value.charAt(index);\n\n      if (character !== marker) {\n        return;\n      }\n\n      title = queue;\n      subvalue += queue + character;\n      index++;\n\n      while (index < length) {\n        character = value.charAt(index);\n\n        if (!whitespace(character)) {\n          break;\n        }\n\n        subvalue += character;\n        index++;\n      }\n    } else {\n      subqueue = '';\n\n      while (index < length) {\n        character = value.charAt(index);\n\n        if (character === marker) {\n          if (hasMarker) {\n            queue += marker + subqueue;\n            subqueue = '';\n          }\n\n          hasMarker = true;\n        } else if (!hasMarker) {\n          queue += character;\n        } else if (character === C_PAREN_CLOSE) {\n          subvalue += queue + marker + subqueue;\n          title = queue;\n          break;\n        } else if (whitespace(character)) {\n          subqueue += character;\n        } else {\n          queue += marker + subqueue + character;\n          subqueue = '';\n          hasMarker = false;\n        }\n\n        index++;\n      }\n    }\n  }\n\n  if (value.charAt(index) !== C_PAREN_CLOSE) {\n    return;\n  }\n\n  /* istanbul ignore if - never used (yet) */\n  if (silent) {\n    return true;\n  }\n\n  subvalue += C_PAREN_CLOSE;\n\n  url = self.decode.raw(self.unescape(url), eat(beforeURL).test().end, {nonTerminated: false});\n\n  if (title) {\n    beforeTitle = eat(beforeTitle).test().end;\n    title = self.decode.raw(self.unescape(title), beforeTitle);\n  }\n\n  node = {\n    type: isImage ? 'image' : 'link',\n    title: title || null,\n    url: url\n  };\n\n  if (isImage) {\n    node.alt = self.decode.raw(self.unescape(content), now) || null;\n  } else {\n    exit = self.enterLink();\n    node.children = self.tokenizeInline(content, now);\n    exit();\n  }\n\n  return eat(subvalue)(node);\n}\n","'use strict';\n\n/* eslint-disable max-params */\n\nvar trim = require('trim');\nvar repeat = require('repeat-string');\nvar decimal = require('is-decimal');\nvar getIndent = require('../util/get-indentation');\nvar removeIndent = require('../util/remove-indentation');\nvar interrupt = require('../util/interrupt');\n\nmodule.exports = list;\n\nvar C_ASTERISK = '*';\nvar C_UNDERSCORE = '_';\nvar C_PLUS = '+';\nvar C_DASH = '-';\nvar C_DOT = '.';\nvar C_SPACE = ' ';\nvar C_NEWLINE = '\\n';\nvar C_TAB = '\\t';\nvar C_PAREN_CLOSE = ')';\nvar C_X_LOWER = 'x';\n\nvar TAB_SIZE = 4;\nvar EXPRESSION_LOOSE_LIST_ITEM = /\\n\\n(?!\\s*$)/;\nvar EXPRESSION_TASK_ITEM = /^\\[([ \\t]|x|X)][ \\t]/;\nvar EXPRESSION_BULLET = /^([ \\t]*)([*+-]|\\d+[.)])( {1,4}(?! )| |\\t|$|(?=\\n))([^\\n]*)/;\nvar EXPRESSION_PEDANTIC_BULLET = /^([ \\t]*)([*+-]|\\d+[.)])([ \\t]+)/;\nvar EXPRESSION_INITIAL_INDENT = /^( {1,4}|\\t)?/gm;\n\n/* Map of characters which can be used to mark\n * list-items. */\nvar LIST_UNORDERED_MARKERS = {};\n\nLIST_UNORDERED_MARKERS[C_ASTERISK] = true;\nLIST_UNORDERED_MARKERS[C_PLUS] = true;\nLIST_UNORDERED_MARKERS[C_DASH] = true;\n\n/* Map of characters which can be used to mark\n * list-items after a digit. */\nvar LIST_ORDERED_MARKERS = {};\n\nLIST_ORDERED_MARKERS[C_DOT] = true;\n\n/* Map of characters which can be used to mark\n * list-items after a digit. */\nvar LIST_ORDERED_COMMONMARK_MARKERS = {};\n\nLIST_ORDERED_COMMONMARK_MARKERS[C_DOT] = true;\nLIST_ORDERED_COMMONMARK_MARKERS[C_PAREN_CLOSE] = true;\n\nfunction list(eat, value, silent) {\n  var self = this;\n  var commonmark = self.options.commonmark;\n  var pedantic = self.options.pedantic;\n  var tokenizers = self.blockTokenizers;\n  var interuptors = self.interruptList;\n  var markers;\n  var index = 0;\n  var length = value.length;\n  var start = null;\n  var size = 0;\n  var queue;\n  var ordered;\n  var character;\n  var marker;\n  var nextIndex;\n  var startIndex;\n  var prefixed;\n  var currentMarker;\n  var content;\n  var line;\n  var prevEmpty;\n  var empty;\n  var items;\n  var allLines;\n  var emptyLines;\n  var item;\n  var enterTop;\n  var exitBlockquote;\n  var isLoose;\n  var node;\n  var now;\n  var end;\n  var indented;\n\n  while (index < length) {\n    character = value.charAt(index);\n\n    if (character === C_TAB) {\n      size += TAB_SIZE - (size % TAB_SIZE);\n    } else if (character === C_SPACE) {\n      size++;\n    } else {\n      break;\n    }\n\n    index++;\n  }\n\n  if (size >= TAB_SIZE) {\n    return;\n  }\n\n  character = value.charAt(index);\n\n  markers = commonmark ?\n    LIST_ORDERED_COMMONMARK_MARKERS :\n    LIST_ORDERED_MARKERS;\n\n  if (LIST_UNORDERED_MARKERS[character] === true) {\n    marker = character;\n    ordered = false;\n  } else {\n    ordered = true;\n    queue = '';\n\n    while (index < length) {\n      character = value.charAt(index);\n\n      if (!decimal(character)) {\n        break;\n      }\n\n      queue += character;\n      index++;\n    }\n\n    character = value.charAt(index);\n\n    if (!queue || markers[character] !== true) {\n      return;\n    }\n\n    start = parseInt(queue, 10);\n    marker = character;\n  }\n\n  character = value.charAt(++index);\n\n  if (character !== C_SPACE && character !== C_TAB) {\n    return;\n  }\n\n  if (silent) {\n    return true;\n  }\n\n  index = 0;\n  items = [];\n  allLines = [];\n  emptyLines = [];\n\n  while (index < length) {\n    nextIndex = value.indexOf(C_NEWLINE, index);\n    startIndex = index;\n    prefixed = false;\n    indented = false;\n\n    if (nextIndex === -1) {\n      nextIndex = length;\n    }\n\n    end = index + TAB_SIZE;\n    size = 0;\n\n    while (index < length) {\n      character = value.charAt(index);\n\n      if (character === C_TAB) {\n        size += TAB_SIZE - (size % TAB_SIZE);\n      } else if (character === C_SPACE) {\n        size++;\n      } else {\n        break;\n      }\n\n      index++;\n    }\n\n    if (size >= TAB_SIZE) {\n      indented = true;\n    }\n\n    if (item && size >= item.indent) {\n      indented = true;\n    }\n\n    character = value.charAt(index);\n    currentMarker = null;\n\n    if (!indented) {\n      if (LIST_UNORDERED_MARKERS[character] === true) {\n        currentMarker = character;\n        index++;\n        size++;\n      } else {\n        queue = '';\n\n        while (index < length) {\n          character = value.charAt(index);\n\n          if (!decimal(character)) {\n            break;\n          }\n\n          queue += character;\n          index++;\n        }\n\n        character = value.charAt(index);\n        index++;\n\n        if (queue && markers[character] === true) {\n          currentMarker = character;\n          size += queue.length + 1;\n        }\n      }\n\n      if (currentMarker) {\n        character = value.charAt(index);\n\n        if (character === C_TAB) {\n          size += TAB_SIZE - (size % TAB_SIZE);\n          index++;\n        } else if (character === C_SPACE) {\n          end = index + TAB_SIZE;\n\n          while (index < end) {\n            if (value.charAt(index) !== C_SPACE) {\n              break;\n            }\n\n            index++;\n            size++;\n          }\n\n          if (index === end && value.charAt(index) === C_SPACE) {\n            index -= TAB_SIZE - 1;\n            size -= TAB_SIZE - 1;\n          }\n        } else if (character !== C_NEWLINE && character !== '') {\n          currentMarker = null;\n        }\n      }\n    }\n\n    if (currentMarker) {\n      if (!pedantic && marker !== currentMarker) {\n        break;\n      }\n\n      prefixed = true;\n    } else {\n      if (!commonmark && !indented && value.charAt(startIndex) === C_SPACE) {\n        indented = true;\n      } else if (commonmark && item) {\n        indented = size >= item.indent || size > TAB_SIZE;\n      }\n\n      prefixed = false;\n      index = startIndex;\n    }\n\n    line = value.slice(startIndex, nextIndex);\n    content = startIndex === index ? line : value.slice(index, nextIndex);\n\n    if (\n      currentMarker === C_ASTERISK ||\n      currentMarker === C_UNDERSCORE ||\n      currentMarker === C_DASH\n    ) {\n      if (tokenizers.thematicBreak.call(self, eat, line, true)) {\n        break;\n      }\n    }\n\n    prevEmpty = empty;\n    empty = !trim(content).length;\n\n    if (indented && item) {\n      item.value = item.value.concat(emptyLines, line);\n      allLines = allLines.concat(emptyLines, line);\n      emptyLines = [];\n    } else if (prefixed) {\n      if (emptyLines.length !== 0) {\n        item.value.push('');\n        item.trail = emptyLines.concat();\n      }\n\n      item = {\n        value: [line],\n        indent: size,\n        trail: []\n      };\n\n      items.push(item);\n      allLines = allLines.concat(emptyLines, line);\n      emptyLines = [];\n    } else if (empty) {\n      if (prevEmpty) {\n        break;\n      }\n\n      emptyLines.push(line);\n    } else {\n      if (prevEmpty) {\n        break;\n      }\n\n      if (interrupt(interuptors, tokenizers, self, [eat, line, true])) {\n        break;\n      }\n\n      item.value = item.value.concat(emptyLines, line);\n      allLines = allLines.concat(emptyLines, line);\n      emptyLines = [];\n    }\n\n    index = nextIndex + 1;\n  }\n\n  node = eat(allLines.join(C_NEWLINE)).reset({\n    type: 'list',\n    ordered: ordered,\n    start: start,\n    loose: null,\n    children: []\n  });\n\n  enterTop = self.enterList();\n  exitBlockquote = self.enterBlock();\n  isLoose = false;\n  index = -1;\n  length = items.length;\n\n  while (++index < length) {\n    item = items[index].value.join(C_NEWLINE);\n    now = eat.now();\n\n    item = eat(item)(listItem(self, item, now), node);\n\n    if (item.loose) {\n      isLoose = true;\n    }\n\n    item = items[index].trail.join(C_NEWLINE);\n\n    if (index !== length - 1) {\n      item += C_NEWLINE;\n    }\n\n    eat(item);\n  }\n\n  enterTop();\n  exitBlockquote();\n\n  node.loose = isLoose;\n\n  return node;\n}\n\nfunction listItem(ctx, value, position) {\n  var offsets = ctx.offset;\n  var fn = ctx.options.pedantic ? pedanticListItem : normalListItem;\n  var checked = null;\n  var task;\n  var indent;\n\n  value = fn.apply(null, arguments);\n\n  if (ctx.options.gfm) {\n    task = value.match(EXPRESSION_TASK_ITEM);\n\n    if (task) {\n      indent = task[0].length;\n      checked = task[1].toLowerCase() === C_X_LOWER;\n      offsets[position.line] += indent;\n      value = value.slice(indent);\n    }\n  }\n\n  return {\n    type: 'listItem',\n    loose: EXPRESSION_LOOSE_LIST_ITEM.test(value) ||\n      value.charAt(value.length - 1) === C_NEWLINE,\n    checked: checked,\n    children: ctx.tokenizeBlock(value, position)\n  };\n}\n\n/* Create a list-item using overly simple mechanics. */\nfunction pedanticListItem(ctx, value, position) {\n  var offsets = ctx.offset;\n  var line = position.line;\n\n  /* Remove the list-item’s bullet. */\n  value = value.replace(EXPRESSION_PEDANTIC_BULLET, replacer);\n\n  /* The initial line was also matched by the below, so\n   * we reset the `line`. */\n  line = position.line;\n\n  return value.replace(EXPRESSION_INITIAL_INDENT, replacer);\n\n  /* A simple replacer which removed all matches,\n   * and adds their length to `offset`. */\n  function replacer($0) {\n    offsets[line] = (offsets[line] || 0) + $0.length;\n    line++;\n\n    return '';\n  }\n}\n\n/* Create a list-item using sane mechanics. */\nfunction normalListItem(ctx, value, position) {\n  var offsets = ctx.offset;\n  var line = position.line;\n  var max;\n  var bullet;\n  var rest;\n  var lines;\n  var trimmedLines;\n  var index;\n  var length;\n\n  /* Remove the list-item’s bullet. */\n  value = value.replace(EXPRESSION_BULLET, replacer);\n\n  lines = value.split(C_NEWLINE);\n\n  trimmedLines = removeIndent(value, getIndent(max).indent).split(C_NEWLINE);\n\n  /* We replaced the initial bullet with something\n   * else above, which was used to trick\n   * `removeIndentation` into removing some more\n   * characters when possible.  However, that could\n   * result in the initial line to be stripped more\n   * than it should be. */\n  trimmedLines[0] = rest;\n\n  offsets[line] = (offsets[line] || 0) + bullet.length;\n  line++;\n\n  index = 0;\n  length = lines.length;\n\n  while (++index < length) {\n    offsets[line] = (offsets[line] || 0) +\n      lines[index].length - trimmedLines[index].length;\n    line++;\n  }\n\n  return trimmedLines.join(C_NEWLINE);\n\n  function replacer($0, $1, $2, $3, $4) {\n    bullet = $1 + $2 + $3;\n    rest = $4;\n\n    /* Make sure that the first nine numbered list items\n     * can indent with an extra space.  That is, when\n     * the bullet did not receive an extra final space. */\n    if (Number($2) < 10 && bullet.length % 2 === 1) {\n      $2 = C_SPACE + $2;\n    }\n\n    max = $1 + repeat(C_SPACE, $2.length) + $3;\n\n    return max + rest;\n  }\n}\n","'use strict';\n\nvar whitespace = require('is-whitespace-character');\n\nmodule.exports = newline;\n\n/* Tokenise newline. */\nfunction newline(eat, value, silent) {\n  var character = value.charAt(0);\n  var length;\n  var subvalue;\n  var queue;\n  var index;\n\n  if (character !== '\\n') {\n    return;\n  }\n\n  /* istanbul ignore if - never used (yet) */\n  if (silent) {\n    return true;\n  }\n\n  index = 1;\n  length = value.length;\n  subvalue = character;\n  queue = '';\n\n  while (index < length) {\n    character = value.charAt(index);\n\n    if (!whitespace(character)) {\n      break;\n    }\n\n    queue += character;\n\n    if (character === '\\n') {\n      subvalue += queue;\n      queue = '';\n    }\n\n    index++;\n  }\n\n  eat(subvalue);\n}\n","'use strict';\n\nvar trim = require('trim');\nvar decimal = require('is-decimal');\nvar trimTrailingLines = require('trim-trailing-lines');\nvar interrupt = require('../util/interrupt');\n\nmodule.exports = paragraph;\n\nvar C_NEWLINE = '\\n';\nvar C_TAB = '\\t';\nvar C_SPACE = ' ';\n\nvar TAB_SIZE = 4;\n\n/* Tokenise paragraph. */\nfunction paragraph(eat, value, silent) {\n  var self = this;\n  var settings = self.options;\n  var commonmark = settings.commonmark;\n  var gfm = settings.gfm;\n  var tokenizers = self.blockTokenizers;\n  var interruptors = self.interruptParagraph;\n  var index = value.indexOf(C_NEWLINE);\n  var length = value.length;\n  var position;\n  var subvalue;\n  var character;\n  var size;\n  var now;\n\n  while (index < length) {\n    /* Eat everything if there’s no following newline. */\n    if (index === -1) {\n      index = length;\n      break;\n    }\n\n    /* Stop if the next character is NEWLINE. */\n    if (value.charAt(index + 1) === C_NEWLINE) {\n      break;\n    }\n\n    /* In commonmark-mode, following indented lines\n     * are part of the paragraph. */\n    if (commonmark) {\n      size = 0;\n      position = index + 1;\n\n      while (position < length) {\n        character = value.charAt(position);\n\n        if (character === C_TAB) {\n          size = TAB_SIZE;\n          break;\n        } else if (character === C_SPACE) {\n          size++;\n        } else {\n          break;\n        }\n\n        position++;\n      }\n\n      if (size >= TAB_SIZE) {\n        index = value.indexOf(C_NEWLINE, index + 1);\n        continue;\n      }\n    }\n\n    subvalue = value.slice(index + 1);\n\n    /* Check if the following code contains a possible\n     * block. */\n    if (interrupt(interruptors, tokenizers, self, [eat, subvalue, true])) {\n      break;\n    }\n\n    /* Break if the following line starts a list, when\n     * already in a list, or when in commonmark, or when\n     * in gfm mode and the bullet is *not* numeric. */\n    if (\n      tokenizers.list.call(self, eat, subvalue, true) &&\n      (\n        self.inList ||\n        commonmark ||\n        (gfm && !decimal(trim.left(subvalue).charAt(0)))\n      )\n    ) {\n      break;\n    }\n\n    position = index;\n    index = value.indexOf(C_NEWLINE, index + 1);\n\n    if (index !== -1 && trim(value.slice(position, index)) === '') {\n      index = position;\n      break;\n    }\n  }\n\n  subvalue = value.slice(0, index);\n\n  if (trim(subvalue) === '') {\n    eat(subvalue);\n\n    return null;\n  }\n\n  /* istanbul ignore if - never used (yet) */\n  if (silent) {\n    return true;\n  }\n\n  now = eat.now();\n  subvalue = trimTrailingLines(subvalue);\n\n  return eat(subvalue)({\n    type: 'paragraph',\n    children: self.tokenizeInline(subvalue, now)\n  });\n}\n","'use strict';\n\nvar whitespace = require('is-whitespace-character');\nvar locate = require('../locate/link');\nvar normalize = require('../util/normalize');\n\nmodule.exports = reference;\nreference.locator = locate;\n\nvar T_LINK = 'link';\nvar T_IMAGE = 'image';\nvar T_FOOTNOTE = 'footnote';\nvar REFERENCE_TYPE_SHORTCUT = 'shortcut';\nvar REFERENCE_TYPE_COLLAPSED = 'collapsed';\nvar REFERENCE_TYPE_FULL = 'full';\nvar C_CARET = '^';\nvar C_BACKSLASH = '\\\\';\nvar C_BRACKET_OPEN = '[';\nvar C_BRACKET_CLOSE = ']';\n\nfunction reference(eat, value, silent) {\n  var self = this;\n  var character = value.charAt(0);\n  var index = 0;\n  var length = value.length;\n  var subvalue = '';\n  var intro = '';\n  var type = T_LINK;\n  var referenceType = REFERENCE_TYPE_SHORTCUT;\n  var content;\n  var identifier;\n  var now;\n  var node;\n  var exit;\n  var queue;\n  var bracketed;\n  var depth;\n\n  /* Check whether we’re eating an image. */\n  if (character === '!') {\n    type = T_IMAGE;\n    intro = character;\n    character = value.charAt(++index);\n  }\n\n  if (character !== C_BRACKET_OPEN) {\n    return;\n  }\n\n  index++;\n  intro += character;\n  queue = '';\n\n  /* Check whether we’re eating a footnote. */\n  if (self.options.footnotes && value.charAt(index) === C_CARET) {\n    /* Exit if `![^` is found, so the `!` will be seen as text after this,\n     * and we’ll enter this function again when `[^` is found. */\n    if (type === T_IMAGE) {\n      return;\n    }\n\n    intro += C_CARET;\n    index++;\n    type = T_FOOTNOTE;\n  }\n\n  /* Eat the text. */\n  depth = 0;\n\n  while (index < length) {\n    character = value.charAt(index);\n\n    if (character === C_BRACKET_OPEN) {\n      bracketed = true;\n      depth++;\n    } else if (character === C_BRACKET_CLOSE) {\n      if (!depth) {\n        break;\n      }\n\n      depth--;\n    }\n\n    if (character === C_BACKSLASH) {\n      queue += C_BACKSLASH;\n      character = value.charAt(++index);\n    }\n\n    queue += character;\n    index++;\n  }\n\n  subvalue = queue;\n  content = queue;\n  character = value.charAt(index);\n\n  if (character !== C_BRACKET_CLOSE) {\n    return;\n  }\n\n  index++;\n  subvalue += character;\n  queue = '';\n\n  while (index < length) {\n    character = value.charAt(index);\n\n    if (!whitespace(character)) {\n      break;\n    }\n\n    queue += character;\n    index++;\n  }\n\n  character = value.charAt(index);\n\n  /* Inline footnotes cannot have an identifier. */\n  if (type !== T_FOOTNOTE && character === C_BRACKET_OPEN) {\n    identifier = '';\n    queue += character;\n    index++;\n\n    while (index < length) {\n      character = value.charAt(index);\n\n      if (character === C_BRACKET_OPEN || character === C_BRACKET_CLOSE) {\n        break;\n      }\n\n      if (character === C_BACKSLASH) {\n        identifier += C_BACKSLASH;\n        character = value.charAt(++index);\n      }\n\n      identifier += character;\n      index++;\n    }\n\n    character = value.charAt(index);\n\n    if (character === C_BRACKET_CLOSE) {\n      referenceType = identifier ? REFERENCE_TYPE_FULL : REFERENCE_TYPE_COLLAPSED;\n      queue += identifier + character;\n      index++;\n    } else {\n      identifier = '';\n    }\n\n    subvalue += queue;\n    queue = '';\n  } else {\n    if (!content) {\n      return;\n    }\n\n    identifier = content;\n  }\n\n  /* Brackets cannot be inside the identifier. */\n  if (referenceType !== REFERENCE_TYPE_FULL && bracketed) {\n    return;\n  }\n\n  subvalue = intro + subvalue;\n\n  if (type === T_LINK && self.inLink) {\n    return null;\n  }\n\n  /* istanbul ignore if - never used (yet) */\n  if (silent) {\n    return true;\n  }\n\n  if (type === T_FOOTNOTE && content.indexOf(' ') !== -1) {\n    return eat(subvalue)({\n      type: 'footnote',\n      children: this.tokenizeInline(content, eat.now())\n    });\n  }\n\n  now = eat.now();\n  now.column += intro.length;\n  now.offset += intro.length;\n  identifier = referenceType === REFERENCE_TYPE_FULL ? identifier : content;\n\n  node = {\n    type: type + 'Reference',\n    identifier: normalize(identifier)\n  };\n\n  if (type === T_LINK || type === T_IMAGE) {\n    node.referenceType = referenceType;\n  }\n\n  if (type === T_LINK) {\n    exit = self.enterLink();\n    node.children = self.tokenizeInline(content, now);\n    exit();\n  } else if (type === T_IMAGE) {\n    node.alt = self.decode.raw(self.unescape(content), now) || null;\n  }\n\n  return eat(subvalue)(node);\n}\n","'use strict';\n\nvar trim = require('trim');\nvar whitespace = require('is-whitespace-character');\nvar locate = require('../locate/strong');\n\nmodule.exports = strong;\nstrong.locator = locate;\n\nvar C_ASTERISK = '*';\nvar C_UNDERSCORE = '_';\n\nfunction strong(eat, value, silent) {\n  var self = this;\n  var index = 0;\n  var character = value.charAt(index);\n  var now;\n  var pedantic;\n  var marker;\n  var queue;\n  var subvalue;\n  var length;\n  var prev;\n\n  if (\n    (character !== C_ASTERISK && character !== C_UNDERSCORE) ||\n    value.charAt(++index) !== character\n  ) {\n    return;\n  }\n\n  pedantic = self.options.pedantic;\n  marker = character;\n  subvalue = marker + marker;\n  length = value.length;\n  index++;\n  queue = '';\n  character = '';\n\n  if (pedantic && whitespace(value.charAt(index))) {\n    return;\n  }\n\n  while (index < length) {\n    prev = character;\n    character = value.charAt(index);\n\n    if (\n      character === marker &&\n      value.charAt(index + 1) === marker &&\n      (!pedantic || !whitespace(prev))\n    ) {\n      character = value.charAt(index + 2);\n\n      if (character !== marker) {\n        if (!trim(queue)) {\n          return;\n        }\n\n        /* istanbul ignore if - never used (yet) */\n        if (silent) {\n          return true;\n        }\n\n        now = eat.now();\n        now.column += 2;\n        now.offset += 2;\n\n        return eat(subvalue + queue + subvalue)({\n          type: 'strong',\n          children: self.tokenizeInline(queue, now)\n        });\n      }\n    }\n\n    if (!pedantic && character === '\\\\') {\n      queue += character;\n      character = value.charAt(++index);\n    }\n\n    queue += character;\n    index++;\n  }\n}\n","'use strict';\n\nvar whitespace = require('is-whitespace-character');\n\nmodule.exports = table;\n\nvar C_BACKSLASH = '\\\\';\nvar C_TICK = '`';\nvar C_DASH = '-';\nvar C_PIPE = '|';\nvar C_COLON = ':';\nvar C_SPACE = ' ';\nvar C_NEWLINE = '\\n';\nvar C_TAB = '\\t';\n\nvar MIN_TABLE_COLUMNS = 1;\nvar MIN_TABLE_ROWS = 2;\n\nvar TABLE_ALIGN_LEFT = 'left';\nvar TABLE_ALIGN_CENTER = 'center';\nvar TABLE_ALIGN_RIGHT = 'right';\nvar TABLE_ALIGN_NONE = null;\n\nfunction table(eat, value, silent) {\n  var self = this;\n  var index;\n  var alignments;\n  var alignment;\n  var subvalue;\n  var row;\n  var length;\n  var lines;\n  var queue;\n  var character;\n  var hasDash;\n  var align;\n  var cell;\n  var preamble;\n  var count;\n  var opening;\n  var now;\n  var position;\n  var lineCount;\n  var line;\n  var rows;\n  var table;\n  var lineIndex;\n  var pipeIndex;\n  var first;\n\n  /* Exit when not in gfm-mode. */\n  if (!self.options.gfm) {\n    return;\n  }\n\n  /* Get the rows.\n   * Detecting tables soon is hard, so there are some\n   * checks for performance here, such as the minimum\n   * number of rows, and allowed characters in the\n   * alignment row. */\n  index = 0;\n  lineCount = 0;\n  length = value.length + 1;\n  lines = [];\n\n  while (index < length) {\n    lineIndex = value.indexOf(C_NEWLINE, index);\n    pipeIndex = value.indexOf(C_PIPE, index + 1);\n\n    if (lineIndex === -1) {\n      lineIndex = value.length;\n    }\n\n    if (pipeIndex === -1 || pipeIndex > lineIndex) {\n      if (lineCount < MIN_TABLE_ROWS) {\n        return;\n      }\n\n      break;\n    }\n\n    lines.push(value.slice(index, lineIndex));\n    lineCount++;\n    index = lineIndex + 1;\n  }\n\n  /* Parse the alignment row. */\n  subvalue = lines.join(C_NEWLINE);\n  alignments = lines.splice(1, 1)[0] || [];\n  index = 0;\n  length = alignments.length;\n  lineCount--;\n  alignment = false;\n  align = [];\n\n  while (index < length) {\n    character = alignments.charAt(index);\n\n    if (character === C_PIPE) {\n      hasDash = null;\n\n      if (alignment === false) {\n        if (first === false) {\n          return;\n        }\n      } else {\n        align.push(alignment);\n        alignment = false;\n      }\n\n      first = false;\n    } else if (character === C_DASH) {\n      hasDash = true;\n      alignment = alignment || TABLE_ALIGN_NONE;\n    } else if (character === C_COLON) {\n      if (alignment === TABLE_ALIGN_LEFT) {\n        alignment = TABLE_ALIGN_CENTER;\n      } else if (hasDash && alignment === TABLE_ALIGN_NONE) {\n        alignment = TABLE_ALIGN_RIGHT;\n      } else {\n        alignment = TABLE_ALIGN_LEFT;\n      }\n    } else if (!whitespace(character)) {\n      return;\n    }\n\n    index++;\n  }\n\n  if (alignment !== false) {\n    align.push(alignment);\n  }\n\n  /* Exit when without enough columns. */\n  if (align.length < MIN_TABLE_COLUMNS) {\n    return;\n  }\n\n  /* istanbul ignore if - never used (yet) */\n  if (silent) {\n    return true;\n  }\n\n  /* Parse the rows. */\n  position = -1;\n  rows = [];\n\n  table = eat(subvalue).reset({\n    type: 'table',\n    align: align,\n    children: rows\n  });\n\n  while (++position < lineCount) {\n    line = lines[position];\n    row = {type: 'tableRow', children: []};\n\n    /* Eat a newline character when this is not the\n     * first row. */\n    if (position) {\n      eat(C_NEWLINE);\n    }\n\n    /* Eat the row. */\n    eat(line).reset(row, table);\n\n    length = line.length + 1;\n    index = 0;\n    queue = '';\n    cell = '';\n    preamble = true;\n    count = null;\n    opening = null;\n\n    while (index < length) {\n      character = line.charAt(index);\n\n      if (character === C_TAB || character === C_SPACE) {\n        if (cell) {\n          queue += character;\n        } else {\n          eat(character);\n        }\n\n        index++;\n        continue;\n      }\n\n      if (character === '' || character === C_PIPE) {\n        if (preamble) {\n          eat(character);\n        } else {\n          if (character && opening) {\n            queue += character;\n            index++;\n            continue;\n          }\n\n          if ((cell || character) && !preamble) {\n            subvalue = cell;\n\n            if (queue.length > 1) {\n              if (character) {\n                subvalue += queue.slice(0, queue.length - 1);\n                queue = queue.charAt(queue.length - 1);\n              } else {\n                subvalue += queue;\n                queue = '';\n              }\n            }\n\n            now = eat.now();\n\n            eat(subvalue)({\n              type: 'tableCell',\n              children: self.tokenizeInline(cell, now)\n            }, row);\n          }\n\n          eat(queue + character);\n\n          queue = '';\n          cell = '';\n        }\n      } else {\n        if (queue) {\n          cell += queue;\n          queue = '';\n        }\n\n        cell += character;\n\n        if (character === C_BACKSLASH && index !== length - 2) {\n          cell += line.charAt(index + 1);\n          index++;\n        }\n\n        if (character === C_TICK) {\n          count = 1;\n\n          while (line.charAt(index + 1) === character) {\n            cell += character;\n            index++;\n            count++;\n          }\n\n          if (!opening) {\n            opening = count;\n          } else if (count >= opening) {\n            opening = 0;\n          }\n        }\n      }\n\n      preamble = false;\n      index++;\n    }\n\n    /* Eat the alignment row. */\n    if (!position) {\n      eat(C_NEWLINE + alignments);\n    }\n  }\n\n  return table;\n}\n","'use strict';\n\nmodule.exports = text;\n\nfunction text(eat, value, silent) {\n  var self = this;\n  var methods;\n  var tokenizers;\n  var index;\n  var length;\n  var subvalue;\n  var position;\n  var tokenizer;\n  var name;\n  var min;\n  var now;\n\n  /* istanbul ignore if - never used (yet) */\n  if (silent) {\n    return true;\n  }\n\n  methods = self.inlineMethods;\n  length = methods.length;\n  tokenizers = self.inlineTokenizers;\n  index = -1;\n  min = value.length;\n\n  while (++index < length) {\n    name = methods[index];\n\n    if (name === 'text' || !tokenizers[name]) {\n      continue;\n    }\n\n    tokenizer = tokenizers[name].locator;\n\n    if (!tokenizer) {\n      eat.file.fail('Missing locator: `' + name + '`');\n    }\n\n    position = tokenizer.call(self, value, 1);\n\n    if (position !== -1 && position < min) {\n      min = position;\n    }\n  }\n\n  subvalue = value.slice(0, min);\n  now = eat.now();\n\n  self.decode(subvalue, now, function (content, position, source) {\n    eat(source || content)({\n      type: 'text',\n      value: content\n    });\n  });\n}\n","'use strict';\n\nmodule.exports = thematicBreak;\n\nvar C_NEWLINE = '\\n';\nvar C_TAB = '\\t';\nvar C_SPACE = ' ';\nvar C_ASTERISK = '*';\nvar C_UNDERSCORE = '_';\nvar C_DASH = '-';\n\nvar THEMATIC_BREAK_MARKER_COUNT = 3;\n\nfunction thematicBreak(eat, value, silent) {\n  var index = -1;\n  var length = value.length + 1;\n  var subvalue = '';\n  var character;\n  var marker;\n  var markerCount;\n  var queue;\n\n  while (++index < length) {\n    character = value.charAt(index);\n\n    if (character !== C_TAB && character !== C_SPACE) {\n      break;\n    }\n\n    subvalue += character;\n  }\n\n  if (\n    character !== C_ASTERISK &&\n    character !== C_DASH &&\n    character !== C_UNDERSCORE\n  ) {\n    return;\n  }\n\n  marker = character;\n  subvalue += character;\n  markerCount = 1;\n  queue = '';\n\n  while (++index < length) {\n    character = value.charAt(index);\n\n    if (character === marker) {\n      markerCount++;\n      subvalue += queue + marker;\n      queue = '';\n    } else if (character === C_SPACE) {\n      queue += character;\n    } else if (\n      markerCount >= THEMATIC_BREAK_MARKER_COUNT &&\n      (!character || character === C_NEWLINE)\n    ) {\n      subvalue += queue;\n\n      if (silent) {\n        return true;\n      }\n\n      return eat(subvalue)({type: 'thematicBreak'});\n    } else {\n      return;\n    }\n  }\n}\n","'use strict';\n\nvar decode = require('parse-entities');\nvar whitespace = require('is-whitespace-character');\nvar locate = require('../locate/url');\n\nmodule.exports = url;\nurl.locator = locate;\nurl.notInLink = true;\n\nvar C_BRACKET_OPEN = '[';\nvar C_BRACKET_CLOSE = ']';\nvar C_PAREN_OPEN = '(';\nvar C_PAREN_CLOSE = ')';\nvar C_LT = '<';\nvar C_AT_SIGN = '@';\n\nvar HTTP_PROTOCOL = 'http://';\nvar HTTPS_PROTOCOL = 'https://';\nvar MAILTO_PROTOCOL = 'mailto:';\n\nvar PROTOCOLS = [\n  HTTP_PROTOCOL,\n  HTTPS_PROTOCOL,\n  MAILTO_PROTOCOL\n];\n\nvar PROTOCOLS_LENGTH = PROTOCOLS.length;\n\nfunction url(eat, value, silent) {\n  var self = this;\n  var subvalue;\n  var content;\n  var character;\n  var index;\n  var position;\n  var protocol;\n  var match;\n  var length;\n  var queue;\n  var parenCount;\n  var nextCharacter;\n  var exit;\n\n  if (!self.options.gfm) {\n    return;\n  }\n\n  subvalue = '';\n  index = -1;\n  length = PROTOCOLS_LENGTH;\n\n  while (++index < length) {\n    protocol = PROTOCOLS[index];\n    match = value.slice(0, protocol.length);\n\n    if (match.toLowerCase() === protocol) {\n      subvalue = match;\n      break;\n    }\n  }\n\n  if (!subvalue) {\n    return;\n  }\n\n  index = subvalue.length;\n  length = value.length;\n  queue = '';\n  parenCount = 0;\n\n  while (index < length) {\n    character = value.charAt(index);\n\n    if (whitespace(character) || character === C_LT) {\n      break;\n    }\n\n    if (\n      character === '.' ||\n      character === ',' ||\n      character === ':' ||\n      character === ';' ||\n      character === '\"' ||\n      character === '\\'' ||\n      character === ')' ||\n      character === ']'\n    ) {\n      nextCharacter = value.charAt(index + 1);\n\n      if (!nextCharacter || whitespace(nextCharacter)) {\n        break;\n      }\n    }\n\n    if (character === C_PAREN_OPEN || character === C_BRACKET_OPEN) {\n      parenCount++;\n    }\n\n    if (character === C_PAREN_CLOSE || character === C_BRACKET_CLOSE) {\n      parenCount--;\n\n      if (parenCount < 0) {\n        break;\n      }\n    }\n\n    queue += character;\n    index++;\n  }\n\n  if (!queue) {\n    return;\n  }\n\n  subvalue += queue;\n  content = subvalue;\n\n  if (protocol === MAILTO_PROTOCOL) {\n    position = queue.indexOf(C_AT_SIGN);\n\n    if (position === -1 || position === length - 1) {\n      return;\n    }\n\n    content = content.substr(MAILTO_PROTOCOL.length);\n  }\n\n  /* istanbul ignore if - never used (yet) */\n  if (silent) {\n    return true;\n  }\n\n  exit = self.enterLink();\n  content = self.tokenizeInline(content, eat.now());\n  exit();\n\n  return eat(subvalue)({\n    type: 'link',\n    title: null,\n    url: decode(subvalue, {nonTerminated: false}),\n    children: content\n  });\n}\n","'use strict';\n\nmodule.exports = factory;\n\nvar MERGEABLE_NODES = {\n  text: mergeText,\n  blockquote: mergeBlockquote\n};\n\n/* Check whether a node is mergeable with adjacent nodes. */\nfunction mergeable(node) {\n  var start;\n  var end;\n\n  if (node.type !== 'text' || !node.position) {\n    return true;\n  }\n\n  start = node.position.start;\n  end = node.position.end;\n\n  /* Only merge nodes which occupy the same size as their\n   * `value`. */\n  return start.line !== end.line ||\n      end.column - start.column === node.value.length;\n}\n\n/* Merge two text nodes: `node` into `prev`. */\nfunction mergeText(prev, node) {\n  prev.value += node.value;\n\n  return prev;\n}\n\n/* Merge two blockquotes: `node` into `prev`, unless in\n * CommonMark mode. */\nfunction mergeBlockquote(prev, node) {\n  if (this.options.commonmark) {\n    return node;\n  }\n\n  prev.children = prev.children.concat(node.children);\n\n  return prev;\n}\n\n/* Construct a tokenizer.  This creates both\n * `tokenizeInline` and `tokenizeBlock`. */\nfunction factory(type) {\n  return tokenize;\n\n  /* Tokenizer for a bound `type`. */\n  function tokenize(value, location) {\n    var self = this;\n    var offset = self.offset;\n    var tokens = [];\n    var methods = self[type + 'Methods'];\n    var tokenizers = self[type + 'Tokenizers'];\n    var line = location.line;\n    var column = location.column;\n    var index;\n    var length;\n    var method;\n    var name;\n    var matched;\n    var valueLength;\n\n    /* Trim white space only lines. */\n    if (!value) {\n      return tokens;\n    }\n\n    /* Expose on `eat`. */\n    eat.now = now;\n    eat.file = self.file;\n\n    /* Sync initial offset. */\n    updatePosition('');\n\n    /* Iterate over `value`, and iterate over all\n     * tokenizers.  When one eats something, re-iterate\n     * with the remaining value.  If no tokenizer eats,\n     * something failed (should not happen) and an\n     * exception is thrown. */\n    while (value) {\n      index = -1;\n      length = methods.length;\n      matched = false;\n\n      while (++index < length) {\n        name = methods[index];\n        method = tokenizers[name];\n\n        if (\n          method &&\n          /* istanbul ignore next */ (!method.onlyAtStart || self.atStart) &&\n          (!method.notInList || !self.inList) &&\n          (!method.notInBlock || !self.inBlock) &&\n          (!method.notInLink || !self.inLink)\n        ) {\n          valueLength = value.length;\n\n          method.apply(self, [eat, value]);\n\n          matched = valueLength !== value.length;\n\n          if (matched) {\n            break;\n          }\n        }\n      }\n\n      /* istanbul ignore if */\n      if (!matched) {\n        self.file.fail(new Error('Infinite loop'), eat.now());\n      }\n    }\n\n    self.eof = now();\n\n    return tokens;\n\n    /* Update line, column, and offset based on\n     * `value`. */\n    function updatePosition(subvalue) {\n      var lastIndex = -1;\n      var index = subvalue.indexOf('\\n');\n\n      while (index !== -1) {\n        line++;\n        lastIndex = index;\n        index = subvalue.indexOf('\\n', index + 1);\n      }\n\n      if (lastIndex === -1) {\n        column += subvalue.length;\n      } else {\n        column = subvalue.length - lastIndex;\n      }\n\n      if (line in offset) {\n        if (lastIndex !== -1) {\n          column += offset[line];\n        } else if (column <= offset[line]) {\n          column = offset[line] + 1;\n        }\n      }\n    }\n\n    /* Get offset.  Called before the first character is\n     * eaten to retrieve the range's offsets. */\n    function getOffset() {\n      var indentation = [];\n      var pos = line + 1;\n\n      /* Done.  Called when the last character is\n       * eaten to retrieve the range’s offsets. */\n      return function () {\n        var last = line + 1;\n\n        while (pos < last) {\n          indentation.push((offset[pos] || 0) + 1);\n\n          pos++;\n        }\n\n        return indentation;\n      };\n    }\n\n    /* Get the current position. */\n    function now() {\n      var pos = {line: line, column: column};\n\n      pos.offset = self.toOffset(pos);\n\n      return pos;\n    }\n\n    /* Store position information for a node. */\n    function Position(start) {\n      this.start = start;\n      this.end = now();\n    }\n\n    /* Throw when a value is incorrectly eaten.\n     * This shouldn’t happen but will throw on new,\n     * incorrect rules. */\n    function validateEat(subvalue) {\n      /* istanbul ignore if */\n      if (value.substring(0, subvalue.length) !== subvalue) {\n        /* Capture stack-trace. */\n        self.file.fail(\n          new Error(\n            'Incorrectly eaten value: please report this ' +\n            'warning on http://git.io/vg5Ft'\n          ),\n          now()\n        );\n      }\n    }\n\n    /* Mark position and patch `node.position`. */\n    function position() {\n      var before = now();\n\n      return update;\n\n      /* Add the position to a node. */\n      function update(node, indent) {\n        var prev = node.position;\n        var start = prev ? prev.start : before;\n        var combined = [];\n        var n = prev && prev.end.line;\n        var l = before.line;\n\n        node.position = new Position(start);\n\n        /* If there was already a `position`, this\n         * node was merged.  Fixing `start` wasn’t\n         * hard, but the indent is different.\n         * Especially because some information, the\n         * indent between `n` and `l` wasn’t\n         * tracked.  Luckily, that space is\n         * (should be?) empty, so we can safely\n         * check for it now. */\n        if (prev && indent && prev.indent) {\n          combined = prev.indent;\n\n          if (n < l) {\n            while (++n < l) {\n              combined.push((offset[n] || 0) + 1);\n            }\n\n            combined.push(before.column);\n          }\n\n          indent = combined.concat(indent);\n        }\n\n        node.position.indent = indent || [];\n\n        return node;\n      }\n    }\n\n    /* Add `node` to `parent`s children or to `tokens`.\n     * Performs merges where possible. */\n    function add(node, parent) {\n      var children = parent ? parent.children : tokens;\n      var prev = children[children.length - 1];\n\n      if (\n        prev &&\n        node.type === prev.type &&\n        node.type in MERGEABLE_NODES &&\n        mergeable(prev) &&\n        mergeable(node)\n      ) {\n        node = MERGEABLE_NODES[node.type].call(self, prev, node);\n      }\n\n      if (node !== prev) {\n        children.push(node);\n      }\n\n      if (self.atStart && tokens.length !== 0) {\n        self.exitStart();\n      }\n\n      return node;\n    }\n\n    /* Remove `subvalue` from `value`.\n     * `subvalue` must be at the start of `value`. */\n    function eat(subvalue) {\n      var indent = getOffset();\n      var pos = position();\n      var current = now();\n\n      validateEat(subvalue);\n\n      apply.reset = reset;\n      reset.test = test;\n      apply.test = test;\n\n      value = value.substring(subvalue.length);\n\n      updatePosition(subvalue);\n\n      indent = indent();\n\n      return apply;\n\n      /* Add the given arguments, add `position` to\n       * the returned node, and return the node. */\n      function apply(node, parent) {\n        return pos(add(pos(node), parent), indent);\n      }\n\n      /* Functions just like apply, but resets the\n       * content:  the line and column are reversed,\n       * and the eaten value is re-added.\n       * This is useful for nodes with a single\n       * type of content, such as lists and tables.\n       * See `apply` above for what parameters are\n       * expected. */\n      function reset() {\n        var node = apply.apply(null, arguments);\n\n        line = current.line;\n        column = current.column;\n        value = subvalue + value;\n\n        return node;\n      }\n\n      /* Test the position, after eating, and reverse\n       * to a not-eaten state. */\n      function test() {\n        var result = pos({});\n\n        line = current.line;\n        column = current.column;\n        value = subvalue + value;\n\n        return result.position;\n      }\n    }\n  }\n}\n","'use strict';\n\nmodule.exports = factory;\n\n/* Factory to de-escape a value, based on a list at `key`\n * in `ctx`. */\nfunction factory(ctx, key) {\n  return unescape;\n\n  /* De-escape a string using the expression at `key`\n   * in `ctx`. */\n  function unescape(value) {\n    var prev = 0;\n    var index = value.indexOf('\\\\');\n    var escape = ctx[key];\n    var queue = [];\n    var character;\n\n    while (index !== -1) {\n      queue.push(value.slice(prev, index));\n      prev = index + 1;\n      character = value.charAt(prev);\n\n      /* If the following character is not a valid escape,\n       * add the slash. */\n      if (!character || escape.indexOf(character) === -1) {\n        queue.push('\\\\');\n      }\n\n      index = value.indexOf('\\\\', prev);\n    }\n\n    queue.push(value.slice(prev));\n\n    return queue.join('');\n  }\n}\n","'use strict';\n\nmodule.exports = indentation;\n\n/* Map of characters, and their column length,\n * which can be used as indentation. */\nvar characters = {' ': 1, '\\t': 4};\n\n/* Gets indentation information for a line. */\nfunction indentation(value) {\n  var index = 0;\n  var indent = 0;\n  var character = value.charAt(index);\n  var stops = {};\n  var size;\n\n  while (character in characters) {\n    size = characters[character];\n\n    indent += size;\n\n    if (size > 1) {\n      indent = Math.floor(indent / size) * size;\n    }\n\n    stops[indent] = index;\n\n    character = value.charAt(++index);\n  }\n\n  return {indent: indent, stops: stops};\n}\n","'use strict';\n\nvar attributeName = '[a-zA-Z_:][a-zA-Z0-9:._-]*';\nvar unquoted = '[^\"\\'=<>`\\\\u0000-\\\\u0020]+';\nvar singleQuoted = '\\'[^\\']*\\'';\nvar doubleQuoted = '\"[^\"]*\"';\nvar attributeValue = '(?:' + unquoted + '|' + singleQuoted + '|' + doubleQuoted + ')';\nvar attribute = '(?:\\\\s+' + attributeName + '(?:\\\\s*=\\\\s*' + attributeValue + ')?)';\nvar openTag = '<[A-Za-z][A-Za-z0-9\\\\-]*' + attribute + '*\\\\s*\\\\/?>';\nvar closeTag = '<\\\\/[A-Za-z][A-Za-z0-9\\\\-]*\\\\s*>';\nvar comment = '<!---->|<!--(?:-?[^>-])(?:-?[^-])*-->';\nvar processing = '<[?].*?[?]>';\nvar declaration = '<![A-Za-z]+\\\\s+[^>]*>';\nvar cdata = '<!\\\\[CDATA\\\\[[\\\\s\\\\S]*?\\\\]\\\\]>';\n\nexports.openCloseTag = new RegExp('^(?:' + openTag + '|' + closeTag + ')');\n\nexports.tag = new RegExp('^(?:' +\n  openTag + '|' +\n  closeTag + '|' +\n  comment + '|' +\n  processing + '|' +\n  declaration + '|' +\n  cdata +\n')');\n","'use strict';\n\nmodule.exports = interrupt;\n\nfunction interrupt(interruptors, tokenizers, ctx, params) {\n  var bools = ['pedantic', 'commonmark'];\n  var count = bools.length;\n  var length = interruptors.length;\n  var index = -1;\n  var interruptor;\n  var config;\n  var fn;\n  var offset;\n  var bool;\n  var ignore;\n\n  while (++index < length) {\n    interruptor = interruptors[index];\n    config = interruptor[1] || {};\n    fn = interruptor[0];\n    offset = -1;\n    ignore = false;\n\n    while (++offset < count) {\n      bool = bools[offset];\n\n      if (config[bool] !== undefined && config[bool] !== ctx.options[bool]) {\n        ignore = true;\n        break;\n      }\n    }\n\n    if (ignore) {\n      continue;\n    }\n\n    if (tokenizers[fn].apply(ctx, params)) {\n      return true;\n    }\n  }\n\n  return false;\n}\n","'use strict';\n\nvar collapseWhiteSpace = require('collapse-white-space');\n\nmodule.exports = normalize;\n\n/* Normalize an identifier.  Collapses multiple white space\n * characters into a single space, and removes casing. */\nfunction normalize(value) {\n  return collapseWhiteSpace(value).toLowerCase();\n}\n","'use strict';\n\nvar trim = require('trim');\nvar repeat = require('repeat-string');\nvar getIndent = require('./get-indentation');\n\nmodule.exports = indentation;\n\nvar C_SPACE = ' ';\nvar C_NEWLINE = '\\n';\nvar C_TAB = '\\t';\n\n/* Remove the minimum indent from every line in `value`.\n * Supports both tab, spaced, and mixed indentation (as\n * well as possible). */\nfunction indentation(value, maximum) {\n  var values = value.split(C_NEWLINE);\n  var position = values.length + 1;\n  var minIndent = Infinity;\n  var matrix = [];\n  var index;\n  var indentation;\n  var stops;\n  var padding;\n\n  values.unshift(repeat(C_SPACE, maximum) + '!');\n\n  while (position--) {\n    indentation = getIndent(values[position]);\n\n    matrix[position] = indentation.stops;\n\n    if (trim(values[position]).length === 0) {\n      continue;\n    }\n\n    if (indentation.indent) {\n      if (indentation.indent > 0 && indentation.indent < minIndent) {\n        minIndent = indentation.indent;\n      }\n    } else {\n      minIndent = Infinity;\n\n      break;\n    }\n  }\n\n  if (minIndent !== Infinity) {\n    position = values.length;\n\n    while (position--) {\n      stops = matrix[position];\n      index = minIndent;\n\n      while (index && !(index in stops)) {\n        index--;\n      }\n\n      if (\n        trim(values[position]).length !== 0 &&\n        minIndent &&\n        index !== minIndent\n      ) {\n        padding = C_TAB;\n      } else {\n        padding = '';\n      }\n\n      values[position] = padding + values[position].slice(\n        index in stops ? stops[index] + 1 : 0\n      );\n    }\n  }\n\n  values.shift();\n\n  return values.join(C_NEWLINE);\n}\n","/*!\n * repeat-string <https://github.com/jonschlinkert/repeat-string>\n *\n * Copyright (c) 2014-2015, Jon Schlinkert.\n * Licensed under the MIT License.\n */\n\n'use strict';\n\n/**\n * Results cache\n */\n\nvar res = '';\nvar cache;\n\n/**\n * Expose `repeat`\n */\n\nmodule.exports = repeat;\n\n/**\n * Repeat the given `string` the specified `number`\n * of times.\n *\n * **Example:**\n *\n * ```js\n * var repeat = require('repeat-string');\n * repeat('A', 5);\n * //=> AAAAA\n * ```\n *\n * @param {String} `string` The string to repeat\n * @param {Number} `number` The number of times to repeat the string\n * @return {String} Repeated string\n * @api public\n */\n\nfunction repeat(str, num) {\n  if (typeof str !== 'string') {\n    throw new TypeError('expected a string');\n  }\n\n  // cover common, quick use cases\n  if (num === 1) return str;\n  if (num === 2) return str + str;\n\n  var max = str.length * num;\n  if (cache !== str || typeof cache === 'undefined') {\n    cache = str;\n    res = '';\n  } else if (res.length >= max) {\n    return res.substr(0, max);\n  }\n\n  while (max > res.length && num > 1) {\n    if (num & 1) {\n      res += str;\n    }\n\n    num >>= 1;\n    str += str;\n  }\n\n  res += str;\n  res = res.substr(0, max);\n  return res;\n}\n","'use strict';\n\nvar path = require('path');\n\nfunction replaceExt(npath, ext) {\n  if (typeof npath !== 'string') {\n    return npath;\n  }\n\n  if (npath.length === 0) {\n    return npath;\n  }\n\n  var nFileName = path.basename(npath, path.extname(npath)) + ext;\n  return path.join(path.dirname(npath), nFileName);\n}\n\nmodule.exports = replaceExt;\n","(function (global, undefined) {\n    \"use strict\";\n\n    if (global.setImmediate) {\n        return;\n    }\n\n    var nextHandle = 1; // Spec says greater than zero\n    var tasksByHandle = {};\n    var currentlyRunningATask = false;\n    var doc = global.document;\n    var registerImmediate;\n\n    function setImmediate(callback) {\n      // Callback can either be a function or a string\n      if (typeof callback !== \"function\") {\n        callback = new Function(\"\" + callback);\n      }\n      // Copy function arguments\n      var args = new Array(arguments.length - 1);\n      for (var i = 0; i < args.length; i++) {\n          args[i] = arguments[i + 1];\n      }\n      // Store and register the task\n      var task = { callback: callback, args: args };\n      tasksByHandle[nextHandle] = task;\n      registerImmediate(nextHandle);\n      return nextHandle++;\n    }\n\n    function clearImmediate(handle) {\n        delete tasksByHandle[handle];\n    }\n\n    function run(task) {\n        var callback = task.callback;\n        var args = task.args;\n        switch (args.length) {\n        case 0:\n            callback();\n            break;\n        case 1:\n            callback(args[0]);\n            break;\n        case 2:\n            callback(args[0], args[1]);\n            break;\n        case 3:\n            callback(args[0], args[1], args[2]);\n            break;\n        default:\n            callback.apply(undefined, args);\n            break;\n        }\n    }\n\n    function runIfPresent(handle) {\n        // From the spec: \"Wait until any invocations of this algorithm started before this one have completed.\"\n        // So if we're currently running a task, we'll need to delay this invocation.\n        if (currentlyRunningATask) {\n            // Delay by doing a setTimeout. setImmediate was tried instead, but in Firefox 7 it generated a\n            // \"too much recursion\" error.\n            setTimeout(runIfPresent, 0, handle);\n        } else {\n            var task = tasksByHandle[handle];\n            if (task) {\n                currentlyRunningATask = true;\n                try {\n                    run(task);\n                } finally {\n                    clearImmediate(handle);\n                    currentlyRunningATask = false;\n                }\n            }\n        }\n    }\n\n    function installNextTickImplementation() {\n        registerImmediate = function(handle) {\n            process.nextTick(function () { runIfPresent(handle); });\n        };\n    }\n\n    function canUsePostMessage() {\n        // The test against `importScripts` prevents this implementation from being installed inside a web worker,\n        // where `global.postMessage` means something completely different and can't be used for this purpose.\n        if (global.postMessage && !global.importScripts) {\n            var postMessageIsAsynchronous = true;\n            var oldOnMessage = global.onmessage;\n            global.onmessage = function() {\n                postMessageIsAsynchronous = false;\n            };\n            global.postMessage(\"\", \"*\");\n            global.onmessage = oldOnMessage;\n            return postMessageIsAsynchronous;\n        }\n    }\n\n    function installPostMessageImplementation() {\n        // Installs an event handler on `global` for the `message` event: see\n        // * https://developer.mozilla.org/en/DOM/window.postMessage\n        // * http://www.whatwg.org/specs/web-apps/current-work/multipage/comms.html#crossDocumentMessages\n\n        var messagePrefix = \"setImmediate$\" + Math.random() + \"$\";\n        var onGlobalMessage = function(event) {\n            if (event.source === global &&\n                typeof event.data === \"string\" &&\n                event.data.indexOf(messagePrefix) === 0) {\n                runIfPresent(+event.data.slice(messagePrefix.length));\n            }\n        };\n\n        if (global.addEventListener) {\n            global.addEventListener(\"message\", onGlobalMessage, false);\n        } else {\n            global.attachEvent(\"onmessage\", onGlobalMessage);\n        }\n\n        registerImmediate = function(handle) {\n            global.postMessage(messagePrefix + handle, \"*\");\n        };\n    }\n\n    function installMessageChannelImplementation() {\n        var channel = new MessageChannel();\n        channel.port1.onmessage = function(event) {\n            var handle = event.data;\n            runIfPresent(handle);\n        };\n\n        registerImmediate = function(handle) {\n            channel.port2.postMessage(handle);\n        };\n    }\n\n    function installReadyStateChangeImplementation() {\n        var html = doc.documentElement;\n        registerImmediate = function(handle) {\n            // Create a <script> element; its readystatechange event will be fired asynchronously once it is inserted\n            // into the document. Do so, thus queuing up the task. Remember to clean up once it's been called.\n            var script = doc.createElement(\"script\");\n            script.onreadystatechange = function () {\n                runIfPresent(handle);\n                script.onreadystatechange = null;\n                html.removeChild(script);\n                script = null;\n            };\n            html.appendChild(script);\n        };\n    }\n\n    function installSetTimeoutImplementation() {\n        registerImmediate = function(handle) {\n            setTimeout(runIfPresent, 0, handle);\n        };\n    }\n\n    // If supported, we should attach to the prototype of global, since that is where setTimeout et al. live.\n    var attachTo = Object.getPrototypeOf && Object.getPrototypeOf(global);\n    attachTo = attachTo && attachTo.setTimeout ? attachTo : global;\n\n    // Don't get fooled by e.g. browserify environments.\n    if ({}.toString.call(global.process) === \"[object process]\") {\n        // For Node.js before 0.9\n        installNextTickImplementation();\n\n    } else if (canUsePostMessage()) {\n        // For non-IE10 modern browsers\n        installPostMessageImplementation();\n\n    } else if (global.MessageChannel) {\n        // For web workers, where supported\n        installMessageChannelImplementation();\n\n    } else if (doc && \"onreadystatechange\" in doc.createElement(\"script\")) {\n        // For IE 6–8\n        installReadyStateChangeImplementation();\n\n    } else {\n        // For older browsers\n        installSetTimeoutImplementation();\n    }\n\n    attachTo.setImmediate = setImmediate;\n    attachTo.clearImmediate = clearImmediate;\n}(typeof self === \"undefined\" ? typeof global === \"undefined\" ? this : global : self));\n","'use strict'\n\nmodule.exports = factory\n\n/* Construct a state `toggler`: a function which inverses\n * `property` in context based on its current value.\n * The by `toggler` returned function restores that value. */\nfunction factory(key, state, ctx) {\n  return enter\n\n  function enter() {\n    var context = ctx || this\n    var current = context[key]\n\n    context[key] = !state\n\n    return exit\n\n    function exit() {\n      context[key] = current\n    }\n  }\n}\n","var scope = (typeof global !== \"undefined\" && global) ||\n            (typeof self !== \"undefined\" && self) ||\n            window;\nvar apply = Function.prototype.apply;\n\n// DOM APIs, for completeness\n\nexports.setTimeout = function() {\n  return new Timeout(apply.call(setTimeout, scope, arguments), clearTimeout);\n};\nexports.setInterval = function() {\n  return new Timeout(apply.call(setInterval, scope, arguments), clearInterval);\n};\nexports.clearTimeout =\nexports.clearInterval = function(timeout) {\n  if (timeout) {\n    timeout.close();\n  }\n};\n\nfunction Timeout(id, clearFn) {\n  this._id = id;\n  this._clearFn = clearFn;\n}\nTimeout.prototype.unref = Timeout.prototype.ref = function() {};\nTimeout.prototype.close = function() {\n  this._clearFn.call(scope, this._id);\n};\n\n// Does not start the time, just sets up the members needed.\nexports.enroll = function(item, msecs) {\n  clearTimeout(item._idleTimeoutId);\n  item._idleTimeout = msecs;\n};\n\nexports.unenroll = function(item) {\n  clearTimeout(item._idleTimeoutId);\n  item._idleTimeout = -1;\n};\n\nexports._unrefActive = exports.active = function(item) {\n  clearTimeout(item._idleTimeoutId);\n\n  var msecs = item._idleTimeout;\n  if (msecs >= 0) {\n    item._idleTimeoutId = setTimeout(function onTimeout() {\n      if (item._onTimeout)\n        item._onTimeout();\n    }, msecs);\n  }\n};\n\n// setimmediate attaches itself to the global object\nrequire(\"setimmediate\");\n// On some exotic environments, it's not clear which object `setimmediate` was\n// able to install onto.  Search each possibility in the same order as the\n// `setimmediate` library.\nexports.setImmediate = (typeof self !== \"undefined\" && self.setImmediate) ||\n                       (typeof global !== \"undefined\" && global.setImmediate) ||\n                       (this && this.setImmediate);\nexports.clearImmediate = (typeof self !== \"undefined\" && self.clearImmediate) ||\n                         (typeof global !== \"undefined\" && global.clearImmediate) ||\n                         (this && this.clearImmediate);\n","'use strict'\n\nmodule.exports = trimTrailingLines\n\nvar line = '\\n'\n\n/* Remove final newline characters from `value`. */\nfunction trimTrailingLines(value) {\n  var val = String(value)\n  var index = val.length\n\n  while (val.charAt(--index) === line) {\n    /* Empty */\n  }\n\n  return val.slice(0, index + 1)\n}\n","\nexports = module.exports = trim;\n\nfunction trim(str){\n  return str.replace(/^\\s*|\\s*$/g, '');\n}\n\nexports.left = function(str){\n  return str.replace(/^\\s*/, '');\n};\n\nexports.right = function(str){\n  return str.replace(/\\s*$/, '');\n};\n","'use strict'\n\n/* Expose. */\nmodule.exports = trough\n\n/* Methods. */\nvar slice = [].slice\n\n/* Create new middleware. */\nfunction trough() {\n  var fns = []\n  var middleware = {}\n\n  middleware.run = run\n  middleware.use = use\n\n  return middleware\n\n  /* Run `fns`.  Last argument must be\n   * a completion handler. */\n  function run() {\n    var index = -1\n    var input = slice.call(arguments, 0, -1)\n    var done = arguments[arguments.length - 1]\n\n    if (typeof done !== 'function') {\n      throw new Error('Expected function as last argument, not ' + done)\n    }\n\n    next.apply(null, [null].concat(input))\n\n    /* Run the next `fn`, if any. */\n    function next(err) {\n      var fn = fns[++index]\n      var params = slice.call(arguments, 0)\n      var values = params.slice(1)\n      var length = input.length\n      var pos = -1\n\n      if (err) {\n        done(err)\n        return\n      }\n\n      /* Copy non-nully input into values. */\n      while (++pos < length) {\n        if (values[pos] === null || values[pos] === undefined) {\n          values[pos] = input[pos]\n        }\n      }\n\n      input = values\n\n      /* Next or done. */\n      if (fn) {\n        wrap(fn, next).apply(null, input)\n      } else {\n        done.apply(null, [null].concat(input))\n      }\n    }\n  }\n\n  /* Add `fn` to the list. */\n  function use(fn) {\n    if (typeof fn !== 'function') {\n      throw new Error('Expected `fn` to be a function, not ' + fn)\n    }\n\n    fns.push(fn)\n\n    return middleware\n  }\n}\n\n/* Wrap `fn`.  Can be sync or async; return a promise,\n * receive a completion handler, return new values and\n * errors. */\nfunction wrap(fn, next) {\n  var invoked\n\n  return wrapped\n\n  function wrapped() {\n    var params = slice.call(arguments, 0)\n    var callback = fn.length > params.length\n    var result\n\n    if (callback) {\n      params.push(done)\n    }\n\n    try {\n      result = fn.apply(null, params)\n    } catch (err) {\n      /* Well, this is quite the pickle.  `fn` received\n       * a callback and invoked it (thus continuing the\n       * pipeline), but later also threw an error.\n       * We’re not about to restart the pipeline again,\n       * so the only thing left to do is to throw the\n       * thing instea. */\n      if (callback && invoked) {\n        throw err\n      }\n\n      return done(err)\n    }\n\n    if (!callback) {\n      if (result && typeof result.then === 'function') {\n        result.then(then, done)\n      } else if (result instanceof Error) {\n        done(result)\n      } else {\n        then(result)\n      }\n    }\n  }\n\n  /* Invoke `next`, only once. */\n  function done() {\n    if (!invoked) {\n      invoked = true\n\n      next.apply(null, arguments)\n    }\n  }\n\n  /* Invoke `done` with one value.\n   * Tracks if an error is passed, too. */\n  function then(value) {\n    done(null, value)\n  }\n}\n","'use strict'\n\nvar xtend = require('xtend')\nvar inherits = require('inherits')\n\nmodule.exports = unherit\n\n/* Create a custom constructor which can be modified\n * without affecting the original class. */\nfunction unherit(Super) {\n  var result\n  var key\n  var value\n\n  inherits(Of, Super)\n  inherits(From, Of)\n\n  /* Clone values. */\n  result = Of.prototype\n\n  for (key in result) {\n    value = result[key]\n\n    if (value && typeof value === 'object') {\n      result[key] = 'concat' in value ? value.concat() : xtend(value)\n    }\n  }\n\n  return Of\n\n  /* Constructor accepting a single argument,\n   * which itself is an `arguments` object. */\n  function From(parameters) {\n    return Super.apply(this, parameters)\n  }\n\n  /* Constructor accepting variadic arguments. */\n  function Of() {\n    if (!(this instanceof Of)) {\n      return new From(arguments)\n    }\n\n    return Super.apply(this, arguments)\n  }\n}\n","'use strict'\n\n/* Dependencies. */\nvar extend = require('extend')\nvar bail = require('bail')\nvar vfile = require('vfile')\nvar trough = require('trough')\nvar string = require('x-is-string')\nvar plain = require('is-plain-obj')\n\n/* Expose a frozen processor. */\nmodule.exports = unified().freeze()\n\nvar slice = [].slice\nvar own = {}.hasOwnProperty\n\n/* Process pipeline. */\nvar pipeline = trough()\n  .use(pipelineParse)\n  .use(pipelineRun)\n  .use(pipelineStringify)\n\nfunction pipelineParse(p, ctx) {\n  ctx.tree = p.parse(ctx.file)\n}\n\nfunction pipelineRun(p, ctx, next) {\n  p.run(ctx.tree, ctx.file, done)\n\n  function done(err, tree, file) {\n    if (err) {\n      next(err)\n    } else {\n      ctx.tree = tree\n      ctx.file = file\n      next()\n    }\n  }\n}\n\nfunction pipelineStringify(p, ctx) {\n  ctx.file.contents = p.stringify(ctx.tree, ctx.file)\n}\n\n/* Function to create the first processor. */\nfunction unified() {\n  var attachers = []\n  var transformers = trough()\n  var namespace = {}\n  var frozen = false\n  var freezeIndex = -1\n\n  /* Data management. */\n  processor.data = data\n\n  /* Lock. */\n  processor.freeze = freeze\n\n  /* Plug-ins. */\n  processor.attachers = attachers\n  processor.use = use\n\n  /* API. */\n  processor.parse = parse\n  processor.stringify = stringify\n  processor.run = run\n  processor.runSync = runSync\n  processor.process = process\n  processor.processSync = processSync\n\n  /* Expose. */\n  return processor\n\n  /* Create a new processor based on the processor\n   * in the current scope. */\n  function processor() {\n    var destination = unified()\n    var length = attachers.length\n    var index = -1\n\n    while (++index < length) {\n      destination.use.apply(null, attachers[index])\n    }\n\n    destination.data(extend(true, {}, namespace))\n\n    return destination\n  }\n\n  /* Freeze: used to signal a processor that has finished\n   * configuration.\n   *\n   * For example, take unified itself.  It’s frozen.\n   * Plug-ins should not be added to it.  Rather, it should\n   * be extended, by invoking it, before modifying it.\n   *\n   * In essence, always invoke this when exporting a\n   * processor. */\n  function freeze() {\n    var values\n    var plugin\n    var options\n    var transformer\n\n    if (frozen) {\n      return processor\n    }\n\n    while (++freezeIndex < attachers.length) {\n      values = attachers[freezeIndex]\n      plugin = values[0]\n      options = values[1]\n      transformer = null\n\n      if (options === false) {\n        continue\n      }\n\n      if (options === true) {\n        values[1] = undefined\n      }\n\n      transformer = plugin.apply(processor, values.slice(1))\n\n      if (typeof transformer === 'function') {\n        transformers.use(transformer)\n      }\n    }\n\n    frozen = true\n    freezeIndex = Infinity\n\n    return processor\n  }\n\n  /* Data management.\n   * Getter / setter for processor-specific informtion. */\n  function data(key, value) {\n    if (string(key)) {\n      /* Set `key`. */\n      if (arguments.length === 2) {\n        assertUnfrozen('data', frozen)\n\n        namespace[key] = value\n\n        return processor\n      }\n\n      /* Get `key`. */\n      return (own.call(namespace, key) && namespace[key]) || null\n    }\n\n    /* Set space. */\n    if (key) {\n      assertUnfrozen('data', frozen)\n      namespace = key\n      return processor\n    }\n\n    /* Get space. */\n    return namespace\n  }\n\n  /* Plug-in management.\n   *\n   * Pass it:\n   * *   an attacher and options,\n   * *   a preset,\n   * *   a list of presets, attachers, and arguments (list\n   *     of attachers and options). */\n  function use(value) {\n    var settings\n\n    assertUnfrozen('use', frozen)\n\n    if (value === null || value === undefined) {\n      /* Empty */\n    } else if (typeof value === 'function') {\n      addPlugin.apply(null, arguments)\n    } else if (typeof value === 'object') {\n      if ('length' in value) {\n        addList(value)\n      } else {\n        addPreset(value)\n      }\n    } else {\n      throw new Error('Expected usable value, not `' + value + '`')\n    }\n\n    if (settings) {\n      namespace.settings = extend(namespace.settings || {}, settings)\n    }\n\n    return processor\n\n    function addPreset(result) {\n      addList(result.plugins)\n\n      if (result.settings) {\n        settings = extend(settings || {}, result.settings)\n      }\n    }\n\n    function add(value) {\n      if (typeof value === 'function') {\n        addPlugin(value)\n      } else if (typeof value === 'object') {\n        if ('length' in value) {\n          addPlugin.apply(null, value)\n        } else {\n          addPreset(value)\n        }\n      } else {\n        throw new Error('Expected usable value, not `' + value + '`')\n      }\n    }\n\n    function addList(plugins) {\n      var length\n      var index\n\n      if (plugins === null || plugins === undefined) {\n        /* Empty */\n      } else if (typeof plugins === 'object' && 'length' in plugins) {\n        length = plugins.length\n        index = -1\n\n        while (++index < length) {\n          add(plugins[index])\n        }\n      } else {\n        throw new Error('Expected a list of plugins, not `' + plugins + '`')\n      }\n    }\n\n    function addPlugin(plugin, value) {\n      var entry = find(plugin)\n\n      if (entry) {\n        if (plain(entry[1]) && plain(value)) {\n          value = extend(entry[1], value)\n        }\n\n        entry[1] = value\n      } else {\n        attachers.push(slice.call(arguments))\n      }\n    }\n  }\n\n  function find(plugin) {\n    var length = attachers.length\n    var index = -1\n    var entry\n\n    while (++index < length) {\n      entry = attachers[index]\n\n      if (entry[0] === plugin) {\n        return entry\n      }\n    }\n  }\n\n  /* Parse a file (in string or VFile representation)\n   * into a Unist node using the `Parser` on the\n   * processor. */\n  function parse(doc) {\n    var file = vfile(doc)\n    var Parser\n\n    freeze()\n    Parser = processor.Parser\n    assertParser('parse', Parser)\n\n    if (newable(Parser)) {\n      return new Parser(String(file), file).parse()\n    }\n\n    return Parser(String(file), file) // eslint-disable-line new-cap\n  }\n\n  /* Run transforms on a Unist node representation of a file\n   * (in string or VFile representation), async. */\n  function run(node, file, cb) {\n    assertNode(node)\n    freeze()\n\n    if (!cb && typeof file === 'function') {\n      cb = file\n      file = null\n    }\n\n    if (!cb) {\n      return new Promise(executor)\n    }\n\n    executor(null, cb)\n\n    function executor(resolve, reject) {\n      transformers.run(node, vfile(file), done)\n\n      function done(err, tree, file) {\n        tree = tree || node\n        if (err) {\n          reject(err)\n        } else if (resolve) {\n          resolve(tree)\n        } else {\n          cb(null, tree, file)\n        }\n      }\n    }\n  }\n\n  /* Run transforms on a Unist node representation of a file\n   * (in string or VFile representation), sync. */\n  function runSync(node, file) {\n    var complete = false\n    var result\n\n    run(node, file, done)\n\n    assertDone('runSync', 'run', complete)\n\n    return result\n\n    function done(err, tree) {\n      complete = true\n      bail(err)\n      result = tree\n    }\n  }\n\n  /* Stringify a Unist node representation of a file\n   * (in string or VFile representation) into a string\n   * using the `Compiler` on the processor. */\n  function stringify(node, doc) {\n    var file = vfile(doc)\n    var Compiler\n\n    freeze()\n    Compiler = processor.Compiler\n    assertCompiler('stringify', Compiler)\n    assertNode(node)\n\n    if (newable(Compiler)) {\n      return new Compiler(node, file).compile()\n    }\n\n    return Compiler(node, file) // eslint-disable-line new-cap\n  }\n\n  /* Parse a file (in string or VFile representation)\n   * into a Unist node using the `Parser` on the processor,\n   * then run transforms on that node, and compile the\n   * resulting node using the `Compiler` on the processor,\n   * and store that result on the VFile. */\n  function process(doc, cb) {\n    freeze()\n    assertParser('process', processor.Parser)\n    assertCompiler('process', processor.Compiler)\n\n    if (!cb) {\n      return new Promise(executor)\n    }\n\n    executor(null, cb)\n\n    function executor(resolve, reject) {\n      var file = vfile(doc)\n\n      pipeline.run(processor, {file: file}, done)\n\n      function done(err) {\n        if (err) {\n          reject(err)\n        } else if (resolve) {\n          resolve(file)\n        } else {\n          cb(null, file)\n        }\n      }\n    }\n  }\n\n  /* Process the given document (in string or VFile\n   * representation), sync. */\n  function processSync(doc) {\n    var complete = false\n    var file\n\n    freeze()\n    assertParser('processSync', processor.Parser)\n    assertCompiler('processSync', processor.Compiler)\n    file = vfile(doc)\n\n    process(file, done)\n\n    assertDone('processSync', 'process', complete)\n\n    return file\n\n    function done(err) {\n      complete = true\n      bail(err)\n    }\n  }\n}\n\n/* Check if `func` is a constructor. */\nfunction newable(value) {\n  return typeof value === 'function' && keys(value.prototype)\n}\n\n/* Check if `value` is an object with keys. */\nfunction keys(value) {\n  var key\n  for (key in value) {\n    return true\n  }\n  return false\n}\n\n/* Assert a parser is available. */\nfunction assertParser(name, Parser) {\n  if (typeof Parser !== 'function') {\n    throw new Error('Cannot `' + name + '` without `Parser`')\n  }\n}\n\n/* Assert a compiler is available. */\nfunction assertCompiler(name, Compiler) {\n  if (typeof Compiler !== 'function') {\n    throw new Error('Cannot `' + name + '` without `Compiler`')\n  }\n}\n\n/* Assert the processor is not frozen. */\nfunction assertUnfrozen(name, frozen) {\n  if (frozen) {\n    throw new Error(\n      [\n        'Cannot invoke `' + name + '` on a frozen processor.\\nCreate a new ',\n        'processor first, by invoking it: use `processor()` instead of ',\n        '`processor`.'\n      ].join('')\n    )\n  }\n}\n\n/* Assert `node` is a Unist node. */\nfunction assertNode(node) {\n  if (!node || !string(node.type)) {\n    throw new Error('Expected node, got `' + node + '`')\n  }\n}\n\n/* Assert that `complete` is `true`. */\nfunction assertDone(name, asyncName, complete) {\n  if (!complete) {\n    throw new Error(\n      '`' + name + '` finished async. Use `' + asyncName + '` instead'\n    )\n  }\n}\n","'use strict'\n\n/* eslint-disable max-params */\n\n/* Expose. */\nmodule.exports = is\n\n/* Assert if `test` passes for `node`.\n * When a `parent` node is known the `index` of node */\nfunction is(test, node, index, parent, context) {\n  var hasParent = parent !== null && parent !== undefined\n  var hasIndex = index !== null && index !== undefined\n  var check = convert(test)\n\n  if (\n    hasIndex &&\n    (typeof index !== 'number' || index < 0 || index === Infinity)\n  ) {\n    throw new Error('Expected positive finite index or child node')\n  }\n\n  if (hasParent && (!is(null, parent) || !parent.children)) {\n    throw new Error('Expected parent node')\n  }\n\n  if (!node || !node.type || typeof node.type !== 'string') {\n    return false\n  }\n\n  if (hasParent !== hasIndex) {\n    throw new Error('Expected both parent and index')\n  }\n\n  return Boolean(check.call(context, node, index, parent))\n}\n\nfunction convert(test) {\n  if (typeof test === 'string') {\n    return typeFactory(test)\n  }\n\n  if (test === null || test === undefined) {\n    return ok\n  }\n\n  if (typeof test === 'object') {\n    return ('length' in test ? anyFactory : matchesFactory)(test)\n  }\n\n  if (typeof test === 'function') {\n    return test\n  }\n\n  throw new Error('Expected function, string, or object as test')\n}\n\nfunction convertAll(tests) {\n  var results = []\n  var length = tests.length\n  var index = -1\n\n  while (++index < length) {\n    results[index] = convert(tests[index])\n  }\n\n  return results\n}\n\n/* Utility assert each property in `test` is represented\n * in `node`, and each values are strictly equal. */\nfunction matchesFactory(test) {\n  return matches\n\n  function matches(node) {\n    var key\n\n    for (key in test) {\n      if (node[key] !== test[key]) {\n        return false\n      }\n    }\n\n    return true\n  }\n}\n\nfunction anyFactory(tests) {\n  var checks = convertAll(tests)\n  var length = checks.length\n\n  return matches\n\n  function matches() {\n    var index = -1\n\n    while (++index < length) {\n      if (checks[index].apply(this, arguments)) {\n        return true\n      }\n    }\n\n    return false\n  }\n}\n\n/* Utility to convert a string into a function which checks\n * a given node’s type for said string. */\nfunction typeFactory(test) {\n  return type\n\n  function type(node) {\n    return Boolean(node && node.type === test)\n  }\n}\n\n/* Utility to return true. */\nfunction ok() {\n  return true\n}\n","'use strict'\n\nvar visit = require('unist-util-visit')\n\nmodule.exports = removePosition\n\n/* Remove `position`s from `tree`. */\nfunction removePosition(node, force) {\n  visit(node, force ? hard : soft)\n  return node\n}\n\nfunction hard(node) {\n  delete node.position\n}\n\nfunction soft(node) {\n  node.position = undefined\n}\n","'use strict'\n\nvar own = {}.hasOwnProperty\n\nmodule.exports = stringify\n\nfunction stringify(value) {\n  /* Nothing. */\n  if (!value || typeof value !== 'object') {\n    return null\n  }\n\n  /* Node. */\n  if (own.call(value, 'position') || own.call(value, 'type')) {\n    return position(value.position)\n  }\n\n  /* Position. */\n  if (own.call(value, 'start') || own.call(value, 'end')) {\n    return position(value)\n  }\n\n  /* Point. */\n  if (own.call(value, 'line') || own.call(value, 'column')) {\n    return point(value)\n  }\n\n  /* ? */\n  return null\n}\n\nfunction point(point) {\n  if (!point || typeof point !== 'object') {\n    point = {}\n  }\n\n  return index(point.line) + ':' + index(point.column)\n}\n\nfunction position(pos) {\n  if (!pos || typeof pos !== 'object') {\n    pos = {}\n  }\n\n  return point(pos.start) + '-' + point(pos.end)\n}\n\nfunction index(value) {\n  return value && typeof value === 'number' ? value : 1\n}\n","'use strict'\n\nmodule.exports = visit\n\nvar is = require('unist-util-is')\n\nvar CONTINUE = true\nvar SKIP = 'skip'\nvar EXIT = false\n\nvisit.CONTINUE = CONTINUE\nvisit.SKIP = SKIP\nvisit.EXIT = EXIT\n\nfunction visit(tree, test, visitor, reverse) {\n  if (typeof test === 'function' && typeof visitor !== 'function') {\n    reverse = visitor\n    visitor = test\n    test = null\n  }\n\n  one(tree)\n\n  /* Visit a single node. */\n  function one(node, index, parent) {\n    var result\n\n    index = index || (parent ? 0 : null)\n\n    if (!test || node.type === test || is(test, node, index, parent || null)) {\n      result = visitor(node, index, parent || null)\n    }\n\n    if (result === EXIT) {\n      return result\n    }\n\n    if (node.children && result !== SKIP) {\n      return all(node.children, node) === EXIT ? EXIT : result\n    }\n\n    return result\n  }\n\n  /* Visit children in `parent`. */\n  function all(children, parent) {\n    var step = reverse ? -1 : 1\n    var index = (reverse ? children.length : -1) + step\n    var child\n    var result\n\n    while (index > -1 && index < children.length) {\n      child = children[index]\n      result = child && one(child, index, parent)\n\n      if (result === EXIT) {\n        return result\n      }\n\n      index = typeof result === 'number' ? result : index + step\n    }\n\n    return CONTINUE\n  }\n}\n","'use strict'\n\n/* Expose. */\nmodule.exports = factory\n\n/* Factory. */\nfunction factory(file) {\n  var contents = indices(String(file))\n\n  return {\n    toPosition: offsetToPositionFactory(contents),\n    toOffset: positionToOffsetFactory(contents)\n  }\n}\n\n/* Factory to get the line and column-based `position` for\n * `offset` in the bound indices. */\nfunction offsetToPositionFactory(indices) {\n  return offsetToPosition\n\n  /* Get the line and column-based `position` for\n   * `offset` in the bound indices. */\n  function offsetToPosition(offset) {\n    var index = -1\n    var length = indices.length\n\n    if (offset < 0) {\n      return {}\n    }\n\n    while (++index < length) {\n      if (indices[index] > offset) {\n        return {\n          line: index + 1,\n          column: offset - (indices[index - 1] || 0) + 1,\n          offset: offset\n        }\n      }\n    }\n\n    return {}\n  }\n}\n\n/* Factory to get the `offset` for a line and column-based\n * `position` in the bound indices. */\nfunction positionToOffsetFactory(indices) {\n  return positionToOffset\n\n  /* Get the `offset` for a line and column-based\n   * `position` in the bound indices. */\n  function positionToOffset(position) {\n    var line = position && position.line\n    var column = position && position.column\n\n    if (!isNaN(line) && !isNaN(column) && line - 1 in indices) {\n      return (indices[line - 2] || 0) + column - 1 || 0\n    }\n\n    return -1\n  }\n}\n\n/* Get indices of line-breaks in `value`. */\nfunction indices(value) {\n  var result = []\n  var index = value.indexOf('\\n')\n\n  while (index !== -1) {\n    result.push(index + 1)\n    index = value.indexOf('\\n', index + 1)\n  }\n\n  result.push(value.length + 1)\n\n  return result\n}\n","'use strict'\n\nvar stringify = require('unist-util-stringify-position')\n\nmodule.exports = VMessage\n\n/* Inherit from `Error#`. */\nfunction VMessagePrototype() {}\nVMessagePrototype.prototype = Error.prototype\nVMessage.prototype = new VMessagePrototype()\n\n/* Message properties. */\nvar proto = VMessage.prototype\n\nproto.file = ''\nproto.name = ''\nproto.reason = ''\nproto.message = ''\nproto.stack = ''\nproto.fatal = null\nproto.column = null\nproto.line = null\n\n/* Construct a new VMessage.\n *\n * Note: We cannot invoke `Error` on the created context,\n * as that adds readonly `line` and `column` attributes on\n * Safari 9, thus throwing and failing the data. */\nfunction VMessage(reason, position, origin) {\n  var parts\n  var range\n  var location\n\n  if (typeof position === 'string') {\n    origin = position\n    position = null\n  }\n\n  parts = parseOrigin(origin)\n  range = stringify(position) || '1:1'\n\n  location = {\n    start: {line: null, column: null},\n    end: {line: null, column: null}\n  }\n\n  /* Node. */\n  if (position && position.position) {\n    position = position.position\n  }\n\n  if (position) {\n    /* Position. */\n    if (position.start) {\n      location = position\n      position = position.start\n    } else {\n      /* Point. */\n      location.start = position\n    }\n  }\n\n  if (reason.stack) {\n    this.stack = reason.stack\n    reason = reason.message\n  }\n\n  this.message = reason\n  this.name = range\n  this.reason = reason\n  this.line = position ? position.line : null\n  this.column = position ? position.column : null\n  this.location = location\n  this.source = parts[0]\n  this.ruleId = parts[1]\n}\n\nfunction parseOrigin(origin) {\n  var result = [null, null]\n  var index\n\n  if (typeof origin === 'string') {\n    index = origin.indexOf(':')\n\n    if (index === -1) {\n      result[1] = origin\n    } else {\n      result[0] = origin.slice(0, index)\n      result[1] = origin.slice(index + 1)\n    }\n  }\n\n  return result\n}\n","'use strict';\n\nvar path = require('path');\nvar replace = require('replace-ext');\nvar buffer = require('is-buffer');\n\nmodule.exports = VFile;\n\nvar own = {}.hasOwnProperty;\nvar proto = VFile.prototype;\n\nproto.toString = toString;\n\n/* Order of setting (least specific to most), we need this because\n * otherwise `{stem: 'a', path: '~/b.js'}` would throw, as a path\n * is needed before a stem can be set. */\nvar order = [\n  'history',\n  'path',\n  'basename',\n  'stem',\n  'extname',\n  'dirname'\n];\n\n/* Construct a new file. */\nfunction VFile(options) {\n  var prop;\n  var index;\n  var length;\n\n  if (!options) {\n    options = {};\n  } else if (typeof options === 'string' || buffer(options)) {\n    options = {contents: options};\n  } else if ('message' in options && 'messages' in options) {\n    return options;\n  }\n\n  if (!(this instanceof VFile)) {\n    return new VFile(options);\n  }\n\n  this.data = {};\n  this.messages = [];\n  this.history = [];\n  this.cwd = process.cwd();\n\n  /* Set path related properties in the correct order. */\n  index = -1;\n  length = order.length;\n\n  while (++index < length) {\n    prop = order[index];\n\n    if (own.call(options, prop)) {\n      this[prop] = options[prop];\n    }\n  }\n\n  /* Set non-path related properties. */\n  for (prop in options) {\n    if (order.indexOf(prop) === -1) {\n      this[prop] = options[prop];\n    }\n  }\n}\n\n/* Access full path (`~/index.min.js`). */\nObject.defineProperty(proto, 'path', {\n  get: function () {\n    return this.history[this.history.length - 1];\n  },\n  set: function (path) {\n    assertNonEmpty(path, 'path');\n\n    if (path !== this.path) {\n      this.history.push(path);\n    }\n  }\n});\n\n/* Access parent path (`~`). */\nObject.defineProperty(proto, 'dirname', {\n  get: function () {\n    return typeof this.path === 'string' ? path.dirname(this.path) : undefined;\n  },\n  set: function (dirname) {\n    assertPath(this.path, 'dirname');\n    this.path = path.join(dirname || '', this.basename);\n  }\n});\n\n/* Access basename (`index.min.js`). */\nObject.defineProperty(proto, 'basename', {\n  get: function () {\n    return typeof this.path === 'string' ? path.basename(this.path) : undefined;\n  },\n  set: function (basename) {\n    assertNonEmpty(basename, 'basename');\n    assertPart(basename, 'basename');\n    this.path = path.join(this.dirname || '', basename);\n  }\n});\n\n/* Access extname (`.js`). */\nObject.defineProperty(proto, 'extname', {\n  get: function () {\n    return typeof this.path === 'string' ? path.extname(this.path) : undefined;\n  },\n  set: function (extname) {\n    var ext = extname || '';\n\n    assertPart(ext, 'extname');\n    assertPath(this.path, 'extname');\n\n    if (ext) {\n      if (ext.charAt(0) !== '.') {\n        throw new Error('`extname` must start with `.`');\n      }\n\n      if (ext.indexOf('.', 1) !== -1) {\n        throw new Error('`extname` cannot contain multiple dots');\n      }\n    }\n\n    this.path = replace(this.path, ext);\n  }\n});\n\n/* Access stem (`index.min`). */\nObject.defineProperty(proto, 'stem', {\n  get: function () {\n    return typeof this.path === 'string' ? path.basename(this.path, this.extname) : undefined;\n  },\n  set: function (stem) {\n    assertNonEmpty(stem, 'stem');\n    assertPart(stem, 'stem');\n    this.path = path.join(this.dirname || '', stem + (this.extname || ''));\n  }\n});\n\n/* Get the value of the file. */\nfunction toString(encoding) {\n  var value = this.contents || '';\n  return buffer(value) ? value.toString(encoding) : String(value);\n}\n\n/* Assert that `part` is not a path (i.e., does\n * not contain `path.sep`). */\nfunction assertPart(part, name) {\n  if (part.indexOf(path.sep) !== -1) {\n    throw new Error('`' + name + '` cannot be a path: did not expect `' + path.sep + '`');\n  }\n}\n\n/* Assert that `part` is not empty. */\nfunction assertNonEmpty(part, name) {\n  if (!part) {\n    throw new Error('`' + name + '` cannot be empty');\n  }\n}\n\n/* Assert `path` exists. */\nfunction assertPath(path, name) {\n  if (!path) {\n    throw new Error('Setting `' + name + '` requires `path` to be set too');\n  }\n}\n","'use strict';\n\nvar VMessage = require('vfile-message');\nvar VFile = require('./core.js');\n\nmodule.exports = VFile;\n\nvar proto = VFile.prototype;\n\nproto.message = message;\nproto.info = info;\nproto.fail = fail;\n\n/* Slight backwards compatibility.  Remove in the future. */\nproto.warn = message;\n\n/* Create a message with `reason` at `position`.\n * When an error is passed in as `reason`, copies the stack. */\nfunction message(reason, position, origin) {\n  var filePath = this.path;\n  var message = new VMessage(reason, position, origin);\n\n  if (filePath) {\n    message.name = filePath + ':' + message.name;\n    message.file = filePath;\n  }\n\n  message.fatal = false;\n\n  this.messages.push(message);\n\n  return message;\n}\n\n/* Fail. Creates a vmessage, associates it with the file,\n * and throws it. */\nfunction fail() {\n  var message = this.message.apply(this, arguments);\n\n  message.fatal = true;\n\n  throw message;\n}\n\n/* Info. Creates a vmessage, associates it with the file,\n * and marks the fatality as null. */\nfunction info() {\n  var message = this.message.apply(this, arguments);\n\n  message.fatal = null;\n\n  return message;\n}\n","var g;\n\n// This works in non-strict mode\ng = (function() {\n\treturn this;\n})();\n\ntry {\n\t// This works if eval is allowed (see CSP)\n\tg = g || Function(\"return this\")() || (1, eval)(\"this\");\n} catch (e) {\n\t// This works if the window reference is available\n\tif (typeof window === \"object\") g = window;\n}\n\n// g can still be undefined, but nothing to do about it...\n// We return undefined, instead of nothing here, so it's\n// easier to handle this case. if(!global) { ...}\n\nmodule.exports = g;\n","var toString = Object.prototype.toString\n\nmodule.exports = isString\n\nfunction isString(obj) {\n    return toString.call(obj) === \"[object String]\"\n}\n","module.exports = extend\n\nvar hasOwnProperty = Object.prototype.hasOwnProperty;\n\nfunction extend() {\n    var target = {}\n\n    for (var i = 0; i < arguments.length; i++) {\n        var source = arguments[i]\n\n        for (var key in source) {\n            if (hasOwnProperty.call(source, key)) {\n                target[key] = source[key]\n            }\n        }\n    }\n\n    return target\n}\n","const fs = require('fs')\nconst EventEmitter = require('events')\nconst {ipcRenderer, remote} = require('electron')\nconst {app, Menu} = remote\nconst {h, render, Component} = require('preact')\nconst classNames = require('classnames')\n\nconst ThemeManager = require('./ThemeManager')\nconst MainView = require('./MainView')\nconst LeftSidebar = require('./LeftSidebar')\nconst Sidebar = require('./Sidebar')\nconst DrawerManager = require('./DrawerManager')\nconst InputBox = require('./InputBox')\nconst BusyScreen = require('./BusyScreen')\nconst InfoOverlay = require('./InfoOverlay')\n\nconst deadstones = require('@sabaki/deadstones')\nconst gtp = require('@sabaki/gtp')\nconst sgf = require('@sabaki/sgf')\nconst influence = require('@sabaki/influence')\n\ndeadstones.useFetch('./node_modules/@sabaki/deadstones/wasm/deadstones_bg.wasm')\n\nconst Board = require('../modules/board')\nconst boardmatcher = require('../modules/boardmatcher')\nconst dialog = require('../modules/dialog')\nconst enginesyncer = require('../modules/enginesyncer')\nconst fileformats = require('../modules/fileformats')\nconst gametree = require('../modules/gametree')\nconst helper = require('../modules/helper')\nconst rotation = require('../modules/rotation')\nconst setting = remote.require('./setting')\nconst sound = require('../modules/sound')\n\nclass App extends Component {\n    constructor() {\n        super()\n        window.sabaki = this\n\n        let emptyTree = gametree.new()\n        emptyTree.nodes.push({})\n\n        this.state = {\n            mode: 'play',\n            openDrawer: null,\n            busy: 0,\n            fullScreen: false,\n            showMenuBar: null,\n            zoomFactor: null,\n\n            representedFilename: null,\n            gameTrees: [emptyTree],\n            treePosition: [emptyTree, 0],\n\n            // Bars\n\n            undoable: false,\n            undoText: 'Undo',\n            selectedTool: 'stone_1',\n            scoringMethod: null,\n            findText: '',\n            findVertex: null,\n            deadStones: [],\n            blockedGuesses: [],\n\n            // Goban\n\n            highlightVertices: [],\n            heatMap: null,\n            showCoordinates: null,\n            showMoveColorization: null,\n            showNextMoves: null,\n            showSiblings: null,\n            fuzzyStonePlacement: null,\n            animatedStonePlacement: null,\n            animatedVertex: null,\n\n            // Sidebar\n\n            consoleLog: [],\n            showConsole: setting.get('view.show_leftsidebar'),\n            leftSidebarWidth: setting.get('view.leftsidebar_width'),\n            showGameGraph: setting.get('view.show_graph'),\n            showCommentBox: setting.get('view.show_comments'),\n            sidebarWidth: setting.get('view.sidebar_width'),\n            graphGridSize: null,\n            graphNodeSize: null,\n\n            // Engines\n\n            engines: null,\n            attachedEngines: [null, null],\n            engineCommands: [[], []],\n            generatingMoves: false,\n\n            // Drawers\n\n            preferencesTab: 'general',\n\n            // Input Box\n\n            showInputBox: false,\n            inputBoxText: '',\n            onInputBoxSubmit: helper.noop,\n            onInputBoxCancel: helper.noop,\n\n            // Info Overlay\n\n            infoOverlayText: '',\n            showInfoOverlay: false\n        }\n\n        this.events = new EventEmitter()\n        this.appName = app.getName()\n        this.version = app.getVersion()\n        this.window = remote.getCurrentWindow()\n\n        this.treeHash = this.generateTreeHash()\n        this.attachedEngineControllers = [null, null]\n        this.engineStates = [null, null]\n\n        // Expose submodules\n\n        this.modules = {Board, boardmatcher, dialog, enginesyncer,\n            fileformats, gametree, helper, setting, sound}\n\n        // Bind state to settings\n\n        setting.events.on('change', ({key}) => this.updateSettingState(key))\n        this.updateSettingState()\n    }\n\n    componentDidMount() {\n        window.addEventListener('contextmenu', evt => {\n            evt.preventDefault()\n        })\n\n        window.addEventListener('load', () => {\n            this.events.emit('ready')\n            this.window.show()\n        })\n\n        ipcRenderer.on('load-file', (evt, ...args) => {\n            setTimeout(() => this.loadFile(...args), setting.get('app.loadgame_delay'))\n        })\n\n        this.window.on('focus', () => {\n            if (setting.get('file.show_reload_warning')) {\n                this.askForReload()\n            }\n\n            ipcRenderer.send('build-menu', this.state.busy > 0)\n        })\n\n        this.window.on('resize', () => {\n            clearTimeout(this.resizeId)\n\n            this.resizeId = setTimeout(() => {\n                if (!this.window.isMaximized() && !this.window.isMinimized() && !this.window.isFullScreen()) {\n                    let [width, height] = this.window.getContentSize()\n                    setting.set('window.width', width).set('window.height', height)\n                }\n            }, 1000)\n        })\n\n        // Handle main menu items\n\n        let menuData = require('../menu')\n\n        let handleMenuClicks = menu => {\n            for (let item of menu) {\n                if ('click' in item) {\n                    ipcRenderer.on(`menu-click-${item.id}`, () => {\n                        if (!this.state.showMenuBar) this.window.setMenuBarVisibility(false)\n                        dialog.closeInputBox()\n                        item.click()\n                    })\n                }\n\n                if ('submenu' in item) {\n                    handleMenuClicks(item.submenu)\n                }\n            }\n        }\n\n        handleMenuClicks(menuData)\n\n        // Handle mouse wheel\n\n        for (let el of document.querySelectorAll('#main main, #graph')) {\n            el.addEventListener('wheel', evt => {\n                evt.preventDefault()\n\n                if (this.residueDeltaY == null) this.residueDeltaY = 0\n                this.residueDeltaY += evt.deltaY\n\n                if (Math.abs(this.residueDeltaY) >= setting.get('game.navigation_sensitivity')) {\n                    this.goStep(Math.sign(this.residueDeltaY))\n                    this.residueDeltaY = 0\n                }\n            })\n        }\n\n        // Handle file drag & drop\n\n        document.body.addEventListener('dragover', evt => evt.preventDefault())\n        document.body.addEventListener('drop', evt => {\n            evt.preventDefault()\n\n            if (evt.dataTransfer.files.length === 0) return\n            this.loadFile(evt.dataTransfer.files[0])\n        })\n\n        // Handle escape key\n\n        document.addEventListener('keyup', evt => {\n            if (evt.keyCode === 27) {\n                // Escape\n\n                if (this.state.generatingMoves) {\n                    this.stopGeneratingMoves()\n                } else if (this.state.openDrawer != null) {\n                    this.closeDrawer()\n                } else if (this.state.mode !== 'play') {\n                    this.setMode('play')\n                } else if (this.state.fullScreen) {\n                    this.setState({fullScreen: false})\n                }\n            }\n        })\n\n        // Handle other keyboard shortcuts\n\n        document.addEventListener('keydown', evt => {\n            if (['input', 'textarea'].indexOf(document.activeElement.tagName.toLowerCase()) >= 0) {\n                return\n            }\n\n            if (evt.keyCode == 36) {\n                // Home\n                this.goToBeginning()\n            } else if (evt.keyCode == 35) {\n                // End\n                this.goToEnd()\n            } else if (evt.keyCode == 38) {\n                // Up\n                this.goStep(-1)\n            } else if (evt.keyCode == 40) {\n                // Down\n                this.goStep(1)\n            } else if (evt.keyCode == 37) {\n                // Left\n                this.goToSiblingVariation(-1)\n            } else if (evt.keyCode == 39) {\n                // Right\n                this.goToSiblingVariation(1)\n            }\n        })\n\n        // Handle window closing\n\n        window.addEventListener('beforeunload', evt => {\n            evt.returnValue = ' '\n        })\n\n        this.newFile()\n    }\n\n    componentDidUpdate(_, prevState = {}) {\n        // Update title\n\n        let {basename} = require('path')\n        let title = this.appName\n        let {representedFilename, gameTrees, treePosition: [tree, ]} = this.state\n\n        if (representedFilename)\n            title = basename(representedFilename)\n        if (gameTrees.length > 1)\n            title += ' — Game ' + (this.inferredState.gameIndex + 1)\n        if (representedFilename && process.platform != 'darwin')\n            title += ' — ' + this.appName\n\n        if (document.title !== title)\n            document.title = title\n\n        // Handle full screen & menu bar\n\n        if (prevState.fullScreen !== this.state.fullScreen) {\n            if (this.state.fullScreen) this.flashInfoOverlay('Press Esc to exit full screen mode')\n            this.window.setFullScreen(this.state.fullScreen)\n        }\n\n        if (prevState.showMenuBar !== this.state.showMenuBar) {\n            if (!this.state.showMenuBar) this.flashInfoOverlay('Press Alt to show menu bar')\n            this.window.setMenuBarVisibility(this.state.showMenuBar)\n            this.window.setAutoHideMenuBar(!this.state.showMenuBar)\n        }\n\n        // Handle sidebar showing/hiding\n\n        if (prevState.showLeftSidebar !== this.state.showLeftSidebar\n        || prevState.showSidebar !== this.state.showSidebar) {\n            let [width, height] = this.window.getContentSize()\n            let widthDiff = 0\n\n            if (prevState.showSidebar !== this.state.showSidebar) {\n                widthDiff += this.state.sidebarWidth * (this.state.showSidebar ? 1 : -1)\n            }\n\n            if (prevState.showLeftSidebar !== this.state.showLeftSidebar) {\n                widthDiff += this.state.leftSidebarWidth * (this.state.showLeftSidebar ? 1 : -1)\n            }\n\n            if (!this.window.isMaximized() && !this.window.isMinimized() && !this.window.isFullScreen()) {\n                this.window.setContentSize(width + widthDiff, height)\n            }\n        }\n\n        // Handle zoom factor\n\n        if (prevState.zoomFactor !== this.state.zoomFactor) {\n            this.window.webContents.setZoomFactor(this.state.zoomFactor)\n        }\n    }\n\n    updateSettingState(key = null) {\n        let data = {\n            'app.zoom_factor': 'zoomFactor',\n            'view.show_menubar': 'showMenuBar',\n            'view.show_coordinates': 'showCoordinates',\n            'view.show_move_colorization': 'showMoveColorization',\n            'view.show_next_moves': 'showNextMoves',\n            'view.show_siblings': 'showSiblings',\n            'view.fuzzy_stone_placement': 'fuzzyStonePlacement',\n            'view.animated_stone_placement': 'animatedStonePlacement',\n            'graph.grid_size': 'graphGridSize',\n            'graph.node_size': 'graphNodeSize',\n            'engines.list': 'engines',\n            'scoring.method': 'scoringMethod'\n        }\n\n        if (key == null) {\n            for (let k in data) this.updateSettingState(k)\n            return\n        }\n\n        if (key in data) {\n            ipcRenderer.send('build-menu', this.state.busy > 0)\n            this.setState({[data[key]]: setting.get(key)})\n        }\n    }\n\n    waitForRender() {\n        return new Promise(resolve => this.setState({}, resolve))\n    }\n\n    // User Interface\n\n    setSidebarWidth(sidebarWidth) {\n        this.setState({sidebarWidth}, () => window.dispatchEvent(new Event('resize')))\n    }\n\n    setLeftSidebarWidth(leftSidebarWidth) {\n        this.setState({leftSidebarWidth}, () => window.dispatchEvent(new Event('resize')))\n    }\n\n    setMode(mode) {\n        let stateChange = {mode}\n\n        if (['scoring', 'estimator'].includes(mode)) {\n            // Guess dead stones\n\n            let {treePosition} = this.state\n            let iterations = setting.get('score.estimator_iterations')\n\n            deadstones.guess(gametree.getBoard(...treePosition).arrangement, {\n                finished: mode === 'scoring',\n                iterations\n            }).then(result => {\n                this.setState({deadStones: result})\n            })\n        }\n\n        this.setState(stateChange)\n        this.events.emit('modeChange')\n    }\n\n    openDrawer(drawer) {\n        this.setState({openDrawer: drawer})\n    }\n\n    closeDrawer() {\n        this.openDrawer(null)\n    }\n\n    setBusy(busy) {\n        let diff = busy ? 1 : -1;\n        this.setState(s => ({busy: Math.max(s.busy + diff, 0)}))\n    }\n\n    showInfoOverlay(text) {\n        this.setState({\n            infoOverlayText: text,\n            showInfoOverlay: true\n        })\n    }\n\n    hideInfoOverlay() {\n        this.setState({showInfoOverlay: false})\n    }\n\n    flashInfoOverlay(text) {\n        this.showInfoOverlay(text)\n        setTimeout(() => this.hideInfoOverlay(), setting.get('infooverlay.duration'))\n    }\n\n    clearConsole() {\n        this.setState({consoleLog: []})\n    }\n\n    // File Management\n\n    getEmptyGameTree() {\n        let handicap = setting.get('game.default_handicap')\n        let size = setting.get('game.default_board_size').toString().split(':').map(x => +x)\n        let [width, height] = [size[0], size.slice(-1)[0]]\n        let handicapStones = new Board(width, height).getHandicapPlacement(handicap).map(sgf.stringifyVertex)\n\n        let sizeInfo = width === height ? width.toString() : `${width}:${height}`\n        let handicapInfo = handicapStones.length > 0 ? `HA[${handicap}]AB[${handicapStones.join('][')}]` : ''\n        let date = new Date()\n        let dateInfo = sgf.stringifyDates([[date.getFullYear(), date.getMonth() + 1, date.getDate()]])\n\n        return sgf.parse(`\n            (;GM[1]FF[4]CA[UTF-8]AP[${this.appName}:${this.version}]\n            KM[${setting.get('game.default_komi')}]\n            SZ[${sizeInfo}]DT[${dateInfo}]\n            ${handicapInfo})\n        `, {getId: helper.getId})[0]\n    }\n\n    async newFile({playSound = false, showInfo = false, suppressAskForSave = false} = {}) {\n        if (!suppressAskForSave && !this.askForSave()) return\n\n        if (showInfo && this.state.openDrawer === 'info') this.closeDrawer()\n        this.setMode('play')\n\n        this.clearUndoPoint()\n        this.detachEngines()\n        this.clearConsole()\n\n        await this.waitForRender()\n\n        let emptyTree = this.getEmptyGameTree()\n\n        this.setState({\n            openDrawer: showInfo ? 'info' : null,\n            gameTrees: [emptyTree],\n            representedFilename: null\n        })\n\n        this.setCurrentTreePosition(emptyTree, 0)\n\n        this.treeHash = this.generateTreeHash()\n        this.fileHash = this.generateFileHash()\n\n        if (playSound) sound.playNewGame()\n    }\n\n    async loadFile(file = null, {suppressAskForSave = false} = {}) {\n        if (!suppressAskForSave && !this.askForSave()) return\n\n        if (!file) {\n            dialog.showOpenDialog({\n                properties: ['openFile'],\n                filters: [...fileformats.meta, {name: 'All Files', extensions: ['*']}]\n            }, ({result}) => {\n                if (result) file = result[0]\n                if (file) this.loadFile(file, {suppressAskForSave: true})\n            })\n\n            return\n        }\n\n        this.setBusy(true)\n\n        let {extname} = require('path')\n        let extension = extname(file.name).slice(1)\n        let content = await new Promise((resolve, reject) =>\n            fs.readFile(file, (err, content) => err ? reject(err) : resolve(content))\n        )\n\n        let gameTrees = []\n        let success = true\n        let lastProgress = -1\n\n        try {\n            let fileFormatModule = fileformats.getModuleByExtension(extension)\n\n            gameTrees = fileFormatModule.parse(content, evt => {\n                if (evt.progress - lastProgress < 0.1) return\n                this.window.setProgressBar(evt.progress)\n                lastProgress = evt.progress\n            }, true)\n\n            if (gameTrees.length == 0) throw true\n        } catch (err) {\n            dialog.showMessageBox('This file is unreadable.', 'warning')\n            success = false\n        }\n\n        if (success) {\n            await this.loadGameTrees(gameTrees, {suppressAskForSave: true})\n\n            this.setState({representedFilename: file.name})\n            this.fileHash = this.generateFileHash()\n\n            if (setting.get('game.goto_end_after_loading')) {\n                this.goToEnd()\n            }\n        }\n\n        this.setBusy(false)\n    }\n\n    async loadContent(content, extension, {suppressAskForSave = false, ignoreEncoding = false} = {}) {\n        this.setBusy(true)\n\n        let gameTrees = []\n        let success = true\n        let lastProgress = -1\n\n        try {\n            let fileFormatModule = fileformats.getModuleByExtension(extension)\n\n            gameTrees = fileFormatModule.parse(content, evt => {\n                if (evt.progress - lastProgress < 0.1) return\n                this.window.setProgressBar(evt.progress)\n                lastProgress = evt.progress\n            }, ignoreEncoding)\n\n            if (gameTrees.length == 0) throw true\n        } catch (err) {\n            dialog.showMessageBox('This file is unreadable.', 'warning')\n            success = false\n        }\n\n        if (success) {\n            await this.loadGameTrees(gameTrees, {suppressAskForSave})\n        }\n\n        this.setBusy(false)\n    }\n\n    async loadGameTrees(gameTrees, {suppressAskForSave = false} = {}) {\n        if (!suppressAskForSave && !this.askForSave()) return\n\n        this.setBusy(true)\n        if (this.state.openDrawer !== 'gamechooser') this.closeDrawer()\n        this.setMode('play')\n\n        await helper.wait(setting.get('app.loadgame_delay'))\n\n        if (gameTrees.length != 0) {\n            this.clearUndoPoint()\n            this.detachEngines()\n            this.setState({\n                representedFilename: null,\n                gameTrees\n            })\n\n            this.setCurrentTreePosition(gameTrees[0], 0)\n\n            this.treeHash = this.generateTreeHash()\n            this.fileHash = this.generateFileHash()\n        }\n\n        this.setBusy(false)\n\n        if (gameTrees.length > 1) {\n            setTimeout(() => {\n                this.openDrawer('gamechooser')\n            }, setting.get('gamechooser.show_delay'))\n        }\n\n        this.window.setProgressBar(-1)\n        this.events.emit('fileLoad')\n    }\n\n    saveFile(filename = null) {\n        dialog.showSaveDialog({\n            type: 'application/x-go-sgf',\n            name: this.state.representedFilename || 'game.sgf',\n            content: this.getSGF()\n        })\n\n        this.treeHash = this.generateTreeHash()\n        this.fileHash = this.generateFileHash()\n\n        return true\n    }\n\n    getSGF() {\n        let {gameTrees} = this.state\n\n        for (let tree of gameTrees) {\n            Object.assign(tree.nodes[0], {\n                AP: [`${this.appName}:${this.version}`],\n                CA: ['UTF-8']\n            })\n        }\n\n        return sgf.stringify(gameTrees)\n    }\n\n    generateTreeHash() {\n        return this.state.gameTrees.map(tree => gametree.getHash(tree)).join('')\n    }\n\n    generateFileHash() {\n    }\n\n    askForSave() {\n        let hash = this.generateTreeHash()\n\n        if (hash !== this.treeHash) {\n            let answer = dialog.showMessageBox(\n                'Your changes will be lost if you close this file without saving. Do you want to continue?',\n                'warning',\n                ['Save', 'Don’t Save', 'Cancel'], 2\n            )\n\n            if (answer === 0) return true\n            else if (answer === 2) return false\n        }\n\n        return true\n    }\n\n    askForReload() {\n    }\n\n    // Playing\n\n    clickVertex(vertex, {button = 0, ctrlKey = false, x = 0, y = 0} = {}) {\n        this.closeDrawer()\n\n        let [tree, index] = this.state.treePosition\n        let board = gametree.getBoard(tree, index)\n        let node = tree.nodes[index]\n\n        if (typeof vertex == 'string') {\n            vertex = board.coord2vertex(vertex)\n        }\n\n        if (['play', 'autoplay'].includes(this.state.mode)) {\n            if (button === 0) {\n                if (board.get(vertex) === 0) {\n                    this.makeMove(vertex, {sendToEngine: true})\n                } else if (vertex in board.markups\n                && board.markups[vertex][0] === 'point'\n                && setting.get('edit.click_currentvertex_to_remove')) {\n                    this.removeNode(tree, index)\n                }\n            } else if (button === 2) {\n                if (vertex in board.markups && board.markups[vertex][0] === 'point') {\n                    this.openCommentMenu(tree, index, {x, y})\n                }\n            }\n        } else if (this.state.mode === 'edit') {\n            if (ctrlKey) {\n                // Add coordinates to comment\n\n                let coord = board.vertex2coord(vertex)\n                let commentText = node.C ? node.C[0] : ''\n\n                node.C = commentText !== '' ? [commentText.trim() + ' ' + coord] : [coord]\n                return\n            }\n\n            let tool = this.state.selectedTool\n\n            if (button === 2) {\n                // Right mouse click\n\n                if (['stone_1', 'stone_-1'].includes(tool)) {\n                    // Switch stone tool\n\n                    tool = tool === 'stone_1' ? 'stone_-1' : 'stone_1'\n                } else if (['number', 'label'].includes(tool)) {\n                    // Show label editing context menu\n\n                    let click = () => dialog.showInputBox('Enter label text', ({value}) => {\n                        this.useTool('label', vertex, value)\n                    })\n\n                    let template = [{label: '&Edit Label', click}]\n                    helper.popupMenu(template, x, y)\n\n                    return\n                }\n            }\n\n            if (['line', 'arrow'].includes(tool)) {\n                // Remember clicked vertex and pass as an argument the second time\n\n                if (!this.editVertexData || this.editVertexData[0] !== tool) {\n                    this.useTool(tool, vertex)\n                    this.editVertexData = [tool, vertex]\n                } else {\n                    this.useTool(tool, vertex, this.editVertexData[1])\n                    this.editVertexData = null\n                }\n            } else {\n                this.useTool(tool, vertex)\n                this.editVertexData = null\n            }\n        } else if (['scoring', 'estimator'].includes(this.state.mode)) {\n            if (button !== 0 || board.get(vertex) === 0) return\n\n            let {mode, deadStones} = this.state\n            let dead = deadStones.some(v => helper.vertexEquals(v, vertex))\n            let stones = mode === 'estimator' ? board.getChain(vertex) : board.getRelatedChains(vertex)\n\n            if (!dead) {\n                deadStones = [...deadStones, ...stones]\n            } else {\n                deadStones = deadStones.filter(v => !stones.some(w => helper.vertexEquals(v, w)))\n            }\n\n            this.setState({deadStones})\n        } else if (this.state.mode === 'find') {\n            if (button !== 0) return\n\n            if (helper.vertexEquals(this.state.findVertex || [-1, -1], vertex)) {\n                this.setState({findVertex: null})\n            } else {\n                this.setState({findVertex: vertex})\n                this.findMove(1, {vertex, text: this.state.findText})\n            }\n        } else if (this.state.mode === 'guess') {\n            if (button !== 0) return\n\n            let tp = gametree.navigate(...this.state.treePosition, 1)\n            if (!tp) return this.setMode('play')\n\n            let nextNode = tp[0].nodes[tp[1]]\n            if (!('B' in nextNode || 'W' in nextNode)) return this.setMode('play')\n\n            let nextVertex = sgf.parseVertex(nextNode['B' in nextNode ? 'B' : 'W'][0])\n            let board = gametree.getBoard(...this.state.treePosition)\n            if (!board.hasVertex(nextVertex)) return this.setMode('play')\n\n            if (helper.vertexEquals(vertex, nextVertex)) {\n                this.makeMove(vertex, {player: 'B' in nextNode ? 1 : -1})\n            } else {\n                if (board.get(vertex) !== 0\n                || this.state.blockedGuesses.some(v => helper.vertexEquals(v, vertex)))\n                    return\n\n                let blocked = []\n                let [, i] = vertex.map((x, i) => Math.abs(x - nextVertex[i]))\n                    .reduce(([max, i], x, j) => x > max ? [x, j] : [max, i], [-Infinity, -1])\n\n                for (let x = 0; x < board.width; x++) {\n                    for (let y = 0; y < board.height; y++) {\n                        let z = i === 0 ? x : y\n                        if (Math.abs(z - vertex[i]) < Math.abs(z - nextVertex[i]))\n                            blocked.push([x, y])\n                    }\n                }\n\n                let {blockedGuesses} = this.state\n                blockedGuesses.push(...blocked)\n                this.setState({blockedGuesses})\n            }\n        }\n\n        this.events.emit('vertexClick')\n    }\n\n    makeMove(vertex, {player = null, clearUndoPoint = true, sendToEngine = false} = {}) {\n        if (!['play', 'autoplay', 'guess'].includes(this.state.mode)) {\n            this.closeDrawer()\n            this.setMode('play')\n        }\n\n        let [tree, index] = this.state.treePosition\n        let board = gametree.getBoard(tree, index)\n\n        if (typeof vertex == 'string') {\n            vertex = board.coord2vertex(vertex)\n        }\n\n        let pass = !board.hasVertex(vertex)\n        if (!pass && board.get(vertex) !== 0) return\n\n        let prev = gametree.navigate(tree, index, -1)\n        if (!player) player = this.inferredState.currentPlayer\n        let color = player > 0 ? 'B' : 'W'\n        let capture = false, suicide = false, ko = false\n        let createNode = true\n\n        if (!pass) {\n            // Check for ko\n\n            if (prev && setting.get('game.show_ko_warning')) {\n                let hash = board.makeMove(player, vertex).getPositionHash()\n\n                ko = prev[0].nodes[prev[1]].board.getPositionHash() == hash\n\n                if (ko && dialog.showMessageBox(\n                    ['You are about to play a move which repeats a previous board position.',\n                    'This is invalid in some rulesets. Do you want to play anyway?'].join('\\n'),\n                    'info',\n                    ['Play Anyway', 'Don’t Play'], 1\n                ) != 0) return\n            }\n\n            let vertexNeighbors = board.getNeighbors(vertex)\n\n            // Check for suicide\n\n            capture = vertexNeighbors\n                .some(v => board.get(v) == -player && board.getLiberties(v).length == 1)\n\n            suicide = !capture\n            && vertexNeighbors.filter(v => board.get(v) == player)\n                .every(v => board.getLiberties(v).length == 1)\n            && vertexNeighbors.filter(v => board.get(v) == 0).length == 0\n\n            if (suicide && setting.get('game.show_suicide_warning')) {\n                if (dialog.showMessageBox(\n                    ['You are about to play a suicide move.',\n                    'This is invalid in some rulesets. Do you want to play anyway?'].join('\\n'),\n                    'info',\n                    ['Play Anyway', 'Don’t Play'], 1\n                ) != 0) return\n            }\n\n            // Animate board\n\n            this.setState({animatedVertex: vertex})\n        }\n\n        // Update data\n\n        let nextTreePosition\n\n        if (tree.subtrees.length === 0 && tree.nodes.length - 1 === index) {\n            // Append move\n\n            let node = {}\n            node[color] = [sgf.stringifyVertex(vertex)]\n            tree.nodes.push(node)\n\n            nextTreePosition = [tree, tree.nodes.length - 1]\n        } else {\n            if (index !== tree.nodes.length - 1) {\n                // Search for next move\n\n                let nextNode = tree.nodes[index + 1]\n                let moveExists = color in nextNode\n                    && helper.vertexEquals(sgf.parseVertex(nextNode[color][0]), vertex)\n\n                if (moveExists) {\n                    nextTreePosition = [tree, index + 1]\n                    createNode = false\n                }\n            } else {\n                // Search for variation\n\n                let variations = tree.subtrees.filter(subtree => {\n                    return subtree.nodes.length > 0\n                        && color in subtree.nodes[0]\n                        && helper.vertexEquals(sgf.parseVertex(subtree.nodes[0][color][0]), vertex)\n                })\n\n                if (variations.length > 0) {\n                    nextTreePosition = [variations[0], 0]\n                    createNode = false\n                }\n            }\n\n            if (createNode) {\n                // Create variation\n\n                let updateRoot = tree.parent == null\n                let splitted = gametree.split(tree, index)\n                let newTree = gametree.new()\n                let node = {[color]: [sgf.stringifyVertex(vertex)]}\n\n                newTree.nodes = [node]\n                newTree.parent = splitted\n\n                splitted.subtrees.push(newTree)\n                splitted.current = splitted.subtrees.length - 1\n\n                if (updateRoot) {\n                    let {gameTrees} = this.state\n                    gameTrees[gameTrees.indexOf(tree)] = splitted\n                }\n\n                nextTreePosition = [newTree, 0]\n            }\n        }\n\n        this.setCurrentTreePosition(...nextTreePosition)\n\n        // Play sounds\n\n        if (!pass) {\n            let delay = setting.get('sound.capture_delay_min')\n            delay += Math.floor(Math.random() * (setting.get('sound.capture_delay_max') - delay))\n\n            if (capture || suicide)\n                sound.playCapture(delay)\n\n            sound.playPachi()\n        } else {\n            sound.playPass()\n        }\n\n        // Clear undo point\n\n        if (createNode && clearUndoPoint) this.clearUndoPoint()\n\n        // Enter scoring mode after two consecutive passes\n\n        let enterScoring = false\n\n        if (pass && createNode && prev) {\n            let prevNode = tree.nodes[index]\n            let prevColor = color === 'B' ? 'W' : 'B'\n            let prevPass = prevColor in prevNode && prevNode[prevColor][0] === ''\n\n            if (prevPass) {\n                enterScoring = true\n                this.setMode('scoring')\n            }\n        }\n\n        // Emit event\n\n        this.events.emit('moveMake', {pass, capture, suicide, ko, enterScoring})\n\n        // Send command to engine\n\n        if (sendToEngine && this.attachedEngineControllers.some(x => x != null)) {\n            let passPlayer = pass ? player : null\n            setTimeout(() => this.startGeneratingMoves({passPlayer}), setting.get('gtp.move_delay'))\n        }\n    }\n\n    makeResign({player = null, setUndoPoint = true} = {}) {\n        let {rootTree, currentPlayer} = this.inferredState\n        if (player == null) player = currentPlayer\n        let color = player > 0 ? 'W' : 'B'\n        let rootNode = rootTree.nodes[0]\n\n        if (setUndoPoint) this.setUndoPoint('Undo Resignation')\n        rootNode.RE = [`${color}+Resign`]\n\n        this.makeMove([-1, -1], {player, clearUndoPoint: false})\n        this.makeMainVariation(...this.state.treePosition, {setUndoPoint: false})\n\n        this.events.emit('resign', {player})\n    }\n\n    useTool(tool, vertex, argument = null) {\n        let [tree, index] = this.state.treePosition\n        let {currentPlayer, gameIndex} = this.inferredState\n        let board = gametree.getBoard(tree, index)\n        let node = tree.nodes[index]\n\n        if (typeof vertex == 'string') {\n            vertex = board.coord2vertex(vertex)\n        }\n\n        let data = {\n            cross: 'MA',\n            triangle: 'TR',\n            circle: 'CR',\n            square: 'SQ',\n            number: 'LB',\n            label: 'LB'\n        }\n\n        if (['stone_-1', 'stone_1'].includes(tool)) {\n            if ('B' in node || 'W' in node || gametree.navigate(tree, index, 1)) {\n                // New variation needed\n\n                let updateRoot = tree.parent == null\n                let splitted = gametree.split(tree, index)\n\n                if (splitted != tree || splitted.subtrees.length != 0) {\n                    tree = gametree.new()\n                    tree.parent = splitted\n                    splitted.subtrees.push(tree)\n                }\n\n                node = {PL: currentPlayer > 0 ? ['B'] : ['W']}\n                index = tree.nodes.length\n                tree.nodes.push(node)\n\n                if (updateRoot) {\n                    let {gameTrees} = this.state\n                    gameTrees[gameIndex] = splitted\n                }\n            }\n\n            let sign = tool === 'stone_1' ? 1 : -1\n            let oldSign = board.get(vertex)\n            let properties = ['AW', 'AE', 'AB']\n            let point = sgf.stringifyVertex(vertex)\n\n            for (let prop of properties) {\n                if (!(prop in node)) continue\n\n                // Resolve compressed lists\n\n                if (node[prop].some(x => x.includes(':'))) {\n                    node[prop] = node[prop]\n                        .map(value => sgf.parseCompressedVertices(value).map(sgf.stringifyVertex))\n                        .reduce((list, x) => [...list, x])\n                }\n\n                // Remove residue\n\n                node[prop] = node[prop].filter(x => x !== point)\n                if (node[prop].length === 0) delete node[prop]\n            }\n\n            let prop = oldSign !== sign ? properties[sign + 1] : 'AE'\n\n            if (prop in node) node[prop].push(point)\n            else node[prop] = [point]\n        } else if (['line', 'arrow'].includes(tool)) {\n            let endVertex = argument\n\n            if (!endVertex || helper.vertexEquals(vertex, endVertex)) return\n\n            // Check whether to remove a line\n\n            let toDelete = board.lines.findIndex(x => helper.equals(x.slice(0, 2), [vertex, endVertex]))\n\n            if (toDelete === -1) {\n                toDelete = board.lines.findIndex(x => helper.equals(x.slice(0, 2), [endVertex, vertex]))\n\n                if (toDelete >= 0 && tool !== 'line' && board.lines[toDelete][2]) {\n                    // Do not delete after all\n                    toDelete = -1\n                }\n            }\n\n            // Mutate board first, then apply changes to actual game tree\n\n            if (toDelete >= 0) {\n                board.lines.splice(toDelete, 1)\n            } else {\n                board.lines.push([vertex, endVertex, tool === 'arrow'])\n            }\n\n            node.LN = []\n            node.AR = []\n\n            for (let [v1, v2, arrow] of board.lines) {\n                let [p1, p2] = [v1, v2].map(sgf.stringifyVertex)\n                if (p1 === p2) continue\n\n                node[arrow ? 'AR' : 'LN'].push([p1, p2].join(':'))\n            }\n\n            if (node.LN.length === 0) delete node.LN\n            if (node.AR.length === 0) delete node.AR\n        } else {\n            // Mutate board first, then apply changes to actual game tree\n\n            if (tool === 'number') {\n                if (vertex in board.markups && board.markups[vertex][0] === 'label') {\n                    delete board.markups[vertex]\n                } else {\n                    let number = !node.LB ? 1 : node.LB\n                        .map(x => parseFloat(x.substr(3)))\n                        .filter(x => !isNaN(x))\n                        .sort((a, b) => a - b)\n                        .filter((x, i, arr) => i === 0 || x !== arr[i - 1])\n                        .concat([null])\n                        .findIndex((x, i) => i + 1 !== x) + 1\n\n                    argument = number.toString()\n                    board.markups[vertex] = [tool, number.toString()]\n                }\n            } else if (tool === 'label') {\n                let label = argument\n\n                if (label != null && label.trim() === ''\n                || label == null && vertex in board.markups && board.markups[vertex][0] === 'label') {\n                    delete board.markups[vertex]\n                } else {\n                    if (label == null) {\n                        let alpha = 'ABCDEFGHIJKLMNOPQRSTUVWXYZ'\n                        let letterIndex = Math.max(\n                            !node.LB ? 0 : node.LB\n                                .filter(x => x.length === 4)\n                                .map(x => alpha.indexOf(x[3]))\n                                .filter(x => x >= 0)\n                                .sort((a, b) => a - b)\n                                .filter((x, i, arr) => i === 0 || x !== arr[i - 1])\n                                .concat([null])\n                                .findIndex((x, i) => i !== x),\n                            !node.L ? 0 : node.L.length\n                        )\n\n                        label = alpha[Math.min(letterIndex, alpha.length - 1)]\n                        argument = label\n                    }\n\n                    board.markups[vertex] = [tool, label]\n                }\n            } else {\n                if (vertex in board.markups && board.markups[vertex][0] === tool) {\n                    delete board.markups[vertex]\n                } else {\n                    board.markups[vertex] = [tool, '']\n                }\n            }\n\n            delete node.L\n            for (let id in data) delete node[data[id]]\n\n            // Now apply changes to game tree\n\n            for (let x = 0; x < board.width; x++) {\n                for (let y = 0; y < board.height; y++) {\n                    let v = [x, y]\n                    if (!(v in board.markups)) continue\n\n                    let prop = data[board.markups[v][0]]\n                    let value = sgf.stringifyVertex(v)\n\n                    if (prop === 'LB')\n                        value += ':' + board.markups[v][1]\n\n                    if (prop in node) node[prop].push(value)\n                    else node[prop] = [value]\n                }\n            }\n        }\n\n        this.clearUndoPoint()\n        this.setCurrentTreePosition(tree, index)\n\n        this.events.emit('toolUse', {tool, vertex, argument})\n    }\n\n    // Undo Methods\n\n    setUndoPoint(undoText = 'Undo') {\n        let {treePosition: [tree, index]} = this.state\n        let rootTree = gametree.clone(gametree.getRoot(tree))\n        let level = gametree.getLevel(tree, index)\n\n        this.undoData = [rootTree, level]\n        this.setState({undoable: true, undoText})\n    }\n\n    clearUndoPoint() {\n        this.undoData = null\n        this.setState({undoable: false})\n    }\n\n    undo() {\n        if (!this.state.undoable || !this.undoData) return\n\n        this.setBusy(true)\n\n        setTimeout(() => {\n            let [undoRoot, undoLevel] = this.undoData\n            let {treePosition, gameTrees} = this.state\n\n            gameTrees[this.inferredState.gameIndex] = undoRoot\n            treePosition = gametree.navigate(undoRoot, 0, undoLevel)\n\n            this.setCurrentTreePosition(...treePosition)\n            this.clearUndoPoint()\n            this.setBusy(false)\n        }, setting.get('edit.undo_delay'))\n    }\n\n    // Navigation\n\n    setCurrentTreePosition(tree, index, {clearUndoPoint = true} = {}) {\n        if (['scoring', 'estimator'].includes(this.state.mode))\n            return\n\n        let t = tree\n        while (t.parent != null) {\n            t.parent.current = t.parent.subtrees.indexOf(t)\n            t = t.parent\n        }\n\n        if (clearUndoPoint && t !== gametree.getRoot(this.state.treePosition[0])) {\n            this.clearUndoPoint()\n        }\n\n        this.setState({\n            heatMap: null,\n            blockedGuesses: [],\n            highlightVertices: [],\n            treePosition: [tree, index]\n        })\n\n        this.events.emit('navigate')\n    }\n\n    goStep(step) {\n        let treePosition = gametree.navigate(...this.state.treePosition, step)\n        if (treePosition) this.setCurrentTreePosition(...treePosition)\n    }\n\n    goToMoveNumber(number) {\n        number = +number\n\n        if (isNaN(number)) return\n        if (number < 0) number = 0\n\n        let {treePosition} = this.state\n        let root = gametree.getRoot(...treePosition)\n\n        treePosition = gametree.navigate(root, 0, Math.round(number))\n\n        if (treePosition) this.setCurrentTreePosition(...treePosition)\n        else this.goToEnd()\n    }\n\n    goToNextFork() {\n        let [tree, index] = this.state.treePosition\n\n        if (index !== tree.nodes.length - 1) {\n            this.setCurrentTreePosition(tree, tree.nodes.length - 1)\n        } else if (tree.subtrees.length !== 0) {\n            let subtree = tree.subtrees[tree.current]\n            this.setCurrentTreePosition(subtree, subtree.nodes.length - 1)\n        }\n    }\n\n    goToPreviousFork() {\n        let [tree, index] = this.state.treePosition\n\n        if (tree.parent == null || tree.parent.nodes.length === 0) {\n            if (index != 0) this.setCurrentTreePosition(tree, 0)\n        } else {\n            this.setCurrentTreePosition(tree.parent, tree.parent.nodes.length - 1)\n        }\n    }\n\n    goToComment(step) {\n        let tp = this.state.treePosition\n\n        while (true) {\n            tp = gametree.navigate(...tp, step)\n            if (!tp) break\n\n            let node = tp[0].nodes[tp[1]]\n\n            if (setting.get('sgf.comment_properties').some(p => p in node))\n                break\n        }\n\n        if (tp) this.setCurrentTreePosition(...tp)\n    }\n\n    goToBeginning() {\n        this.setCurrentTreePosition(gametree.getRoot(...this.state.treePosition), 0)\n    }\n\n    goToEnd() {\n        let rootTree = gametree.getRoot(...this.state.treePosition)\n        let tp = gametree.navigate(rootTree, 0, gametree.getCurrentHeight(rootTree) - 1)\n        this.setCurrentTreePosition(...tp)\n    }\n\n    goToSiblingVariation(step) {\n        let [tree, index] = this.state.treePosition\n        if (!tree.parent) return\n\n        step = step < 0 ? -1 : 1\n\n        let mod = tree.parent.subtrees.length\n        let i = (tree.parent.current + mod + step) % mod\n\n        this.setCurrentTreePosition(tree.parent.subtrees[i], 0)\n    }\n\n    goToMainVariation() {\n        let tp = this.state.treePosition\n        let root = gametree.getRoot(...tp)\n\n        while (root.subtrees.length !== 0) {\n            root.current = 0\n            root = root.subtrees[0]\n        }\n\n        if (gametree.onMainTrack(...tp)) {\n            this.setCurrentTreePosition(...tp)\n        } else {\n            let [tree] = tp\n\n            while (!gametree.onMainTrack(tree)) {\n                tree = tree.parent\n            }\n\n            this.setCurrentTreePosition(tree, tree.nodes.length - 1)\n        }\n    }\n\n    goToSiblingGame(step) {\n        let {gameTrees, treePosition} = this.state\n        let [tree, ] = treePosition\n        let index = gameTrees.indexOf(gametree.getRoot(tree))\n        let newIndex = Math.max(0, Math.min(gameTrees.length - 1, index + step))\n\n        this.setCurrentTreePosition(gameTrees[newIndex], 0)\n    }\n\n    // Find Methods\n\n    async findPosition(step, condition) {\n        if (isNaN(step)) step = 1\n        else step = step >= 0 ? 1 : -1\n\n        this.setBusy(true)\n\n        await helper.wait(setting.get('find.delay'))\n\n        let tp = this.state.treePosition\n        let iterator = gametree.makeHorizontalNavigator(...tp)\n\n        while (true) {\n            tp = step >= 0 ? iterator.next() : iterator.prev()\n\n            if (!tp) {\n                let root = this.inferredState.rootTree\n\n                if (step === 1) {\n                    tp = [root, 0]\n                } else {\n                    let sections = gametree.getSection(root, gametree.getHeight(root) - 1)\n                    tp = sections[sections.length - 1]\n                }\n\n                iterator = gametree.makeHorizontalNavigator(...tp)\n            }\n\n            if (helper.vertexEquals(tp, this.state.treePosition) || condition(...tp))\n                break\n        }\n\n        this.setCurrentTreePosition(...tp)\n        this.setBusy(false)\n    }\n\n    async findHotspot(step) {\n        await this.findPosition(step, (tree, index) => 'HO' in tree.nodes[index])\n    }\n\n    async findMove(step, {vertex = null, text = ''}) {\n        if (vertex == null && text.trim() === '') return\n        let point = vertex ? sgf.stringifyVertex(vertex) : null\n\n        await this.findPosition(step, (tree, index) => {\n            let node = tree.nodes[index]\n            let cond = (prop, value) => prop in node\n                && node[prop][0].toLowerCase().includes(value.toLowerCase())\n\n            return (!point || ['B', 'W'].some(x => cond(x, point)))\n                && (!text || cond('C', text) || cond('N', text))\n        })\n    }\n\n    // Node Actions\n\n    getGameInfo(tree) {\n        let root = gametree.getRoot(tree)\n\n        let komi = gametree.getRootProperty(root, 'KM')\n        if (komi != null && !isNaN(komi)) komi = +komi\n        else komi = null\n\n        let size = gametree.getRootProperty(root, 'SZ')\n        if (size == null) {\n            size = [19, 19]\n        } else {\n            let s = size.toString().split(':')\n            size = [+s[0], +s[s.length - 1]]\n        }\n\n        let handicap = ~~gametree.getRootProperty(root, 'HA', 0)\n        handicap = Math.max(1, Math.min(9, handicap))\n        if (handicap === 1) handicap = 0\n\n        let playerNames = ['B', 'W'].map(x =>\n            gametree.getRootProperty(tree, `P${x}`) || gametree.getRootProperty(tree, `${x}T`)\n        )\n\n        let playerRanks = ['BR', 'WR'].map(x => gametree.getRootProperty(root, x))\n\n        return {\n            playerNames,\n            playerRanks,\n            blackName: playerNames[0],\n            blackRank: playerRanks[0],\n            whiteName: playerNames[1],\n            whiteRank: playerRanks[1],\n            gameName: gametree.getRootProperty(root, 'GN'),\n            eventName: gametree.getRootProperty(root, 'EV'),\n            date: gametree.getRootProperty(root, 'DT'),\n            result: gametree.getRootProperty(root, 'RE'),\n            komi,\n            handicap,\n            size\n        }\n    }\n\n    setGameInfo(tree, data) {\n        let root = gametree.getRoot(tree)\n        let node = root.nodes[0]\n\n        if ('size' in data) {\n            // Update board size\n\n            if (data.size) {\n                let value = data.size\n                value = value.map((x, i) => isNaN(x) || !x ? 19 : Math.min(25, Math.max(2, x)))\n\n                if (value[0] === value[1]) value = value[0]\n                else value = value.join(':')\n\n                setting.set('game.default_board_size', value)\n                node.SZ = [value]\n            } else {\n                delete node.SZ\n            }\n        }\n\n        let props = {\n            blackName: 'PB',\n            blackRank: 'BR',\n            whiteName: 'PW',\n            whiteRank: 'WR',\n            gameName: 'GN',\n            eventName: 'EV',\n            date: 'DT',\n            result: 'RE',\n            komi: 'KM',\n            handicap: 'HA'\n        }\n\n        for (let key in props) {\n            if (!(key in data)) continue\n\n            let value = data[key]\n\n            if (value && value.toString().trim() !== '') {\n                if (key === 'komi') {\n                    if (isNaN(value)) value = 0\n\n                    setting.set('game.default_komi', value)\n                } else if (key === 'handicap') {\n                    let board = gametree.getBoard(root, 0)\n                    let stones = board.getHandicapPlacement(+value)\n\n                    value = stones.length\n                    setting.set('game.default_handicap', value)\n\n                    if (value <= 1) {\n                        delete node[props[key]]\n                        delete node.AB\n                        continue\n                    }\n\n                    node.AB = stones.map(sgf.stringifyVertex)\n                }\n\n                node[props[key]] = [value]\n            } else {\n                delete node[props[key]]\n            }\n        }\n    }\n\n    getPlayer(tree, index) {\n        let node = tree.nodes[index]\n\n        return 'PL' in node ? (node.PL[0] == 'W' ? -1 : 1)\n            : 'B' in node || 'HA' in node && +node.HA[0] >= 1 ? -1\n            : 1\n    }\n\n    setPlayer(tree, index, sign) {\n        let node = tree.nodes[index]\n        let intendedSign = 'B' in node || 'HA' in node && +node.HA[0] >= 1 ? -1 : +('W' in node)\n\n        if (intendedSign === sign || sign === 0) {\n            delete node.PL\n        } else {\n            node.PL = [sign > 0 ? 'B' : 'W']\n        }\n\n        this.clearUndoPoint()\n    }\n\n    getComment(tree, index) {\n        let node = tree.nodes[index]\n\n        return {\n            title: 'N' in node ? node.N[0].trim() : null,\n            comment: 'C' in node ? node.C[0] : null,\n            hotspot: 'HO' in node,\n            moveAnnotation: 'BM' in node ? 'BM'\n                : 'TE' in node ? 'TE'\n                : 'DO' in node ? 'DO'\n                : 'IT' in node ? 'IT'\n                : null,\n            positionAnnotation: 'UC' in node ? 'UC'\n                : 'GW' in node ? 'GW'\n                : 'DM' in node ? 'DM'\n                : 'GB' in node ? 'GB'\n                : null\n        }\n    }\n\n    setComment(tree, index, data) {\n        let node = tree.nodes[index]\n\n        for (let [key, prop] of [['title', 'N'], ['comment', 'C']]) {\n            if (key in data) {\n                if (data[key] && data[key].trim() !== '') node[prop] = [data[key]]\n                else delete node[prop]\n            }\n        }\n\n        if ('hotspot' in data) {\n            if (data.hotspot) node.HO = [1]\n            else delete node.HO\n        }\n\n        let clearProperties = properties => properties.forEach(p => delete node[p])\n\n        if ('moveAnnotation' in data) {\n            let moveProps = {'BM': 1, 'DO': '', 'IT': '', 'TE': 1}\n\n            clearProperties(Object.keys(moveProps))\n\n            if (data.moveAnnotation != null)\n                node[data.moveAnnotation] = [moveProps[data.moveAnnotation]]\n        }\n\n        if ('positionAnnotation' in data) {\n            let positionProps = {'UC': 1, 'GW': 1, 'GB': 1, 'DM': 1}\n\n            clearProperties(Object.keys(positionProps))\n\n            if (data.positionAnnotation != null)\n                node[data.positionAnnotation] = [positionProps[data.positionAnnotation]]\n        }\n\n        this.clearUndoPoint()\n    }\n\n    rotateBoard(anticlockwise) {\n        let root = gametree.getRoot(this.state.treePosition[0])\n        let trees = gametree.getTreesRecursive(root)\n        let info = this.getGameInfo(root)\n\n        for (let tree of trees) {\n            for (let node of tree.nodes) {\n                rotation.rotateNode(node, info.size[0], info.size[1], anticlockwise)\n                node.board = null\n            }\n        }\n\n        if (info.size[1] !== info.size[0]) {\n            this.setGameInfo(root, {size: [info.size[1], info.size[0]]})\n        }\n    }\n\n    copyVariation(tree, index) {\n        let clone = gametree.clone(tree)\n        if (index != 0) gametree.split(clone, index - 1)\n\n        this.copyVariationData = clone\n    }\n\n    cutVariation(tree, index, {setUndoPoint = true} = {}) {\n        if (setUndoPoint) this.setUndoPoint('Undo Cut Variation')\n\n        this.copyVariation(tree, index)\n        this.removeNode(tree, index, {\n            suppressConfirmation: true,\n            setUndoPoint: false\n        })\n    }\n\n    pasteVariation(tree, index, {setUndoPoint = true} = {}) {\n        if (this.copyVariationData == null) return\n\n        if (setUndoPoint) this.setUndoPoint('Undo Paste Variation')\n        this.closeDrawer()\n        this.setMode('play')\n\n        let updateRoot = !tree.parent\n        let oldLength = tree.nodes.length\n        let splitted = gametree.split(tree, index)\n        let copied = gametree.clone(this.copyVariationData)\n\n        copied.parent = splitted\n        splitted.subtrees.push(copied)\n\n        if (updateRoot) {\n            let {gameTrees} = this.state\n            gameTrees[this.inferredState.gameIndex] = splitted\n            this.setState({gameTrees})\n        }\n\n        if (splitted.subtrees.length === 1) {\n            gametree.reduce(splitted)\n            this.setCurrentTreePosition(splitted, oldLength)\n        } else {\n            this.setCurrentTreePosition(copied, 0)\n        }\n    }\n\n    flattenVariation(tree, index, {setUndoPoint = true} = {}) {\n        if (setUndoPoint) this.setUndoPoint('Undo Flatten')\n        this.closeDrawer()\n        this.setMode('play')\n\n        let {gameTrees} = this.state\n        let {rootTree, gameIndex} = this.inferredState\n        let board = gametree.getBoard(tree, index)\n        let rootNode = rootTree.nodes[0]\n        let inherit = ['BR', 'BT', 'DT', 'EV', 'GN', 'GC', 'PB', 'PW', 'RE', 'SO', 'WT', 'WR']\n\n        let clone = gametree.clone(tree)\n        if (index !== 0) gametree.split(clone, index - 1)\n        let node = clone.nodes[0]\n\n        node.AB = []\n        node.AW = []\n        delete node.AE\n        delete node.B\n        delete node.W\n\n        clone.parent = null\n        inherit.forEach(x => x in rootNode ? node[x] = rootNode[x] : null)\n\n        for (let x = 0; x < board.width; x++) {\n            for (let y = 0; y < board.height; y++) {\n                let sign = board.get([x, y])\n                if (sign == 0) continue\n\n                node[sign > 0 ? 'AB' : 'AW'].push(sgf.stringifyVertex([x, y]))\n            }\n        }\n\n        if (node.AB.length === 0) delete node.AB\n        if (node.AW.length === 0) delete node.AW\n\n        gameTrees[gameIndex] = clone\n        this.setState({gameTrees})\n        this.setCurrentTreePosition(clone, 0, {clearUndoPoint: false})\n    }\n\n    makeMainVariation(tree, index, {setUndoPoint = true} = {}) {\n        if (setUndoPoint) this.setUndoPoint('Restore Main Variation')\n        this.closeDrawer()\n        this.setMode('play')\n\n        let t = tree\n\n        while (t.parent != null) {\n            t.parent.subtrees.splice(t.parent.subtrees.indexOf(t), 1)\n            t.parent.subtrees.unshift(t)\n            t.parent.current = 0\n\n            t = t.parent\n        }\n\n        t = tree\n\n        while (t.subtrees.length !== 0) {\n            let [x] = t.subtrees.splice(t.current, 1)\n            t.subtrees.unshift(x)\n            t.current = 0\n\n            t = x\n        }\n\n        this.setCurrentTreePosition(tree, index)\n    }\n\n    shiftVariation(tree, index, step, {setUndoPoint = true} = {}) {\n        if (!tree.parent) return\n\n        if (setUndoPoint) this.setUndoPoint('Undo Shift Variation')\n        this.closeDrawer()\n        this.setMode('play')\n\n        let subtrees = tree.parent.subtrees\n        let m = subtrees.length\n        let i = subtrees.indexOf(tree)\n        let iNew = ((i + step) % m + m) % m\n\n        subtrees.splice(i, 1)\n        subtrees.splice(iNew, 0, tree)\n\n        this.setCurrentTreePosition(...this.state.treePosition)\n    }\n\n    removeNode(tree, index, {suppressConfirmation = false, setUndoPoint = true} = {}) {\n        if (!tree.parent && index === 0) {\n            dialog.showMessageBox('The root node cannot be removed.', 'warning')\n            return\n        }\n\n        if (suppressConfirmation !== true\n        && setting.get('edit.show_removenode_warning')\n        && dialog.showMessageBox(\n            'Do you really want to remove this node?',\n            'warning',\n            ['Remove Node', 'Cancel'], 1\n        ) === 1) return\n\n        if (setUndoPoint) this.setUndoPoint('Undo Remove Node')\n        this.closeDrawer()\n        this.setMode('play')\n\n        // Remove node\n\n        let prev = gametree.navigate(tree, index, -1)\n\n        if (index !== 0) {\n            tree.nodes.splice(index, tree.nodes.length)\n            tree.current = null\n            tree.subtrees.length = 0\n        } else {\n            let parent = tree.parent\n            let i = parent.subtrees.indexOf(tree)\n\n            parent.subtrees.splice(i, 1)\n            if (parent.current >= 1) parent.current--\n            gametree.reduce(parent)\n        }\n\n        if (!prev) prev = this.state.treePosition\n        this.setCurrentTreePosition(...prev)\n    }\n\n    removeOtherVariations(tree, index, {suppressConfirmation = false, setUndoPoint = true} = {}) {\n        if (suppressConfirmation !== true\n        && setting.get('edit.show_removeothervariations_warning')\n        && dialog.showMessageBox(\n            'Do you really want to remove all other variations?',\n            'warning',\n            ['Remove Variations', 'Cancel'], 1\n        ) == 1) return\n\n        // Save undo information\n\n        if (setUndoPoint) this.setUndoPoint('Undo Remove Other Variations')\n        this.closeDrawer()\n        this.setMode('play')\n\n        // Remove all subsequent variations\n\n        let t = tree\n\n        while (t.subtrees.length != 0) {\n            t.subtrees = [t.subtrees[t.current]]\n            t.current = 0\n\n            t = t.subtrees[0]\n        }\n\n        // Remove all precedent variations\n\n        t = tree\n\n        while (t.parent != null) {\n            t.parent.subtrees = [t]\n            t.parent.current = 0\n\n            t = t.parent\n        }\n\n        this.setCurrentTreePosition(tree, index)\n    }\n\n    // Menus\n\n    openNodeMenu(tree, index, options = {}) {\n        if (this.state.mode === 'scoring') return\n\n        let template = [\n            {\n                label: 'C&opy Variation',\n                click: () => this.copyVariation(tree, index)\n            },\n            {\n                label: 'C&ut Variation',\n                click: () => this.cutVariation(tree, index)\n            },\n            {\n                label: '&Paste Variation',\n                click: () => this.pasteVariation(tree, index)\n            },\n            {type: 'separator'},\n            {\n                label: 'Make &Main Variation',\n                click: () => this.makeMainVariation(tree, index)\n            },\n            {\n                label: \"Shift &Left\",\n                click: () => this.shiftVariation(tree, index, -1)\n            },\n            {\n                label: \"Shift Ri&ght\",\n                click: () => this.shiftVariation(tree, index, 1)\n            },\n            {type: 'separator'},\n            {\n                label: '&Flatten',\n                click: () => this.flattenVariation(tree, index)\n            },\n            {\n                label: '&Remove Node',\n                click: () => this.removeNode(tree, index)\n            },\n            {\n                label: 'Remove &Other Variations',\n                click: () => this.removeOtherVariations(tree, index)\n            }\n        ]\n\n        helper.popupMenu(template, options.x, options.y)\n    }\n\n    openCommentMenu(tree, index, options = {}) {\n        let node = tree.nodes[index]\n\n        let template = [\n            {\n                label: '&Clear Annotations',\n                click: () => {\n                    this.setComment(tree, index, {positionAnnotation: null, moveAnnotation: null})\n                }\n            },\n            {type: 'separator'},\n            {\n                label: 'Good for &Black',\n                type: 'checkbox',\n                data: {positionAnnotation: 'GB'}\n            },\n            {\n                label: '&Unclear Position',\n                type: 'checkbox',\n                data: {positionAnnotation: 'UC'}\n            },\n            {\n                label: '&Even Position',\n                type: 'checkbox',\n                data: {positionAnnotation: 'DM'}\n            },\n            {\n                label: 'Good for &White',\n                type: 'checkbox',\n                data: {positionAnnotation: 'GW'}\n            }\n        ]\n\n        if ('B' in node || 'W' in node) {\n            template.push(\n                {type: 'separator'},\n                {\n                    label: '&Good Move',\n                    type: 'checkbox',\n                    data: {moveAnnotation: 'TE'}\n                },\n                {\n                    label: '&Interesting Move',\n                    type: 'checkbox',\n                    data: {moveAnnotation: 'IT'}\n                },\n                {\n                    label: '&Doubtful Move',\n                    type: 'checkbox',\n                    data: {moveAnnotation: 'DO'}\n                },\n                {\n                    label: 'B&ad Move',\n                    type: 'checkbox',\n                    data: {moveAnnotation: 'BM'}\n                }\n            )\n        }\n\n        template.push(\n            {type: 'separator'},\n            {\n                label: '&Hotspot',\n                type: 'checkbox',\n                data: {hotspot: true}\n            }\n        )\n\n        for (let item of template) {\n            if (!('data' in item)) continue\n\n            let [key] = Object.keys(item.data)\n            let prop = key === 'hotspot' ? 'HO' : item.data[key]\n\n            item.checked = prop in node\n            if (item.checked) item.data[key] = null\n\n            item.click = () => this.setComment(tree, index, item.data)\n        }\n\n        helper.popupMenu(template, options.x, options.y)\n    }\n\n    // GTP Engines\n\n    attachEngines(...engines) {\n    }\n\n    detachEngines() {\n    }\n\n    suspendEngines() {\n    }\n\n    async handleCommandSent({controller, command, getResponse}) {\n    }\n\n    async syncEngines({passPlayer = null} = {}) {\n    }\n\n    async startGeneratingMoves({passPlayer = null, followUp = false} = {}) {\n    }\n\n    stopGeneratingMoves() {\n    }\n\n    // Render\n\n    render(_, state) {\n        // Calculate some inferred values\n\n        let rootTree = gametree.getRoot(...state.treePosition)\n        let scoreBoard, areaMap\n\n        if (['scoring', 'estimator'].includes(state.mode)) {\n            // Calculate area map\n\n            scoreBoard = gametree.getBoard(...state.treePosition).clone()\n\n            for (let vertex of state.deadStones) {\n                let sign = scoreBoard.get(vertex)\n                if (sign === 0) continue\n\n                scoreBoard.captures[sign > 0 ? 1 : 0]++\n                scoreBoard.set(vertex, 0)\n            }\n\n            areaMap = state.mode === 'estimator'\n                ? influence.map(scoreBoard.arrangement, {discrete: true})\n                : influence.areaMap(scoreBoard.arrangement)\n        }\n\n        this.inferredState = {\n            showSidebar: state.showGameGraph || state.showCommentBox,\n            showLeftSidebar: state.showConsole,\n            rootTree,\n            gameIndex: state.gameTrees.indexOf(rootTree),\n            gameInfo: this.getGameInfo(rootTree),\n            currentPlayer: this.getPlayer(...state.treePosition),\n            scoreBoard,\n            areaMap\n        }\n\n        state = Object.assign(state, this.inferredState)\n\n        return h('section',\n            {\n                class: classNames({\n                    leftsidebar: state.showLeftSidebar,\n                    sidebar: state.showSidebar,\n                    [state.mode]: true\n                })\n            },\n\n            h(ThemeManager),\n            h(MainView, state),\n            h(LeftSidebar, state),\n            h(Sidebar, state),\n            h(DrawerManager, state),\n\n            h(InputBox, {\n                text: state.inputBoxText,\n                show: state.showInputBox,\n                onSubmit: state.onInputBoxSubmit,\n                onCancel: state.onInputBoxCancel\n            }),\n\n            h(BusyScreen, {show: state.busy > 0}),\n            h(InfoOverlay, {text: state.infoOverlayText, show: state.showInfoOverlay})\n        )\n    }\n}\n\n// Render\n\nrender(h(App), document.body)\n","const {remote, ipcRenderer} = require('electron')\nconst {h, Component} = require('preact')\n\nconst setting = remote.require('./setting')\n\nclass BusyScreen extends Component {\n    componentWillReceiveProps({show}) {\n        if (show === this.props.show) return\n\n        clearTimeout(this.busyId)\n\n        if (show) {\n            ipcRenderer.send('build-menu', true)\n            this.setState({show: true})\n            document.activeElement.blur()\n        } else {\n            ipcRenderer.send('build-menu')\n            let delay = setting.get('app.hide_busy_delay')\n            this.busyId = setTimeout(() => this.setState({show: false}), delay)\n        }\n    }\n\n    render(_, {show}) {\n        return h('section', {\n            id: 'busy',\n            style: {display: show ? 'block' : 'none'}\n        })\n    }\n}\n\nmodule.exports = BusyScreen\n","const {remote} = require('electron')\nconst {h, Component} = require('preact')\nconst classNames = require('classnames')\nconst sgf = require('@sabaki/sgf')\n\nconst MarkdownContentDisplay = require('./MarkdownContentDisplay')\n\nconst boardmatcher = require('../modules/boardmatcher')\nconst gametree = require('../modules/gametree')\nconst helper = require('../modules/helper')\nconst setting = remote.require('./setting')\nconst Board = require('../modules/board')\n\nclass CommentTitle extends Component {\n    constructor() {\n        super()\n\n        this.handleEditButtonClick = () => sabaki.setMode('edit')\n    }\n\n    shouldComponentUpdate({treePosition, moveAnnotation, positionAnnotation, title}) {\n        let [tree, index] = treePosition\n\n        return title !== this.props.title\n            // First node\n            || !tree.parent && index === 0\n            // Last node\n            || tree.subtrees.length === 0 && index === tree.nodes.length - 1\n            // Other data changed\n            || treePosition !== this.props.treePosition\n            || !helper.vertexEquals(moveAnnotation, this.props.moveAnnotation)\n            || !helper.vertexEquals(positionAnnotation, this.props.positionAnnotation)\n    }\n\n    getCurrentMoveInterpretation() {\n        let {treePosition: [tree, index], board} = this.props\n        let node = tree.nodes[index]\n\n        // Determine root node\n\n        if (!tree.parent && index === 0) {\n            let result = []\n\n            if ('EV' in node) result.push(node.EV[0])\n            if ('GN' in node) result.push(node.GN[0])\n\n            result = result.filter(x => x.trim() !== '').join(' — ')\n            if (result !== '')\n                return result\n\n            let today = new Date()\n            if (today.getDate() === 25 && today.getMonth() === 3)\n                return 'Happy Birthday, Sabaki!'\n        }\n\n        // Determine end of main variation and show game result\n\n        if (tree.subtrees.length === 0\n        && index === tree.nodes.length - 1\n        && gametree.onMainTrack(tree)) {\n            let rootNode = gametree.getRoot(tree).nodes[0]\n\n            if ('RE' in rootNode && rootNode.RE[0].trim() !== '')\n                return 'Result: ' + rootNode.RE[0]\n        }\n\n        // Determine capture\n\n        let ptp = gametree.navigate(tree, index, -1)\n\n        if (ptp) {\n            let prevBoard = ptp[0].nodes[ptp[1]].board || gametree.getBoard(...ptp)\n\n            if (!helper.vertexEquals(prevBoard.captures, board.captures))\n                return 'Take'\n        }\n\n        // Get current vertex\n\n        let vertex\n\n        if ('B' in node && node.B[0] !== '')\n            vertex = sgf.parseVertex(node.B[0])\n        else if ('W' in node && node.W[0] !== '')\n            vertex = sgf.parseVertex(node.W[0])\n        else if ('W' in node || 'B' in node)\n            return 'Pass'\n        else\n            return ''\n\n        return boardmatcher.getMoveInterpretation(board, vertex) || ''\n    }\n\n    render({\n        moveAnnotation: [ma, mv],\n        positionAnnotation: [pa, pv],\n        title\n    }) {\n        let moveData = {\n            '-1': ['Bad move', 'badmove'],\n            '0': ['Doubtful move', 'doubtfulmove'],\n            '1': ['Interesting move', 'interestingmove'],\n            '2': ['Good move', 'goodmove']\n        }\n\n        if (mv > 1) {\n            for (let s in moveData) {\n                moveData[s][0] = 'Very ' + moveData[s][0].toLowerCase()\n            }\n        }\n\n        let positionData = {\n            '-1': ['Good for white', 'white'],\n            '0': ['Even position', 'balance'],\n            '1': ['Good for black', 'black'],\n            '-2': ['Unclear position', 'unclear']\n        }\n\n        if (pv > 1) {\n            for (let s in positionData) {\n                positionData[s][0] = 'Very ' + positionData[s][0].toLowerCase()\n            }\n        }\n\n        let showMoveInterpretation = setting.get('comments.show_move_interpretation')\n\n        return h('p',\n            {\n                class: classNames({\n                    header: true,\n                    movestatus: ma !== null,\n                    positionstatus: pa !== null\n                })\n            },\n\n            h('img', {\n                width: 16,\n                height: 16,\n                class: 'positionstatus',\n                title: pa in positionData ? positionData[pa][0] : '',\n                src: pa in positionData ? `/static/game/img/ui/${positionData[pa][1]}.svg` : ''\n            }),\n\n            h('img', {\n                width: 16,\n                height: 16,\n                class: 'movestatus',\n                title: ma in moveData ? moveData[ma][0] : '',\n                src: ma in moveData ? `/static/game/img/ui/${moveData[ma][1]}.svg` : ''\n            }),\n\n            h('img', {\n                src: '/static/game/node_modules/octicons/build/svg/pencil.svg',\n                class: 'edit-button',\n                title: 'Edit',\n                width: 16,\n                height: 16,\n                onClick: this.handleEditButtonClick\n            }),\n\n            h('span', {}, helper.typographer(\n                title !== '' ? title\n                : showMoveInterpretation ? this.getCurrentMoveInterpretation()\n                : ''\n            ))\n        )\n    }\n}\n\nclass CommentText extends Component {\n    shouldComponentUpdate({comment}) {\n        return comment !== this.props.comment\n    }\n\n    render({comment}) {\n        return h('div',\n            {\n                ref: el => this.element = el,\n                class: 'comment'\n            },\n\n            h(MarkdownContentDisplay, {source: comment})\n        )\n    }\n}\n\nclass CommentBox extends Component {\n    constructor(props) {\n        super()\n\n        this.state = {\n            board: new Board()\n        }\n\n        this.handleCommentInput = () => {\n            let {onCommentInput = helper.noop} = this.props\n\n            onCommentInput({\n                title: this.titleInputElement.value,\n                comment: this.textareaElement.value\n            })\n        }\n\n        this.handleMenuButtonClick = () => {\n            let {left, bottom} = this.menuButtonElement.getBoundingClientRect()\n\n            sabaki.openCommentMenu(...this.props.treePosition, {\n                x: Math.round(left),\n                y: Math.round(bottom)\n            })\n        }\n    }\n\n    shouldComponentUpdate({showCommentBox, height}) {\n        return height !== this.props.height || showCommentBox && !this.dirty\n    }\n\n    componentWillReceiveProps({treePosition, mode}) {\n        let treePositionChanged = treePosition !== this.props.treePosition\n\n        if (mode === 'edit') {\n            this.element.scrollTop = 0\n            if (treePositionChanged) this.textareaElement.scrollTop = 0\n\n            return\n        }\n\n        // Debounce rendering\n\n        this.dirty = true\n\n        clearTimeout(this.updateId)\n        this.updateId = setTimeout(() => {\n            this.dirty = false\n\n            if (treePositionChanged) {\n                this.setState({\n                    board: gametree.getBoard(...this.props.treePosition)\n                })\n\n                this.element.scrollTop = 0\n            } else {\n                this.setState(this.state)\n            }\n        }, setting.get('graph.delay'))\n    }\n\n    render({\n        treePosition,\n        height,\n        sidebarSplitTransition,\n        moveAnnotation,\n        positionAnnotation,\n        title,\n        comment,\n\n        onResizerMouseDown = helper.noop,\n        onLinkClick = helper.noop,\n        onCoordinateMouseEnter = helper.noop,\n        onCoordinateMouseLeave = helper.noop\n    }, {\n        board\n    }) {\n        return h('section',\n            {\n                ref: el => this.element = el,\n                id: 'properties',\n                style: {\n                    transition: sidebarSplitTransition ? null : 'none',\n                    height: height + '%'\n                }\n            },\n\n            h('div', {\n                class: 'horizontalresizer',\n                onMouseDown: onResizerMouseDown\n            }),\n\n            h('div', {class: 'inner'},\n                h(CommentTitle, {\n                    board,\n                    treePosition,\n                    moveAnnotation,\n                    positionAnnotation,\n                    title\n                }),\n\n                h(CommentText, {\n                    comment,\n                    onLinkClick,\n                    onCoordinateMouseEnter,\n                    onCoordinateMouseLeave\n                })\n            ),\n\n            h('div', {class: 'edit'},\n                h('div', {class: 'header'},\n                    h('img', {\n                        ref: el => this.menuButtonElement = el,\n                        src: '/static/game/node_modules/octicons/build/svg/chevron-down.svg',\n                        width: 16,\n                        height: 16,\n                        onClick: this.handleMenuButtonClick\n                    }),\n\n                    h('div', {},\n                        h('input', {\n                            ref: el => this.titleInputElement = el,\n                            type: 'text',\n                            name: 'title',\n                            value: title,\n                            placeholder: 'Title',\n                            onInput: this.handleCommentInput\n                        })\n                    )\n                ),\n\n                h('textarea', {\n                    ref: el => this.textareaElement = el,\n                    placeholder: 'Comment',\n                    value: comment,\n                    onInput: this.handleCommentInput\n                })\n            )\n        )\n    }\n}\n\nmodule.exports = CommentBox\n","const {shell} = require('electron')\nconst {h, Component} = require('preact')\n\nconst gametree = require('../modules/gametree')\n\nfunction htmlify(input) {\n    let urlRegex = '\\\\b(ht|f)tps?:\\\\/\\\\/[^\\\\s<]+[^<.,:;\"\\')\\\\]\\\\s](\\\\/\\\\B|\\\\b)'\n    let emailRegex = '\\\\b[^\\\\s@<]+@[^\\\\s@<]+\\\\b'\n    let coordRegex = '\\\\b[a-hj-zA-HJ-Z][1-9][0-9]?\\\\b'\n    let movenumberRegex = '\\\\B#\\\\d+\\\\b'\n    let totalRegex = '(' + [urlRegex, emailRegex, coordRegex, movenumberRegex].join('|') + ')'\n\n    input = input.replace(new RegExp(totalRegex, 'g'), match => {\n        if (new RegExp(urlRegex).test(match))\n            return `<a href=\"${match}\" class=\"external\">${match}</a>`\n        if (new RegExp(emailRegex).test(match))\n            return `<a href=\"mailto:${match}\" class=\"external\">${match}</a>`\n        if (new RegExp(movenumberRegex).test(match))\n            return `<a href=\"#\" class=\"movenumber\" title=\"Jump to Move Number\">${match}</a>`\n        if (new RegExp(coordRegex).test(match))\n            return `<span class=\"coord\">${match}</span>`\n    })\n\n    return input\n}\n\nclass ContentDisplay extends Component {\n    constructor(props) {\n        super(props)\n\n        this.handleLinkClick = evt => {\n            let linkElement = evt.currentTarget\n\n            if (linkElement.classList.contains('external')) {\n                evt.preventDefault()\n                shell.openExternal(linkElement.href)\n            } else if (linkElement.classList.contains('movenumber')) {\n                evt.preventDefault()\n                let moveNumber = +linkElement.innerText.slice(1)\n\n                sabaki.setUndoPoint('Go Back')\n                sabaki.goToMainVariation()\n                sabaki.goToMoveNumber(moveNumber)\n            }\n        }\n\n        this.handleCoordMouseEnter = evt => {\n            let board = gametree.getBoard(...sabaki.state.treePosition)\n            let vertex = board.coord2vertex(evt.currentTarget.innerText)\n\n            sabaki.setState({highlightVertices: [vertex]})\n        }\n\n        this.handleCoordMouseLeave = evt => {\n            sabaki.setState({highlightVertices: []})\n        }\n    }\n\n    componentDidMount() {\n        this.componentDidUpdate()\n    }\n\n    componentDidUpdate() {\n        // Handle link clicks\n\n        for (let el of this.element.querySelectorAll('a')) {\n            el.removeEventListener('click', this.handleLinkClick)\n            el.addEventListener('click', this.handleLinkClick)\n        }\n\n        // Hover on coordinates\n\n        for (let el of this.element.querySelectorAll('.coord')) {\n            el.removeEventListener('mouseenter', this.handleCoordMouseEnter)\n            el.removeEventListener('mouseleave', this.handleCoordMouseLeave)\n            el.addEventListener('mouseenter', this.handleCoordMouseEnter)\n            el.addEventListener('mouseleave', this.handleCoordMouseLeave)\n        }\n    }\n\n    render({tag, content, children}) {\n        return content != null\n            ? h(tag, Object.assign({\n                ref: el => this.element = el,\n                dangerouslySetInnerHTML: {\n                    __html: htmlify(\n                        content\n                        .replace(/&/g, '&amp;')\n                        .replace(/</g, '&lt;')\n                        .replace(/>/g, '&gt;')\n                    )\n                }\n            }, this.props))\n            : h(tag, Object.assign({\n                ref: el => this.element = el\n            }, this.props), children)\n    }\n}\n\nmodule.exports = ContentDisplay\n","const {h, Component} = require('preact')\nconst gametree = require('../modules/gametree')\n\nconst InfoDrawer = require('./drawers/InfoDrawer')\nconst ScoreDrawer = require('./drawers/ScoreDrawer')\nconst PreferencesDrawer = require('./drawers/PreferencesDrawer')\nconst GameChooserDrawer = require('./drawers/GameChooserDrawer')\nconst CleanMarkupDrawer = require('./drawers/CleanMarkupDrawer')\n\nclass DrawerManager extends Component {\n    constructor() {\n        super()\n\n        this.handleScoreSubmit = ({resultString}) => {\n            this.props.rootTree.nodes[0].RE = [resultString]\n            sabaki.closeDrawer()\n            setTimeout(() => sabaki.setMode('play'), 500)\n        }\n\n        this.handleGameSelect = ({selectedTree}) => {\n            sabaki.closeDrawer()\n            sabaki.setMode('play')\n            sabaki.setCurrentTreePosition(selectedTree, 0)\n        }\n\n        this.handleGameTreesChange = evt => {\n            let newGameTrees = evt.gameTrees\n            let {gameTrees, gameIndex, rootTree} = this.props\n\n            if (!newGameTrees.includes(rootTree)) {\n                if (newGameTrees.length === 0) {\n                    newGameTrees = [sabaki.getEmptyGameTree()]\n                }\n\n                let newIndex = Math.min(Math.max(gameIndex - 1, 0), newGameTrees.length - 1)\n                let newTreePosition = [newGameTrees[newIndex], 0]\n\n                sabaki.setCurrentTreePosition(...newTreePosition)\n            }\n\n            sabaki.setState({gameTrees: newGameTrees})\n        }\n    }\n\n    render({\n        mode,\n        openDrawer,\n        gameTrees,\n        gameIndex,\n        treePosition,\n        rootTree,\n\n        gameInfo,\n        currentPlayer,\n\n        scoringMethod,\n        scoreBoard,\n        areaMap,\n\n        engines,\n        attachedEngines,\n        graphGridSize,\n        preferencesTab\n    }) {\n        return h('section', {},\n            h(InfoDrawer, {\n                show: openDrawer === 'info',\n                engines: attachedEngines,\n                treePosition,\n                gameInfo,\n                currentPlayer\n            }),\n\n            h(PreferencesDrawer, {\n                show: openDrawer === 'preferences',\n                tab: preferencesTab,\n                engines,\n                graphGridSize\n            }),\n\n            h(GameChooserDrawer, {\n                show: openDrawer === 'gamechooser',\n                gameTrees,\n                gameIndex,\n\n                onItemClick: this.handleGameSelect,\n                onChange: this.handleGameTreesChange\n            }),\n\n            h(CleanMarkupDrawer, {\n                show: openDrawer === 'cleanmarkup',\n                treePosition\n            }),\n\n            h(ScoreDrawer, {\n                show: openDrawer === 'score',\n                estimating: mode === 'estimator',\n                areaMap,\n                board: scoreBoard,\n                method: scoringMethod,\n                komi: +gametree.getRootProperty(treePosition[0], 'KM', 0),\n\n                onSubmitButtonClick: this.handleScoreSubmit\n            })\n        )\n    }\n}\n\nmodule.exports = DrawerManager\n","const {remote} = require('electron')\nconst {h, Component} = require('preact')\nconst classNames = require('classnames')\n\nconst gametree = require('../modules/gametree')\nconst helper = require('../modules/helper')\nconst setting = remote.require('./setting')\n\nlet [delay, animationDuration, commentProperties,\nedgeColor, edgeInactiveColor, edgeSize, edgeInactiveSize,\nnodeColor, nodeInactiveColor, nodeActiveColor,\nnodeBookmarkColor, nodeCommentColor, \nnodeInactiveBookmarkColor, nodeInactiveCommentColor] = ['graph.delay', 'graph.animation_duration', 'sgf.comment_properties',\n    'graph.edge_color', 'graph.edge_inactive_color', 'graph.edge_size', 'graph.edge_inactive_size',\n    'graph.node_color', 'graph.node_inactive_color', 'graph.node_active_color',\n    'graph.node_bookmark_color', 'graph.node_comment_color', \n    'graph.node_inactive_bookmark_color', 'graph.node_inactive_comment_color'].map(x => setting.get(x))\n\nclass GameGraphNode extends Component {\n    constructor() {\n        super()\n\n        this.state = {\n            hover: false\n        }\n\n        this.handleMouseMove = evt => {\n            if (!this.element) return\n\n            let {clientX: x, clientY: y} = evt\n            let {position, mouseShift: [sx, sy], gridSize} = this.props\n            let mousePosition = [x + sx, y + sy]\n            let hover = false\n\n            if (mousePosition.every((x, i) => Math.ceil(position[i] - gridSize / 2) <= x\n            && x <= Math.floor(position[i] + gridSize / 2) - 1)) {\n                hover = true\n            }\n\n            if (hover !== this.state.hover) {\n                this.setState({hover})\n            }\n        }\n    }\n\n    componentDidMount() {\n        document.addEventListener('mousemove', this.handleMouseMove)\n    }\n\n    componentWillUnmount() {\n        document.removeEventListener('mousemove', this.handleMouseMove)\n    }\n\n    shouldComponentUpdate({type, fill, nodeSize, gridSize}, {hover}) {\n        return type !== this.props.type\n            || fill !== this.props.fill\n            || nodeSize !== this.props.nodeSize\n            || gridSize !== this.props.gridSize\n            || hover !== this.state.hover\n    }\n\n    render({\n        position: [left, top],\n        type,\n        fill,\n        nodeSize\n    }, {\n        hover\n    }) {\n        return h('path', {\n            ref: el => this.element = el,\n            d: (() => {\n                let nodeSize2 = nodeSize * 2\n\n                if (type === 'square') {\n                    return `M ${left - nodeSize} ${top - nodeSize}\n                        h ${nodeSize2} v ${nodeSize2} h ${-nodeSize2} v ${-nodeSize2}`\n                } else if (type === 'circle') {\n                    return `M ${left} ${top} m ${-nodeSize} 0\n                        a ${nodeSize} ${nodeSize} 0 1 0 ${nodeSize2} 0\n                        a ${nodeSize} ${nodeSize} 0 1 0 ${-nodeSize2} 0`\n                } else if (type === 'diamond') {\n                    let diamondSide = Math.round(Math.sqrt(2) * nodeSize)\n\n                    return `M ${left} ${top - diamondSide}\n                        L ${left - diamondSide} ${top} L ${left} ${top + diamondSide}\n                        L ${left + diamondSide} ${top} L ${left} ${top - diamondSide}`\n                }\n\n                return ''\n            })(),\n\n            class: classNames({hover}),\n            fill\n        })\n    }\n}\n\nclass GameGraphEdge extends Component {\n    shouldComponentUpdate({positionAbove, positionBelow, current, length, gridSize}) {\n        return length !== this.props.length\n            || current !== this.props.current\n            || gridSize !== this.props.gridSize\n            || !helper.vertexEquals(positionAbove, this.props.positionAbove)\n            || !helper.vertexEquals(positionBelow, this.props.positionBelow)\n    }\n\n    render({\n        positionAbove: [left1, top1],\n        positionBelow: [left2, top2],\n        length,\n        gridSize,\n        current\n    }) {\n        let points\n\n        if (left1 === left2) {\n            points = `${left1},${top1} ${left1},${top2 + length}`\n        } else {\n            points = `${left1},${top1} ${left2 - gridSize},${top2 - gridSize}\n                ${left2},${top2} ${left2},${top2 + length}`\n        }\n\n        return h('polyline', {\n            points,\n            fill: 'none',\n            stroke: current ? edgeColor : edgeInactiveColor,\n            'stroke-width': current ? edgeSize : edgeInactiveSize\n        })\n    }\n}\n\nclass GameGraph extends Component {\n    constructor(props) {\n        super(props)\n\n        this.state = {\n            cameraPosition: [-props.gridSize, -props.gridSize],\n            viewportSize: [props.viewportWidth, props.height],\n            viewportPosition: [0, 0],\n            matrixDict: null\n        }\n\n        this.mousePosition = [-100, -100]\n        this.matrixDictHash = null\n        this.matrixDictCache = {}\n\n        this.handleNodeClick = this.handleNodeClick.bind(this)\n        this.handleGraphMouseDown = this.handleGraphMouseDown.bind(this)\n    }\n\n    componentDidMount() {\n        document.addEventListener('mousemove', evt => {\n            if (!this.svgElement) return\n\n            let {clientX: x, clientY: y, movementX, movementY} = evt\n            let {cameraPosition: [cx, cy], viewportPosition: [vx, vy]} = this.state\n\n            if (this.mouseDown === 0) {\n                this.drag = true\n            } else {\n                ;[movementX, movementY] = [0, 0]\n                this.drag = false\n            }\n\n            this.mousePosition = [x - vx, y - vy]\n\n            if (this.drag) {\n                evt.preventDefault()\n                this.setState({cameraPosition: [cx - movementX, cy - movementY]})\n            }\n        })\n\n        document.addEventListener('mouseup', () => {\n            this.mouseDown = null\n        })\n\n        window.addEventListener('resize', () => {\n            clearTimeout(this.remeasureId)\n            this.remeasureId = setTimeout(() => this.remeasure(), 500)\n        })\n\n        this.remeasure()\n        this.componentWillReceiveProps()\n    }\n\n    shouldComponentUpdate({showGameGraph, height}) {\n        return height !== this.props.height || showGameGraph && !this.dirty\n    }\n\n    componentWillReceiveProps({treePosition, showGameGraph} = {}) {\n        // Debounce rendering\n\n        if (treePosition === this.props.treePosition) return\n\n        this.dirty = true\n\n        if (!this.props.showGameGraph && showGameGraph) {\n            if (treePosition == null) return\n            let [matrix, dict] = this.getMatrixDict(gametree.getRoot(treePosition[0]))\n            this.setState({matrixDict: [matrix, dict]})\n        }\n\n        clearTimeout(this.renderId)\n        this.renderId = setTimeout(() => this.updateCameraPosition(), delay)\n    }\n\n    componentDidUpdate({height, showGameGraph}) {\n        if (height !== this.props.height) {\n            setTimeout(() => this.remeasure(), 200)\n        }\n\n        if (showGameGraph !== this.props.showGameGraph) {\n            setTimeout(() => this.updateCameraPosition(), 200)\n        }\n    }\n\n    getMatrixDict(tree) {\n        let hash = gametree.getMatrixHash(tree)\n\n        if (hash !== this.matrixDictHash) {\n            this.matrixDictHash = hash\n            this.matrixDictCache = gametree.getMatrixDict(tree)\n        }\n\n        return this.matrixDictCache\n    }\n\n    updateCameraPosition() {\n        let {gridSize, treePosition: [tree, index]} = this.props\n        let id = tree.id + '-' + index\n\n        let [matrix, dict] = this.getMatrixDict(gametree.getRoot(tree))\n        let [x, y] = dict[id]\n        let [width, padding] = gametree.getMatrixWidth(y, matrix)\n\n        let relX = width === 1 ? 0 : 1 - 2 * (x - padding) / (width - 1)\n        let diff = (width - 1) * gridSize / 2\n        diff = Math.min(diff, this.state.viewportSize[0] / 2 - gridSize)\n\n        this.dirty = false\n\n        this.setState({\n            matrixDict: [matrix, dict],\n            cameraPosition: [\n                x * gridSize + relX * diff - this.state.viewportSize[0] / 2,\n                y * gridSize - this.state.viewportSize[1] / 2\n            ].map(z => Math.round(z))\n        })\n    }\n\n    remeasure() {\n        if (!this.props.showGameGraph) return\n\n        let {left, top, width, height} = this.element.getBoundingClientRect()\n        this.setState({viewportSize: [width, height], viewportPosition: [left, top]})\n    }\n\n    handleGraphMouseDown(evt) {\n        this.mouseDown = evt.button\n    }\n\n    handleNodeClick(evt) {\n        if (this.drag) {\n            this.drag = false\n            return\n        }\n\n        let {onNodeClick = helper.noop, gridSize} = this.props\n        let {matrixDict: [matrix, ], cameraPosition: [cx, cy]} = this.state\n        let [mx, my] = this.mousePosition\n        let [nearestX, nearestY] = [mx + cx, my + cy].map(z => Math.round(z / gridSize))\n\n        if (!matrix[nearestY] || !matrix[nearestY][nearestX]) return\n\n        evt.treePosition = matrix[nearestY][nearestX]\n        onNodeClick(evt)\n    }\n\n    renderNodes({\n        gridSize,\n        nodeSize\n    }, {\n        matrixDict: [matrix, dict],\n        cameraPosition: [cx, cy],\n        viewportSize: [width, height],\n        viewportPosition: [vx, vy]\n    }) {\n        let nodeColumns = []\n        let edges = []\n\n        let [minX, minY] = [cx, cy].map(z => Math.max(Math.ceil(z / gridSize) - 2, 0))\n        let [maxX, maxY] = [cx, cy].map((z, i) => (z + [width, height][i]) / gridSize + 2)\n        minY -= 3\n        maxY += 3\n\n        let doneTreeBones = []\n        let currentTracks = []\n        let notCurrentTracks = []\n\n        // Render only nodes that are visible\n\n        for (let x = minX; x <= maxX; x++) {\n            let column = []\n\n            for (let y = minY; y <= maxY; y++) {\n                if (matrix[y] == null || matrix[y][x] == null) continue\n\n                let [tree, index] = matrix[y][x]\n                let node = tree.nodes[index]\n                let onCurrentTrack\n\n                if (currentTracks.includes(tree.id)) {\n                    onCurrentTrack = true\n                } else if (notCurrentTracks.includes(tree.id)) {\n                    onCurrentTrack = false\n                } else {\n                    if (!tree.parent) {\n                        onCurrentTrack = true\n                        currentTracks.push(tree.id)\n                    } else if (currentTracks.includes(tree.parent.id)) {\n                        if (tree.parent.subtrees[tree.parent.current] !== tree) {\n                            onCurrentTrack = false\n                            notCurrentTracks.push(tree.id)\n                        } else {\n                            onCurrentTrack = true\n                            currentTracks.push(tree.id)\n                        }\n                    } else if (notCurrentTracks.includes(tree.parent.id)) {\n                        onCurrentTrack = false\n                        notCurrentTracks.push(tree.id)\n                    } else {\n                        onCurrentTrack = gametree.onCurrentTrack(tree)\n\n                        if (onCurrentTrack) currentTracks.push(tree.id)\n                        else notCurrentTracks.push(tree.id)\n                    }\n                }\n\n                // Render node\n\n                let fill = nodeColor\n                if (onCurrentTrack) {\n                    fill = helper.vertexEquals(this.props.treePosition, [tree, index]) ? nodeActiveColor\n                        : 'HO' in node ? nodeBookmarkColor\n                        : commentProperties.some(x => x in node) ? nodeCommentColor\n                        : nodeColor\n                } else {\n                    fill = 'HO' in node ? nodeInactiveBookmarkColor\n                        : commentProperties.some(x => x in node) ? nodeInactiveCommentColor\n                        : nodeInactiveColor\n                }\n\n                let left = x * gridSize\n                let top = y * gridSize\n\n                column.push(h(GameGraphNode, {\n                    key: y,\n                    mouseShift: [cx - vx, cy - vy],\n                    position: [left, top],\n                    type: 'B' in node && node.B[0] === '' || 'W' in node && node.W[0] === ''\n                        ? 'square' // Pass node\n                        : !('B' in node || 'W' in node)\n                        ? 'diamond' // Non-move node\n                        : 'circle', // Normal node\n                    fill,\n                    nodeSize,\n                    gridSize\n                }))\n\n                if (!doneTreeBones.includes(tree.id)) {\n                    // A *tree bone* denotes a straight edge through the whole tree\n\n                    let positionAbove, positionBelow\n\n                    if (index === 0 && tree.parent) {\n                        // Render precedent edge with tree bone\n\n                        let [prevTree, prevIndex] = gametree.navigate(tree, index, -1)\n                        let [px, py] = dict[prevTree.id + '-' + prevIndex]\n\n                        positionAbove = [px * gridSize, py * gridSize]\n                        positionBelow = [left, top]\n                    } else {\n                        // Render tree bone only\n\n                        let [sx, sy] = dict[tree.id + '-0']\n\n                        positionAbove = [sx * gridSize, sy * gridSize]\n                        positionBelow = positionAbove\n                    }\n\n                    if (positionAbove != null && positionBelow != null) {\n                        edges[!onCurrentTrack ? 'unshift' : 'push'](h(GameGraphEdge, {\n                            key: tree.id,\n                            positionAbove,\n                            positionBelow,\n                            length: (tree.nodes.length - 1) * gridSize,\n                            current: onCurrentTrack,\n                            gridSize\n                        }))\n\n                        doneTreeBones.push(tree.id)\n                    }\n                }\n\n                if (index === tree.nodes.length - 1) {\n                    // Render successor edges with subtree bones\n\n                    for (let subtree of tree.subtrees) {\n                        let current = onCurrentTrack && tree.subtrees[tree.current] === subtree\n                        let [nx, ny] = dict[subtree.id + '-0']\n\n                        edges[!current ? 'unshift' : 'push'](h(GameGraphEdge, {\n                            key: subtree.id,\n                            positionAbove: [left, top],\n                            positionBelow: [nx * gridSize, ny * gridSize],\n                            length: (subtree.nodes.length - 1) * gridSize,\n                            current,\n                            gridSize\n                        }))\n\n                        doneTreeBones.push(subtree.id)\n                    }\n                }\n            }\n\n            if (column.length > 0) nodeColumns.push(h('g', {key: x}, column))\n        }\n\n        return [h('g', {}, edges), h('g', {}, nodeColumns)]\n    }\n\n    render({\n        height,\n        treePosition,\n        showGameGraph\n    }, {\n        matrixDict,\n        viewportSize,\n        cameraPosition: [cx, cy]\n    }) {\n        return h('section',\n            {\n                ref: el => this.element = el,\n                id: 'graph'\n            },\n\n            h('style', {}, `\n                #graph {\n                    height: ${height}%;\n                }\n                #graph svg > * {\n                    transform: translate(${-cx}px, ${-cy}px);\n                }\n            `),\n\n            showGameGraph && matrixDict && viewportSize && h('svg',\n                {\n                    ref: el => this.svgElement = el,\n                    width: viewportSize[0],\n                    height: viewportSize[1],\n\n                    onClick: this.handleNodeClick,\n                    onContextMenu: this.handleNodeClick,\n                    onMouseDown: this.handleGraphMouseDown,\n                    onMouseUp: this.handleGraphMouseUp\n                },\n\n                this.renderNodes(this.props, this.state)\n            )\n        )\n    }\n}\n\nmodule.exports = GameGraph\n","const {h, Component} = require('preact')\nconst classNames = require('classnames')\n\nconst helper = require('../modules/helper')\n\nconst alpha = 'ABCDEFGHJKLMNOPQRSTUVWXYZ'\nconst range = n => [...Array(n)].map((_, i) => i)\nconst random = n => Math.floor(Math.random() * n)\n\nclass GobanVertex extends Component {\n    shouldComponentUpdate({\n        sign,\n        hoshi,\n        shift,\n        highlight,\n        heat,\n        paint,\n        dimmed,\n        animate,\n        label,\n        markupType,\n        ghostTypes\n    }) {\n        return sign !== this.props.sign\n            || highlight !== this.props.highlight\n            || ghostTypes !== this.props.ghostTypes\n            || markupType !== this.props.markupType\n            || label !== this.props.label\n            || shift !== this.props.shift\n            || animate !== this.props.animate\n            || heat !== this.props.heat\n            || paint !== this.props.paint\n            || dimmed !== this.props.dimmed\n            || hoshi !== this.props.hoshi\n    }\n\n    render({\n        position: [x, y],\n        shift,\n        random,\n        sign,\n        highlight,\n        heat,\n        paint,\n        dimmed,\n        hoshi,\n        animate,\n        markupType,\n        label,\n        ghostTypes,\n\n        onMouseDown,\n        onMouseUp,\n        onMouseMove\n    }) {\n        let classes = {\n            [`pos_${x}-${y}`]: true,\n            [`shift_${shift}`]: true,\n            [`random_${random}`]: true,\n            [`sign_${sign}`]: true,\n            [`heat_${heat}`]: !!heat,\n            [`paint_${paint}`]: !!paint,\n            [markupType]: !!markupType,\n            dimmed,\n            hoshi,\n            animate,\n            smalllabel: label.length >= 3\n        }\n\n        for (let type of ghostTypes) {\n            classes[type] = true\n        }\n\n        return h('li',\n            {\n                'data-vertex': `${x}-${y}`,\n                class: classNames(classes),\n                onMouseDown,\n                onMouseUp,\n                onMouseMove\n            },\n            \n            h('div', {class: 'heat'}),\n\n            h('div', {class: 'stone'},\n                h('img', {src: '/static/game/img/goban/blank.svg'}),\n                h('span', {title: label}),\n            ),\n\n            !!paint && h('div', {class: 'paint'}),\n            highlight && h('div', {class: 'highlight'})\n        )\n    }\n}\n\nclass GobanLine extends Component {\n    shouldComponentUpdate(nextProps) {\n        for (let i in nextProps)\n            if (nextProps[i] !== this.props[i]) return true\n\n        return false\n    }\n\n    render({v1, v2, type, temporary, showCoordinates, fieldSize}) {\n        if (helper.vertexEquals(v1, v2)) return\n\n        let [pos1, pos2] = [v1, v2].map(v => v.map(x => (showCoordinates ? x + 1 : x) * fieldSize))\n        let [dx, dy] = pos1.map((x, i) => pos2[i] - x)\n        let [left, top] = pos1.map((x, i) => (x + pos2[i] + fieldSize) / 2)\n\n        let angle = Math.atan2(dy, dx) * 180 / Math.PI\n        let length = Math.sqrt(dx * dx + dy * dy)\n\n        return h('hr', {\n            class: classNames({[type]: true, temporary}),\n            style: {\n                width: length,\n                transform: `\n                    translate(${left - length / 2}px, ${top}px)\n                    rotate(${angle}deg)\n                `\n            }\n        })\n    }\n}\n\nclass CoordX extends Component {\n    shouldComponentUpdate({rangeX}) {\n        return rangeX.length !== this.props.rangeX.length\n    }\n\n    render({rangeX}) {\n        return h('ol', {class: 'coordx'},\n            rangeX.map(i => h('li', {}, alpha[i]))\n        )\n    }\n}\n\nclass CoordY extends Component {\n    shouldComponentUpdate({rangeY}) {\n        return rangeY.length !== this.props.rangeY.length\n    }\n\n    render({rangeY}) {\n        return h('ol', {class: 'coordy'},\n            rangeY.map(i => h('li', {}, rangeY.length - i))\n        )\n    }\n}\n\nclass Goban extends Component {\n    constructor(props) {\n        super()\n\n        this.componentWillReceiveProps(props)\n\n        this.handleVertexMouseUp = this.handleVertexMouseUp.bind(this)\n        this.handleVertexMouseDown = this.handleVertexMouseDown.bind(this)\n        this.handleVertexMouseMove = this.handleVertexMouseMove.bind(this)\n    }\n\n    componentDidMount() {\n        document.addEventListener('mouseup', () => {\n            this.mouseDown = false\n\n            if (this.state.temporaryLine)\n                this.setState({temporaryLine: null})\n        })\n\n        // Measure CSS\n\n        let {borderLeftWidth, borderTopWidth, borderRightWidth, borderBottomWidth,\n            paddingLeft, paddingTop, paddingRight, paddingBottom} = window.getComputedStyle(this.element)\n\n        this.setState({\n            borderLeftWidth: parseFloat(borderLeftWidth),\n            borderTopWidth: parseFloat(borderTopWidth),\n            borderRightWidth: parseFloat(borderRightWidth),\n            borderBottomWidth: parseFloat(borderBottomWidth),\n            paddingLeft: parseFloat(paddingLeft),\n            paddingTop: parseFloat(paddingTop),\n            paddingRight: parseFloat(paddingRight),\n            paddingBottom: parseFloat(paddingBottom)\n        })\n\n        // Resize board when window is resizing\n\n        window.addEventListener('resize', () => {\n            this.resize()\n        })\n\n        this.resize()\n    }\n\n    componentWillReceiveProps({board, animatedVertex}) {\n        let dim = board => [board.width, board.height]\n\n        if (!this.props || !helper.vertexEquals(dim(board), dim(this.props.board))) {\n            // Update state to accomodate new board size\n\n            let rangeX = range(board.width)\n            let rangeY = range(board.height)\n            let hoshis = board.getHandicapPlacement(9)\n\n            let shifts = rangeY.map(_ => rangeX.map(__ => random(9)))\n            this.readjustShifts(shifts)\n\n            this.setState({\n                rangeX,\n                rangeY,\n                hoshis,\n                randomizer: rangeY.map(_ => rangeX.map(__ => random(5))),\n                shifts\n            }, () => this.resize())\n        } else if (animatedVertex\n        && !(this.props.animatedVertex && helper.vertexEquals(animatedVertex, this.props.animatedVertex))) {\n            // Update shift\n\n            let [x, y] = animatedVertex\n            let {shifts} = this.state\n\n            shifts[y][x] = random(9)\n            this.readjustShifts(shifts, animatedVertex)\n\n            this.setState({shifts, animatedVertex})\n            setTimeout(() => this.setState({animatedVertex: null}), 200)\n        }\n    }\n\n    componentDidUpdate({showCoordinates}) {\n        if (showCoordinates !== this.props.showCoordinates) {\n            this.resize()\n        }\n    }\n\n    resize() {\n        if (!this.element || !this.element.parentElement) return\n\n        let {board, showCoordinates, onBeforeResize = helper.noop} = this.props\n        onBeforeResize()\n\n        let {width: outerWidth, height: outerHeight} = window.getComputedStyle(this.element.parentElement)\n        outerWidth = parseFloat(outerWidth)\n        outerHeight = parseFloat(outerHeight)\n\n        let boardWidth = board.width\n        let boardHeight = board.height\n\n        if (showCoordinates) {\n            boardWidth += 2\n            boardHeight += 2\n        }\n\n        let width = helper.floorEven(outerWidth\n            - this.state.paddingLeft - this.state.paddingRight\n            - this.state.borderLeftWidth - this.state.borderRightWidth)\n        let height = helper.floorEven(outerHeight\n            - this.state.paddingTop - this.state.paddingBottom\n            - this.state.borderTopWidth - this.state.borderBottomWidth)\n\n        let fieldSize = helper.floorEven(Math.min(width / boardWidth, height / boardHeight, 150))\n        let minX = fieldSize * boardWidth\n        let minY = fieldSize * boardHeight\n\n        this.setState({\n            width: minX + outerWidth - width,\n            height: minY + outerHeight - height,\n            marginLeft: -(minX + outerWidth - width) / 2,\n            marginTop: -(minY + outerHeight - height) / 2,\n            innerWidth: minX,\n            innerHeight: minY,\n            innerMarginLeft: -minX / 2,\n            innerMarginTop: -minY / 2,\n            fieldSize\n        })\n    }\n\n    readjustShifts(shifts, vertex = null) {\n        if (vertex == null) {\n            let movedVertices = []\n\n            for (let y = 0; y < shifts.length; y++) {\n                for (let x = 0; x < shifts[0].length; x++) {\n                    movedVertices.push(...this.readjustShifts(shifts, [x, y]))\n                }\n            }\n\n            return movedVertices\n        }\n\n        let [x, y] = vertex\n        let direction = shifts[y][x]\n\n        let data = [\n            // Left\n            [[1, 5, 8], [x - 1, y], [3, 7, 6]],\n            // Top\n            [[2, 5, 6], [x, y - 1], [4, 7, 8]],\n            // Right\n            [[3, 7, 6], [x + 1, y], [1, 5, 8]],\n            // Bottom\n            [[4, 7, 8], [x, y + 1], [2, 5, 6]],\n        ]\n\n        let movedVertices = []\n\n        for (let [directions, [qx, qy], removeShifts] of data) {\n            if (!directions.includes(direction)) continue\n\n            if (shifts[qy] && removeShifts.includes(shifts[qy][qx])) {\n                shifts[qy][qx] = 0\n                movedVertices.push([qx, qy])\n            }\n        }\n\n        return movedVertices\n    }\n\n    handleVertexMouseDown(evt) {\n        let {currentTarget} = evt\n\n        this.mouseDown = true\n        this.startVertex = currentTarget.dataset.vertex.split('-').map(x => +x)\n    }\n\n    handleVertexMouseUp(evt) {\n        if (!this.mouseDown) return\n\n        let {onVertexClick = helper.noop, onLineDraw = helper.noop} = this.props\n        let {currentTarget} = evt\n\n        this.mouseDown = false\n        evt.vertex = currentTarget.dataset.vertex.split('-').map(x => +x)\n        evt.line = this.state.temporaryLine\n\n        if (evt.x == null) evt.x = evt.clientX\n        if (evt.y == null) evt.y = evt.clientY\n\n        if (evt.line) {\n            onLineDraw(evt)\n        } else {\n            onVertexClick(evt)\n        }\n    }\n\n    handleVertexMouseMove(evt) {\n        let {drawLineMode, onVertexMouseMove = helper.noop} = this.props\n        let {currentTarget} = evt\n\n        onVertexMouseMove(Object.assign(evt, {\n            mouseDown: this.mouseDown,\n            startVertex: this.startVertex,\n            vertex: currentTarget.dataset.vertex.split('-').map(x => +x)\n        }))\n\n        if (!!drawLineMode && evt.mouseDown && evt.button === 0) {\n            let temporaryLine = [evt.startVertex, evt.vertex]\n\n            if (!helper.equals(temporaryLine, this.state.temporaryLine)) {\n                this.setState({temporaryLine})\n            }\n        }\n    }\n\n    render({\n        board,\n        paintMap,\n        heatMap,\n        highlightVertices = [],\n        dimmedStones = [],\n\n        crosshair = false,\n        showCoordinates = false,\n        showMoveColorization = true,\n        showNextMoves = true,\n        showSiblings = true,\n        fuzzyStonePlacement = true,\n        animatedStonePlacement = true,\n\n        drawLineMode = null\n    }, state) {\n        let {fieldSize, rangeY, rangeX, temporaryLine, animatedVertex} = state\n        let animatedVertices = animatedVertex\n            ? [animatedVertex, ...board.getNeighbors(animatedVertex)] : []\n        let drawTemporaryLine = !!drawLineMode && !!temporaryLine\n\n        return h('section',\n            {\n                ref: el => this.element = el,\n                id: 'goban',\n                class: classNames({\n                    goban: true,\n                    crosshair,\n                    coordinates: showCoordinates,\n                    movecolorization: showMoveColorization,\n                    variations: showNextMoves,\n                    siblings: showSiblings,\n                    fuzzy: fuzzyStonePlacement,\n                    animation: animatedStonePlacement\n                })\n            },\n\n            h('style', {}, `\n                #goban {\n                    font-size: ${fieldSize}px;\n                    width: ${state.width}px;\n                    height: ${state.height}px;\n                    margin-left: ${state.marginLeft}px;\n                    margin-top: ${state.marginTop}px;\n                }\n                #goban > div {\n                    width: ${state.innerWidth}px;\n                    height: ${state.innerHeight}px;\n                    margin-left: ${state.innerMarginLeft}px;\n                    margin-top: ${state.innerMarginTop}px;\n                }\n                #goban > div > ol > li {\n                    width: ${fieldSize}px;\n                    height: ${fieldSize}px;\n                }\n                #goban > div > ol:not(.coordy) {\n                    height: ${fieldSize}px;\n                    line-height: ${fieldSize}px;\n                    margin-left: ${showCoordinates ? fieldSize : 0}px;\n                }\n                #goban > div > ol.coordy {\n                    width: ${fieldSize}px;\n                    top: ${fieldSize}px;\n                    line-height: ${fieldSize}px;\n                }\n                #goban > div > ol.coordy:last-child {\n                    left: ${fieldSize * (board.width + 1)}px;\n                }\n            `),\n\n            h('div', {},\n                h(CoordY, {rangeY}),\n                h(CoordX, {rangeX}),\n\n                rangeY.map(y => h('ol', {class: 'row'}, rangeX.map(x => {\n                    let sign = board.get([x, y])\n                    let [markupType, label] = board.markups[[x, y]] || [null, '']\n                    let equalsVertex = v => helper.vertexEquals(v, [x, y])\n\n                    return h(GobanVertex, {\n                        position: [x, y],\n                        shift: this.state.shifts[y][x],\n                        random: this.state.randomizer[y][x],\n                        sign,\n                        heat: heatMap && heatMap[y] && heatMap[y][x],\n                        paint: paintMap && paintMap[y] && paintMap[y][x],\n                        dimmed: dimmedStones.some(equalsVertex),\n                        highlight: highlightVertices.some(equalsVertex),\n                        hoshi: this.state.hoshis.some(equalsVertex),\n                        animate: animatedVertices.some(equalsVertex),\n                        smalllabel: label.length >= 3,\n                        markupType,\n                        label,\n                        ghostTypes: board.ghosts[[x, y]] || [],\n\n                        onMouseUp: this.handleVertexMouseUp,\n                        onMouseDown: this.handleVertexMouseDown,\n                        onMouseMove: this.handleVertexMouseMove\n                    })\n                }))),\n\n                h(CoordX, {rangeX}),\n                h(CoordY, {rangeY})\n            ),\n\n            // Draw lines & arrows\n\n            board.lines.map(([v1, v2, arrow]) => {\n                if (drawTemporaryLine) {\n                    if (helper.equals([v1, v2], temporaryLine)\n                    || (!arrow || drawLineMode === 'line')\n                    && helper.equals([v2, v1], temporaryLine)) {\n                        drawTemporaryLine = false\n                        return\n                    }\n                }\n\n                return h(GobanLine, {\n                    v1, v2, showCoordinates, fieldSize,\n                    type: arrow ? 'arrow' : 'line'\n                })\n            }),\n\n            drawTemporaryLine && h(GobanLine, {\n                temporary: true,\n                v1: temporaryLine[0], v2: temporaryLine[1],\n                showCoordinates, fieldSize,\n                type: drawLineMode\n            })\n        )\n    }\n}\n\nmodule.exports = Goban\n","const {h, Component} = require('preact')\nconst classNames = require('classnames')\n\nclass InfoOverlay extends Component {\n    shouldComponentUpdate({text, show}) {\n        return text !== this.props.text || show !== this.props.show\n    }\n\n    render({text, show}) {\n        return h('section', {\n            id: 'info-overlay',\n            class: classNames({show})\n        }, text)\n    }\n}\n\nmodule.exports = InfoOverlay\n","const {h, Component} = require('preact')\nconst classNames = require('classnames')\n\nconst helper = require('../modules/helper')\n\nclass InputBox extends Component {\n    constructor() {\n        super()\n\n        this.state = {value: ''}\n\n        this.handleInput = evt => this.setState({value: evt.currentTarget.value})\n        this.stopPropagation = evt => evt.stopPropagation()\n\n        this.handleKeyUp = evt => {\n            if (!this.props.show) return\n\n            if (evt.keyCode === 27) {\n                // Escape\n\n                evt.stopPropagation()\n                this.cancel()\n            } else if (evt.keyCode == 13) {\n                // Enter\n\n                evt.stopPropagation()\n                sabaki.setState({showInputBox: false})\n\n                let {onSubmit = helper.noop} = this.props\n                onSubmit(this.state)\n            }\n        }\n\n        this.cancel = this.cancel.bind(this)\n    }\n\n    shouldComponentUpdate({show, text, onSubmit, onCancel}) {\n        return show !== this.props.show\n            || text !== this.props.text\n            || onSubmit !== this.props.onSubmit\n            || onCancel !== this.props.onCancel\n    }\n\n    componentWillReceiveProps(nextProps) {\n        if (nextProps.show && !this.props.show) {\n            this.setState({value: ''})\n        }\n    }\n\n    componentDidUpdate(prevProps) {\n        if (!prevProps.show && this.props.show) {\n            this.inputElement.focus()\n        }\n    }\n\n    cancel() {\n        if (!this.props.show) return\n\n        if (document.activeElement === this.inputElement)\n            this.inputElement.blur()\n\n        let {onCancel = helper.noop} = this.props\n        sabaki.setState({showInputBox: false})\n        onCancel()\n    }\n\n    render({show, text}, {value}) {\n        return h('section',\n            {\n                id: 'input-box',\n                class: classNames({show}),\n\n                onClick: this.cancel\n            },\n\n            h('div', {class: 'inner', onClick: this.stopPropagation},\n                h('input', {\n                    ref: el => this.inputElement = el,\n                    type: 'text',\n                    name: 'input',\n                    value,\n                    placeholder: text,\n\n                    onInput: this.handleInput,\n                    onKeyUp: this.handleKeyUp,\n                    onBlur: this.cancel\n                })\n            )\n        )\n    }\n}\n\nmodule.exports = InputBox\n","const {h, Component} = require('preact')\n\nconst Goban = require('./Goban')\nconst PlayBar = require('./bars/PlayBar')\nconst EditBar = require('./bars/EditBar')\nconst GuessBar = require('./bars/GuessBar')\nconst AutoplayBar = require('./bars/AutoplayBar')\nconst ScoringBar = require('./bars/ScoringBar')\nconst FindBar = require('./bars/FindBar')\n\nconst gametree = require('../modules/gametree')\n\nclass MainView extends Component {\n    constructor() {\n        super()\n\n        this.handleTogglePlayer = () => sabaki.setPlayer(...this.props.treePosition, -this.props.currentPlayer)\n\n        this.handleToolButtonClick = evt => {\n            sabaki.setState({selectedTool: evt.tool})\n        }\n\n        this.handleFindButtonClick = evt => sabaki.findMove(evt.step, {\n            vertex: this.props.findVertex,\n            text: this.props.findText\n        })\n\n        this.handleGobanResize = this.handleGobanResize.bind(this)\n        this.handleGobanVertexClick = this.handleGobanVertexClick.bind(this)\n        this.handleGobanLineDraw = this.handleGobanLineDraw.bind(this)\n    }\n\n    componentDidMount() {\n        // Pressing Ctrl should show crosshair cursor on Goban in edit mode\n\n        document.addEventListener('keydown', evt => {\n            if (evt.keyCode !== 17) return\n\n            if (this.props.mode === 'edit') {\n                this.setState({gobanCrosshair: true})\n            }\n        })\n\n        document.addEventListener('keyup', evt => {\n            if (evt.keyCode !== 17) return\n\n            if (this.props.mode === 'edit') {\n                this.setState({gobanCrosshair: false})\n            }\n        })\n    }\n\n    componentWillReceiveProps(nextProps) {\n        if (nextProps.mode !== 'edit') {\n            this.setState({gobanCrosshair: false})\n        }\n    }\n\n    handleGobanResize() {\n        /*  Because of board rendering issues, we want the width\n            and the height of `<main>` to be even */\n\n        if (this.mainElement == null) return\n\n        this.mainElement.style.width = ''\n        this.mainElement.style.height = ''\n\n        let {width, height} = window.getComputedStyle(this.mainElement)\n\n        width = parseFloat(width)\n        height = parseFloat(height)\n\n        if (width % 2 !== 0) width++\n        if (height % 2 !== 0) height++\n\n        this.setState({width, height})\n    }\n\n    handleGobanVertexClick(evt) {\n        sabaki.clickVertex(evt.vertex, evt)\n    }\n\n    handleGobanLineDraw(evt) {\n        let [v1, v2] = evt.line\n        sabaki.useTool(this.props.selectedTool, v1, v2)\n        sabaki.editVertexData = null\n    }\n\n    render({\n        mode,\n        treePosition,\n        rootTree,\n        currentPlayer,\n        gameInfo,\n        attachedEngines,\n\n        deadStones,\n        scoringMethod,\n        scoreBoard,\n        heatMap,\n        areaMap,\n        blockedGuesses,\n\n        highlightVertices,\n        showCoordinates,\n        showMoveColorization,\n        showNextMoves,\n        showSiblings,\n        fuzzyStonePlacement,\n        animatedStonePlacement,\n        animatedVertex,\n\n        undoable,\n        undoText,\n        selectedTool,\n        findText,\n        findVertex,\n\n        showLeftSidebar,\n        showSidebar,\n        sidebarWidth,\n        leftSidebarWidth\n    }, {\n        width,\n        height,\n        gobanCrosshair\n    }) {\n        let [tree, index] = treePosition\n        let board = gametree.getBoard(tree, index)\n        let node = tree.nodes[index]\n        let komi = +gametree.getRootProperty(rootTree, 'KM', 0)\n        let paintMap\n\n        if (['scoring', 'estimator'].includes(mode)) {\n            paintMap = areaMap\n        } else if (mode === 'guess') {\n            paintMap = [...Array(board.height)].map(_ => Array(board.width).fill(0))\n\n            for (let [x, y] of blockedGuesses) {\n                paintMap[y][x] = 1\n            }\n        }\n\n        return h('section',\n            {\n                id: 'main',\n                style: {\n                    left: showLeftSidebar ? leftSidebarWidth : null,\n                    right: showSidebar ? sidebarWidth : null\n                }\n            },\n\n            h('main',\n                {\n                    ref: el => this.mainElement = el,\n                    style: {width, height}\n                },\n\n                h(Goban, {\n                    board,\n                    highlightVertices: findVertex && mode === 'find' ? [findVertex]\n                        : highlightVertices,\n                    heatMap,\n                    paintMap,\n                    dimmedStones: ['scoring', 'estimator'].includes(mode) ? deadStones : [],\n\n                    crosshair: gobanCrosshair,\n                    showCoordinates,\n                    showMoveColorization,\n                    showNextMoves: mode !== 'guess' && showNextMoves,\n                    showSiblings: mode !== 'guess' && showSiblings,\n                    fuzzyStonePlacement,\n                    animatedStonePlacement,\n                    animatedVertex,\n\n                    drawLineMode: mode === 'edit' && ['arrow', 'line'].includes(selectedTool)\n                        ? selectedTool : null,\n\n                    onBeforeResize: this.handleGobanResize,\n                    onVertexClick: this.handleGobanVertexClick,\n                    onLineDraw: this.handleGobanLineDraw\n                })\n            ),\n\n            h('section', {id: 'bar'},\n                h(PlayBar, {\n                    mode,\n                    attachedEngines,\n                    playerNames: gameInfo.playerNames,\n                    playerRanks: gameInfo.playerRanks,\n                    playerCaptures: board.captures,\n                    currentPlayer,\n                    showHotspot: 'HO' in node,\n                    undoable,\n                    undoText,\n                    onCurrentPlayerClick: this.handleTogglePlayer\n                }),\n\n                h(EditBar, {\n                    mode,\n                    selectedTool,\n                    onToolButtonClick: this.handleToolButtonClick\n                }),\n\n                h(GuessBar, {\n                    mode,\n                    treePosition\n                }),\n\n                h(AutoplayBar, {\n                    mode,\n                    treePosition\n                }),\n\n                h(ScoringBar, {\n                    type: 'scoring',\n                    mode,\n                    method: scoringMethod,\n                    scoreBoard,\n                    areaMap,\n                    komi\n                }, 'Please select dead stones.'),\n\n                h(ScoringBar, {\n                    type: 'estimator',\n                    mode,\n                    method: scoringMethod,\n                    scoreBoard,\n                    areaMap,\n                    komi\n                }, 'Toggle group status.'),\n\n                h(FindBar, {\n                    mode,\n                    findText,\n                    onButtonClick: this.handleFindButtonClick,\n                })\n            )\n        )\n    }\n}\n\nmodule.exports = MainView\n","const {h, Component} = require('preact')\nconst breaks = require('remark-breaks')\nconst helper = require('../modules/helper')\n\nconst ReactMarkdown = require('react-markdown')\nconst ContentDisplay = require('./ContentDisplay')\n\nfunction typographer(children) {\n    if (!Array.isArray(children)) {\n        return typographer([children])[0]\n    }\n\n    return children.map(child => {\n        if (typeof child !== 'string') return child\n        return helper.typographer(child)\n    })\n}\n\nfunction htmlify(children) {\n    return children.map(child => {\n        if (typeof child !== 'string') return child\n\n        return h(ContentDisplay, {\n            tag: 'span',\n            content: typographer(child)\n        })\n    })\n}\n\nconst generateBasicComponent = tag => ({children}) => h(tag, {}, htmlify(children))\n\nconst Emphasis = generateBasicComponent('em')\nconst Strong = generateBasicComponent('strong')\nconst Delete = generateBasicComponent('del')\nconst ListItem = generateBasicComponent('li')\n\nfunction Paragraph({children}) {\n    return h('p', {}, htmlify(children))\n}\n\nfunction Link({href, title, children}) {\n    if (href.match(/^((ht|f)tps?:\\/\\/|mailto:)/) == null)\n        return h('span', {}, typographer(children))\n\n    return h(ContentDisplay, {}, h('a', {class: 'external', href, title}, typographer(children)))\n}\n\nfunction Image({src, alt}) {\n    return h(Link, {href: src}, typographer(alt))\n}\n\nfunction Heading({level, children}) {\n    return h(`h${level}`, {}, typographer(children))\n}\n\nfunction Html({isBlock, value}) {\n    return h(isBlock ? Paragraph : 'span', {}, value)\n}\n\nclass MarkdownContentDisplay extends Component {\n    render({source}) {\n        return h(ReactMarkdown, {\n            source,\n            plugins: [breaks],\n            renderers: {\n                paragraph: Paragraph,\n                emphasis: Emphasis,\n                strong: Strong,\n                delete: Delete,\n                link: Link,\n                image: Image,\n                linkReference: Link,\n                imageReference: Image,\n                table: null,\n                listItem: ListItem,\n                heading: Heading,\n                code: Paragraph,\n                html: Html\n            }\n        })\n    }\n}\n\nmodule.exports = MarkdownContentDisplay\n","const {h, Component} = require('preact')\n\nconst range = n => [...Array(n)].map((_, i) => i)\n\nclass MiniGoban extends Component {\n    shouldComponentUpdate({board, maxSize, visible}) {\n        return visible !== this.props.visible\n            || maxSize !== this.props.maxSize\n            || board.getPositionHash() !== this.props.board.getPositionHash()\n    }\n\n    render({board, maxSize, visible = true}) {\n        let fieldSize = (maxSize - 1) / Math.max(board.width, board.height)\n        let radius = fieldSize / 2\n        let rangeX = range(board.width)\n        let rangeY = range(board.height)\n\n        return h('svg',\n            {\n                width: fieldSize * board.width + 1,\n                height: fieldSize * board.height + 1,\n                style: {visibility: visible ? 'visible' : 'hidden'}\n            },\n\n            // Draw hoshi points\n\n            board.getHandicapPlacement(9).map(([x, y]) =>\n                h('circle', {\n                    cx: x * fieldSize + radius + 1,\n                    cy: y * fieldSize + radius + 1,\n                    r: 2,\n                    fill: '#5E2E0C'\n                })\n            ),\n\n            // Draw shadows\n\n            rangeX.map(x =>\n                rangeY.map(y =>\n                    board.get([x, y]) !== 0 && h('circle', {\n                        cx: x * fieldSize + radius + 1,\n                        cy: y * fieldSize + radius + 2,\n                        r: radius,\n                        fill: 'rgba(0, 0, 0, .5)'\n                    })\n                )\n            ),\n\n            // Draw stones\n\n            rangeX.map(x =>\n                rangeY.map(y =>\n                    board.get([x, y]) !== 0 && h('circle', {\n                        cx: x * fieldSize + radius + 1,\n                        cy: y * fieldSize + radius + 1,\n                        r: radius,\n                        fill: board.get([x, y]) < 0 ? 'white' : 'black'\n                    })\n                )\n            )\n        )\n    }\n}\n\nmodule.exports = MiniGoban\n","const {remote} = require('electron')\nconst {h, Component} = require('preact')\n\nconst gametree = require('../modules/gametree')\nconst helper = require('../modules/helper')\nconst setting = remote.require('./setting')\n\nconst Slider = require('./Slider')\nconst GameGraph = require('./GameGraph')\nconst CommentBox = require('./CommentBox')\n\nlet sidebarMinWidth = setting.get('view.sidebar_minwidth')\nlet sidebarMinSplit = setting.get('view.properties_minheight')\n\nclass Sidebar extends Component {\n    constructor(props) {\n        super()\n\n        this.state = {\n            sidebarSplit: setting.get('view.properties_height'),\n            sidebarSplitTransition: true\n        }\n\n        this.handleGraphNodeClick = ({button, treePosition, x, y}) => {\n            if (button === 0) {\n                sabaki.setCurrentTreePosition(...treePosition)\n            } else {\n                sabaki.openNodeMenu(...treePosition, {x, y})\n            }\n        }\n\n        this.handleVerticalResizerMouseDown = ({button, x, y}) => {\n            if (button !== 0) return\n\n            this.oldSidebarWidth = this.props.sidebarWidth\n            this.oldMousePosition = [x, y]\n            this.verticalResizerMouseDown = true\n        }\n\n        this.handleHorizontalResizerMouseDown = ({button}) => {\n            if (button !== 0) return\n            this.horizontalResizerMouseDown = true\n        }\n\n        this.handleSliderChange = ({percent}) => {\n            let moveNumber = Math.round((this.state.treeHeight - 1) * percent)\n            sabaki.goToMoveNumber(moveNumber)\n        }\n\n        this.handleStartAutoscrolling = ({step}) => {\n            let minDelay = setting.get('autoscroll.min_interval')\n            let diff = setting.get('autoscroll.diff')\n\n            let scroll = (delay = null) => {\n                sabaki.goStep(step)\n\n                clearTimeout(this.autoscrollId)\n                this.autoscrollId = setTimeout(() => scroll(Math.max(minDelay, delay - diff)), delay)\n            }\n\n            scroll(setting.get('autoscroll.max_interval'))\n        }\n\n        this.handleStopAutoscrolling = () => {\n            clearTimeout(this.autoscrollId)\n        }\n\n        this.handleCommentInput = evt => {\n            sabaki.setComment(...this.props.treePosition, evt)\n        }\n\n        this.componentWillReceiveProps(props)\n    }\n\n    shouldComponentUpdate(nextProps) {\n        return nextProps.showSidebar != this.props.showSidebar || nextProps.showSidebar\n    }\n\n    componentWillReceiveProps({treePosition, rootTree} = {}) {\n        // Update tree height\n\n        if (this.props && treePosition === this.props.treePosition) return\n        this.setState({treeHeight: gametree.getHeight(rootTree)})\n    }\n\n    componentDidMount() {\n        document.addEventListener('mouseup', () => {\n            if (this.verticalResizerMouseDown || this.horizontalResizerMouseDown) {\n                this.verticalResizerMouseDown = false\n                this.horizontalResizerMouseDown = false\n\n                setting.set('view.properties_height', this.state.sidebarSplit)\n                setting.set('view.sidebar_width', this.props.sidebarWidth)\n                this.setState({sidebarSplitTransition: false})\n                window.dispatchEvent(new Event('resize'))\n            }\n        })\n\n        document.addEventListener('mousemove', evt => {\n            if (this.verticalResizerMouseDown) {\n                evt.preventDefault()\n\n                let {sidebarWidth} = this.props\n                let diff = [evt.clientX, evt.clientY].map((x, i) => x - this.oldMousePosition[i])\n\n                sidebarWidth = Math.max(sidebarMinWidth, this.oldSidebarWidth - diff[0])\n                sabaki.setSidebarWidth(sidebarWidth)\n            } else if (this.horizontalResizerMouseDown) {\n                evt.preventDefault()\n\n                let sidebarSplit = Math.min(100 - sidebarMinSplit,\n                    Math.max(sidebarMinSplit, 100 - evt.clientY * 100 / this.element.offsetHeight))\n\n                this.setState({sidebarSplit, sidebarSplitTransition: false})\n            }\n        })\n    }\n\n    render({\n        mode,\n        treePosition,\n        rootTree,\n        showGameGraph,\n        showCommentBox,\n        sidebarWidth,\n\n        graphGridSize,\n        graphNodeSize\n    }, {\n        treeHeight,\n        sidebarSplit,\n        sidebarSplitTransition\n    }) {\n        let [tree, index] = treePosition\n        let node = tree.nodes[index]\n        let level = gametree.getLevel(tree, index)\n\n        return h('section',\n            {\n                ref: el => this.element = el,\n                id: 'sidebar',\n                style: {width: sidebarWidth}\n            },\n\n            h('div', {\n                class: 'verticalresizer',\n                onMouseDown: this.handleVerticalResizerMouseDown\n            }),\n\n            h(Slider, {\n                showSlider: showGameGraph,\n                text: level,\n                percent: (level / (treeHeight - 1)) * 100,\n                height: !showGameGraph ? 0 : !showCommentBox ? 100 : 100 - sidebarSplit,\n\n                onChange: this.handleSliderChange,\n                onStartAutoscrolling: this.handleStartAutoscrolling,\n                onStopAutoscrolling: this.handleStopAutoscrolling\n            }),\n\n            h(GameGraph, {\n                treePosition,\n                showGameGraph,\n                viewportWidth: sidebarWidth,\n                height: !showGameGraph ? 0 : !showCommentBox ? 100 : 100 - sidebarSplit,\n                gridSize: graphGridSize,\n                nodeSize: graphNodeSize,\n\n                onNodeClick: this.handleGraphNodeClick\n            }),\n\n            h(CommentBox, {\n                mode,\n                treePosition,\n                showCommentBox,\n                moveAnnotation: 'BM' in node ? [-1, node.BM[0]]\n                    : 'DO' in node ? [0, 1]\n                    : 'IT' in node ? [1, 1]\n                    : 'TE' in node ? [2, node.TE[0]]\n                    : [null, 1],\n                positionAnnotation: 'UC' in node ? [-2, node.UC[0]]\n                    : 'GW' in node ? [-1, node.GW[0]]\n                    : 'DM' in node ? [0, node.DM[0]]\n                    : 'GB' in node ? [1, node.GB[0]]\n                    : [null, 1],\n                title: 'N' in node ? node.N[0].trim() : '',\n                comment: 'C' in node ? node.C[0] : '',\n                height: !showCommentBox ? 0 : !showGameGraph ? 100 : sidebarSplit,\n                sidebarSplitTransition,\n\n                onResizerMouseDown: this.handleHorizontalResizerMouseDown,\n                onCommentInput: this.handleCommentInput\n            })\n        )\n    }\n}\n\nmodule.exports = Sidebar\n","const {remote} = require('electron')\nconst {h, Component} = require('preact')\n\nconst helper = require('../modules/helper')\nconst setting = remote.require('./setting')\n\nclass Slider extends Component {\n    constructor() {\n        super()\n\n        this.handleSliderAreaMouseDown = evt => {\n            if (evt.button !== 0) return\n\n            this.sliderAreaMouseDown = true\n            document.dispatchEvent(new MouseEvent('mousemove', evt))\n        }\n\n        this.handleButtonMouseDown = evt => {\n            if (evt.button !== 0) return\n\n            let type = evt.currentTarget.className\n            let {onStartAutoscrolling = helper.noop} = this.props\n\n            this.buttonMouseDown = type\n            onStartAutoscrolling({step: type === 'prev' ? -1 : 1})\n        }\n    }\n\n    componentDidMount() {\n        document.addEventListener('mouseup', () => {\n            this.sliderAreaMouseDown = false\n\n            if (this.buttonMouseDown != null) {\n                let type = this.buttonMouseDown\n                let {onStopAutoscrolling = helper.noop} = this.props\n\n                this.buttonMouseDown = null\n                onStopAutoscrolling({step: type === 'prev' ? -1 : 1})\n            }\n        })\n\n        document.addEventListener('mousemove', evt => {\n            if (!this.sliderAreaMouseDown) return\n\n            let {onChange = helper.noop} = this.props\n            let {offsetTop, offsetHeight} = this.slidingAreaElement\n            let percent = Math.min(1, Math.max(0, (evt.clientY - offsetTop) / offsetHeight))\n\n            onChange({percent})\n        })\n    }\n\n    shouldComponentUpdate({showSlider, height}) {\n        return showSlider && (height !== this.props.height\n            || this.sliderAreaMouseDown\n            || this.buttonMouseDown\n            || !this.dirty)\n    }\n\n    componentWillReceiveProps() {\n        // Debounce rendering\n\n        this.dirty = true\n\n        clearTimeout(this.renderId)\n        this.renderId = setTimeout(() => {\n            this.dirty = false\n            this.setState(this.state)\n        }, setting.get('graph.delay'))\n    }\n\n    render({height, text, percent}) {\n        return h('section', {id: 'slider', style: {height: height + '%'}},\n            h('a', {\n                href: '#',\n                class: 'prev',\n                onMouseDown: this.handleButtonMouseDown\n            }, '▲'),\n\n            h('a', {\n                href: '#',\n                class: 'next',\n                onMouseDown: this.handleButtonMouseDown\n            }, '▼'),\n\n            h('div',\n                {\n                    ref: el => this.slidingAreaElement = el,\n                    class: 'inner',\n                    onMouseDown: this.handleSliderAreaMouseDown\n                },\n\n                h('span', {style: {top: percent + '%'}}, text)\n            )\n        )\n    }\n}\n\nmodule.exports = Slider\n","const {h, Component} = require('preact')\nconst classNames = require('classnames')\n\nclass Bar extends Component {\n    constructor(props) {\n        super(props)\n\n        this.state = {\n            hidecontent: props.type !== props.mode\n        }\n\n        this.componentWillReceiveProps(props)\n        this.onCloseButtonClick = () => sabaki.setMode('play')\n    }\n\n    componentWillReceiveProps(nextProps) {\n        if (nextProps.type === nextProps.mode) {\n            clearTimeout(this.hidecontentId)\n\n            if (this.state.hidecontent)\n                this.setState({hidecontent: false})\n        } else {\n            if (!this.state.hidecontent)\n                this.hidecontentId = setTimeout(() => this.setState({hidecontent: true}), 500)\n        }\n    }\n\n    shouldComponentUpdate(nextProps) {\n        return nextProps.mode !== this.props.mode || nextProps.mode === nextProps.type\n    }\n\n    render({children, type, mode, class: c = ''}, {hidecontent}) {\n        return h('section',\n            {\n                id: type,\n                class: classNames(c, {\n                    bar: true,\n                    current: type === mode,\n                    hidecontent\n                })\n            },\n\n            children,\n            h('a', {class: 'close', href: '#', onClick: this.onCloseButtonClick})\n        )\n    }\n}\n\nmodule.exports = Bar\n","const {h, Component} = require('preact')\nconst classNames = require('classnames')\n\nconst Bar = require('./Bar')\nconst helper = require('../../modules/helper')\n\nclass EditBar extends Component {\n    constructor() {\n        super()\n\n        this.state = {\n            stoneTool: 1\n        }\n\n        this.handleToolButtonClick = this.handleToolButtonClick.bind(this)\n    }\n\n    componentWillReceiveProps({selectedTool}) {\n        if (selectedTool === this.props.selectedTool) return\n\n        if (selectedTool.indexOf('stone') === 0) {\n            this.setState({stoneTool: +selectedTool.replace('stone_', '')})\n        }\n    }\n\n    shouldComponentUpdate(nextProps) {\n        return nextProps.mode !== this.props.mode || nextProps.mode === 'edit'\n    }\n\n    handleToolButtonClick(evt) {\n        let {selectedTool, onToolButtonClick = helper.noop} = this.props\n\n        evt.tool = evt.currentTarget.dataset.id\n\n        if (evt.tool.indexOf('stone') === 0 && selectedTool.indexOf('stone') === 0) {\n            evt.tool = `stone_${-this.state.stoneTool}`\n            this.setState(({stoneTool}) => ({stoneTool: -stoneTool}))\n        }\n\n        onToolButtonClick(evt)\n    }\n\n    renderButton(title, toolId, selected = false) {\n        return h('li', {class: classNames({selected})},\n            h('a',\n                {\n                    title,\n                    href: '#',\n                    'data-id': toolId,\n                    onClick: this.handleToolButtonClick\n                },\n\n                h('img', {src: `/static/game/img/edit/${toolId}.svg`})\n            )\n        )\n    }\n\n    render({selectedTool}, {stoneTool}) {\n        let isSelected = ([, id]) => id.replace(/_-?1$/, '') === selectedTool.replace(/_-?1$/, '')\n\n        return h(Bar, Object.assign({type: 'edit'}, this.props),\n            h('ul', {},\n                [\n                    ['Stone Tool', `stone_${stoneTool}`],\n                    ['Cross Tool', 'cross'],\n                    ['Triangle Tool', 'triangle'],\n                    ['Square Tool', 'square'],\n                    ['Circle Tool', 'circle'],\n                    ['Line Tool', 'line'],\n                    ['Arrow Tool', 'arrow'],\n                    ['Label Tool', 'label'],\n                    ['Number Tool', 'number']\n                ].map(x =>\n                    this.renderButton(...x, isSelected(x))\n                )\n            )\n        )\n    }\n}\n\nmodule.exports = EditBar\n","const {h, Component} = require('preact')\nconst Bar = require('./Bar')\nconst helper = require('../../modules/helper')\n\nclass FindBar extends Component {\n    constructor() {\n        super()\n\n        this.handleChange = evt => {\n            sabaki.setState({findText: evt.currentTarget.value})\n        }\n\n        this.handleButtonClick = evt => {\n            evt.preventDefault()\n\n            let step = evt.currentTarget.classList.contains('next') ? 1 : -1\n            let {onButtonClick = helper.noop} = this.props\n\n            evt.step = step\n            onButtonClick(evt)\n        }\n    }\n\n    componentDidUpdate(prevProps) {\n        if (prevProps.mode !== this.props.mode) {\n            if (this.props.mode === 'find') {\n                this.inputElement.focus()\n            } else {\n                this.inputElement.blur()\n            }\n        }\n    }\n\n    render({findText}) {\n        return h(Bar, Object.assign({type: 'find'}, this.props),\n            h('form', {},\n                h('input', {\n                    ref: el => this.inputElement = el,\n                    type: 'text',\n                    placeholder: 'Find',\n                    value: findText,\n                    onInput: this.handleChange\n                }),\n\n                h('button', {class: 'next', onClick: this.handleButtonClick},\n                    h('img', {src: '/static/game/node_modules/octicons/build/svg/chevron-down.svg', height: 20, alt: 'Next'})\n                ),\n                h('button', {class: 'prev', onClick: this.handleButtonClick},\n                    h('img', {src: '/static/game/node_modules/octicons/build/svg/chevron-up.svg', height: 20, alt: 'Previous'})\n                )\n            )\n        )\n    }\n}\n\nmodule.exports = FindBar\n","const {shell, clipboard, remote} = require('electron')\nconst {Menu} = require('electron').remote\nconst {h, Component} = require('preact')\nconst classNames = require('classnames')\n\nconst helper = require('../../modules/helper')\nconst setting = remote.require('./setting')\n\nlet toggleSetting = key => setting.set(key, !setting.get(key))\n\nclass PlayBar extends Component {\n    constructor() {\n        super()\n\n        this.handleCurrentPlayerClick = () => this.props.onCurrentPlayerClick\n        this.handleUndoButtonClick = () => sabaki.undo()\n\n        this.handleMenuClick = () => {\n            let template = [\n                {\n                    label: `About ${sabaki.appName}…`,\n                    click: () => shell.openExternal('http://sabaki.yichuanshen.de')\n                },\n                {type: 'separator'},\n                {\n                    label: 'New File',\n                    click: () => sabaki.newFile({playSound: true, showInfo: true})\n                },\n                {\n                    label: 'Open File…',\n                    click: () => sabaki.loadFile()\n                },\n                {\n                    label: 'Download SGF',\n                    click: () => sabaki.saveFile(sabaki.state.representedFilename)\n                },\n                {\n                    label: 'Load SGF from Clipboard',\n                    click: () => {\n                        let content = clipboard.readText()\n                        if (content == null) return\n                        sabaki.loadContent(content, 'sgf', {ignoreEncoding: true})\n                    }\n                },\n                {\n                    label: 'Copy SGF to Clipboard',\n                    click: () => clipboard.writeText(sabaki.getSGF())\n                },\n                {type: 'separator'},\n                {\n                    label: 'Show &Coordinates',\n                    checked: setting.get('view.show_coordinates'),\n                    click: () => toggleSetting('view.show_coordinates')\n                },\n                {\n                    label: 'Show Move Colori&zation',\n                    checked: setting.get('view.show_move_colorization'),\n                    click: () => toggleSetting('view.show_move_colorization')\n                },\n                {\n                    label: 'Show &Next Moves',\n                    checked: setting.get('view.show_next_moves'),\n                    click: () => toggleSetting('view.show_next_moves')\n                },\n                {\n                    label: 'Show &Sibling Variations',\n                    checked: setting.get('view.show_siblings'),\n                    click: () => toggleSetting('view.show_siblings')\n                },\n                {\n                    label: '&Manage Games…',\n                    click: () => sabaki.openDrawer('gamechooser')\n                },\n                {type: 'separator'},\n                {\n                    label: '&Pass',\n                    click: () => sabaki.makeMove([-1, -1], {sendToEngine: true})\n                },\n                {\n                    label: '&Resign',\n                    click: () => sabaki.makeResign()\n                },\n                {type: 'separator'},\n                {\n                    label: 'Es&timate',\n                    click: () => sabaki.setMode('estimator')\n                },\n                {\n                    label: '&Score',\n                    click: () => sabaki.setMode('scoring')\n                },\n                {\n                    label: '&Edit',\n                    click: () => sabaki.setMode('edit')\n                },\n                {\n                    label: '&Find',\n                    click: () => sabaki.setMode('find')\n                },\n                {type: 'separator'},\n                {\n                    label: '&Info',\n                    click: () => sabaki.openDrawer('info')\n                }\n            ]\n\n            let {left, top} = this.menuButtonElement.getBoundingClientRect()\n            helper.popupMenu(template, left, top)\n        }\n    }\n\n    shouldComponentUpdate(nextProps) {\n        return nextProps.mode !== this.props.mode || nextProps.mode === 'play'\n    }\n\n    render({\n        mode,\n        attachedEngines,\n        playerNames,\n        playerRanks,\n        playerCaptures,\n        currentPlayer,\n        showHotspot,\n        undoable,\n        undoText,\n\n        onCurrentPlayerClick = helper.noop\n    }) {\n        let captureStyle = index => ({opacity: playerCaptures[index] === 0 ? 0 : .7})\n        let isEngine = Array(attachedEngines.length).fill(false)\n\n        attachedEngines.forEach((engine, i) => {\n            if (engine == null) return\n\n            playerNames[i] = engine.name\n            playerRanks[i] = null\n            isEngine[i] = true\n        })\n\n        return h('header',\n            {\n                class: classNames({\n                    undoable,\n                    hotspot: showHotspot,\n                    current: mode === 'play'\n                })\n            },\n\n            h('span', {id: 'player_1'},\n                h('span', {class: 'captures', style: captureStyle(0)}, playerCaptures[0]), ' ',\n                playerRanks[0] && h('span', {class: 'rank'}, playerRanks[0]), ' ',\n\n                h('span', {\n                    class: classNames('name', {engine: isEngine[0]}),\n                    title: isEngine[0] && 'Engine'\n                }, playerNames[0] || 'Black')\n            ),\n\n            h('span', {id: 'player_-1'},\n                h('span', {\n                    class: classNames('name', {engine: isEngine[1]}),\n                    title: isEngine[1] && 'Engine'\n                }, playerNames[1] || 'White'), ' ',\n\n                playerRanks[1] && h('span', {class: 'rank'}, playerRanks[1]), ' ',\n                h('span', {class: 'captures', style: captureStyle(1)}, playerCaptures[1])\n            ),\n\n            h('img', {\n                src: `./img/ui/player_${currentPlayer}.svg`,\n                class: 'current-player',\n                height: 22,\n                title: 'Change Player',\n                onClick: onCurrentPlayerClick\n            }),\n\n            h('div', {class: 'hotspot', title: 'Hotspot'}),\n\n            h('a',\n                {\n                    class: 'undo',\n                    title: undoText,\n                    onClick: this.handleUndoButtonClick\n                },\n                h('img', {src: './node_modules/octicons/build/svg/reply.svg', height: 21})\n            ),\n\n            h('a',\n                {\n                    ref: el => this.menuButtonElement = el,\n                    id: 'headermenu',\n                    onClick: this.handleMenuClick\n                },\n                h('img', {src: './node_modules/octicons/build/svg/three-bars.svg', height: 21})\n            )\n        )\n    }\n}\n\nmodule.exports = PlayBar\n","const {h, Component} = require('preact')\nconst Bar = require('./Bar')\nconst helper = require('../../modules/helper')\n\nclass ScoringBar extends Component {\n    constructor() {\n        super()\n\n        this.handleButtonClick = () => sabaki.openDrawer('score')\n    }\n\n    render({type, children, method, areaMap, scoreBoard, komi}) {\n        let score = scoreBoard ? scoreBoard.getScore(areaMap) : {area: [], territory: [], captures: []}\n        let result = method === 'area' ? score.area[0] - score.area[1] - komi\n            : score.territory[0] - score.territory[1] + score.captures[0] - score.captures[1] - komi\n        let resultString = !scoreBoard ? '' : result > 0 ? `B+${result}` : result < 0 ? `W+${-result}` : 'Draw'\n\n        return h(Bar, Object.assign({type}, this.props),\n            h('div', {class: 'result'},\n                h('button', {onClick: this.handleButtonClick}, 'Details'),\n                h('strong', {}, resultString),\n            ), ' ',\n\n            children\n        )\n    }\n}\n\nmodule.exports = ScoringBar\n","const {h, Component} = require('preact')\nconst classNames = require('classnames')\n\nclass Drawer extends Component {\n    constructor(props) {\n        super(props)\n\n        this.state = {\n            hidecontent: props.show\n        }\n\n        this.componentWillReceiveProps(props)\n    }\n\n    componentWillReceiveProps(nextProps) {\n        if (nextProps.show) {\n            clearTimeout(this.hidecontentId)\n\n            if (this.state.hidecontent)\n                this.setState({hidecontent: false})\n        } else {\n            if (!this.state.hidecontent)\n                this.hidecontentId = setTimeout(() => this.setState({hidecontent: true}), 500)\n        }\n    }\n\n    render({type, show, children}, {hidecontent}) {\n        return h('section', {\n            id: type,\n            class: classNames({\n                drawer: true,\n                hidecontent,\n                show\n            })\n        }, children)\n    }\n}\n\nmodule.exports = Drawer\n","const {remote} = require('electron')\nconst {h, Component} = require('preact')\nconst classNames = require('classnames')\nconst sgf = require('@sabaki/sgf')\n\nconst MiniGoban = require('../MiniGoban')\nconst Drawer = require('./Drawer')\n\nconst dialog = require('../../modules/dialog')\nconst fileformats = require('../../modules/fileformats')\nconst gametree = require('../../modules/gametree')\nconst gamesort = require('../../modules/gamesort')\nconst helper = require('../../modules/helper')\nconst setting = remote.require('./setting')\n\nlet thumbnailSize = setting.get('gamechooser.thumbnail_size')\nlet itemMinWidth = thumbnailSize + 12 + 20\nlet itemHeight = 253 + 10 + 20\n\nlet getPreviewBoard = tree => {\n    let tp = gametree.navigate(tree, 0, 30)\n    if (!tp) tp = gametree.navigate(tree, 0, gametree.getCurrentHeight(tree) - 1)\n    return gametree.getBoard(...tp)\n}\n\nclass GameListItem extends Component {\n    constructor() {\n        super()\n\n        let events = ['Click', 'ContextMenu', 'DragStart', 'DragOver']\n\n        for (let name of events) {\n            this[`handle${name}`] = evt => {\n                let callback = this.props[`on${name}`]\n                evt.tree = this.props.tree\n                if (callback) callback(evt)\n            }\n        }\n    }\n\n    shouldComponentUpdate(nextProps) {\n        for (let i in nextProps)\n            if (nextProps[i] !== this.props[i]) return true\n\n        return false\n    }\n\n    render({tree, left, top, draggable, showThumbnail, insertBefore, insertAfter}) {\n        let gameInfo = sabaki.getGameInfo(tree)\n        let {gameName, eventName, blackName, blackRank, whiteName, whiteRank} = gameInfo\n        let name = gameName || eventName || ''\n\n        return h('li',\n            {\n                ref: el => this.element = el,\n                class: classNames({\n                    insertbefore: insertBefore,\n                    insertafter: insertAfter\n                }),\n                style: {left, top}\n            },\n\n            h('div',\n                {\n                    draggable,\n                    onClick: this.handleClick,\n                    onContextMenu: this.handleContextMenu,\n                    onDragStart: this.handleDragStart,\n                    onDragOver: this.handleDragOver\n                },\n\n                h('span', {title: name}, name),\n\n                h(MiniGoban, {\n                    board: getPreviewBoard(tree),\n                    maxSize: thumbnailSize,\n                    visible: showThumbnail\n                }),\n\n                h('span', {class: 'black', title: blackRank}, blackName || 'Black'),\n                h('span', {class: 'white', title: whiteRank}, whiteName || 'White')\n            )\n        )\n    }\n}\n\nclass GameChooserDrawer extends Component {\n    constructor() {\n        super()\n\n        this.itemElements = {}\n\n        this.state = {\n            scrollTop: 0,\n            insertBefore: -1,\n            animation: false,\n            filterText: ''\n        }\n\n        this.handleFilterTextChange = evt => this.setState({\n            filterText: evt.currentTarget.value.trim()\n        })\n\n        this.handleCloseButtonClick = () => sabaki.closeDrawer()\n\n        this.handleListScroll = evt => {\n            this.setState({scrollTop: evt.currentTarget.scrollTop})\n        }\n\n        this.handleItemContextMenu = evt => {\n            let template = [\n                {\n                    label: '&Remove Game',\n                    click: () => {\n                        if (dialog.showMessageBox(\n                            'Do you really want to remove this game permanently?',\n                            'warning',\n                            ['Remove Game', 'Cancel'], 1\n                        ) === 1) return\n\n                        let {gameTrees, onChange = helper.noop} = this.props\n                        let index = gameTrees.indexOf(evt.tree)\n\n                        onChange({gameTrees: gameTrees.filter((_, i) => i !== index)})\n                    }\n                },\n                {\n                    label: 'Remove &Other Games',\n                    click: () => {\n                        if (dialog.showMessageBox(\n                            'Do you really want to remove all other games permanently?',\n                            'warning',\n                            ['Remove Games', 'Cancel'], 1\n                        ) === 1) return\n\n                        let {onChange = helper.noop} = this.props\n                        onChange({gameTrees: [evt.tree]})\n                    }\n                }\n            ]\n\n            helper.popupMenu(template, evt.clientX, evt.clientY)\n        }\n\n        this.handleItemDragStart = evt => {\n            this.dragData = this.props.gameTrees.indexOf(evt.tree)\n        }\n\n        this.handleItemDragOver = evt => {\n            if (this.dragData == null) return\n\n            evt.preventDefault()\n\n            let element = evt.currentTarget\n            let index = this.props.gameTrees.indexOf(evt.tree)\n\n            let x = evt.clientX\n            let {left, width} = element.getBoundingClientRect()\n            let middle = left + width / 2\n\n            if (x <= middle - 10) {\n                this.setState({insertBefore: index})\n            } else if (x >= middle + 10) {\n                this.setState({insertBefore: index + 1})\n            }\n        }\n\n        this.handleItemDrop = evt => {\n            let {gameTrees, onChange = helper.noop} = this.props\n            let {insertBefore} = this.state\n            let newGameTrees = gameTrees.slice()\n\n            if (this.dragData == null || insertBefore < 0) return\n            if (insertBefore > this.dragData) insertBefore--\n\n            let [tree] = newGameTrees.splice(this.dragData, 1)\n            newGameTrees.splice(insertBefore, 0, tree)\n\n            this.dragData = null\n            this.setState({insertBefore: -1})\n\n            onChange({gameTrees: newGameTrees})\n        }\n\n        this.handleCancelDrag = () => {\n            this.dragData = null\n            this.setState({insertBefore: -1})\n        }\n\n        this.handleItemClick = evt => {\n            let {gameTrees} = this.props\n            let {onItemClick = helper.noop} = this.props\n            let index = gameTrees.indexOf(evt.tree)\n\n            evt.selectedTree = evt.tree\n            evt.selectedIndex = index\n\n            onItemClick(evt)\n        }\n\n        this.handleAddButtonClick = evt => {\n            let template = [\n                {\n                    label: 'Add &New Game',\n                    click: () => {\n                        let tree = sabaki.getEmptyGameTree()\n                        let {gameTrees, onChange = helper.noop} = this.props\n\n                        onChange({gameTrees: [...gameTrees, tree]})\n                    }\n                },\n                {\n                    label: 'Add &Existing Files…',\n                    click: () => {\n                        dialog.showOpenDialog({\n                            properties: ['openFile', 'multiSelections'],\n                            filters: [...fileformats.meta, {name: 'All Files', extensions: ['*']}]\n                        }, ({result}) => {\n                            let {onChange = helper.noop} = this.props\n\n                            sabaki.setBusy(true)\n\n                            if (result) {\n                                try {\n                                    for (let file of result) {\n                                        fileformats.parseFile(file, helper.noop, ({trees}) => {\n                                            onChange({gameTrees: [...this.props.gameTrees, ...trees]})\n                                        })\n                                    }\n                                } catch (err) {\n                                    dialog.showMessageBox('Some files are unreadable.', 'warning')\n                                }\n                            }\n\n                            sabaki.setBusy(false)\n                        })\n                    }\n                }\n            ]\n\n            let element = evt.currentTarget\n            let {left, bottom} = element.getBoundingClientRect()\n\n            helper.popupMenu(template, left, bottom)\n        }\n\n        this.handleSortButtonClick = evt => {\n            let sortWith = (sorter) => {\n                return () => {\n                    sabaki.setBusy(true)\n\n                    let {gameTrees, onChange = helper.noop} = this.props\n\n                    gameTrees = sorter(gameTrees)\n\n                    onChange({gameTrees})\n                    sabaki.setBusy(false)\n                }\n            }\n\n            let template = [\n                {label: '&Black Player', click: sortWith(gamesort.byPlayerBlack)},\n                {label: '&White Player', click: sortWith(gamesort.byPlayerWhite)},\n                {label: 'Black R&ank', click: sortWith(gamesort.byBlackRank)},\n                {label: 'White Ran&k', click: sortWith(gamesort.byWhiteRank)},\n                {label: 'Game &Name', click: sortWith(gamesort.byGameName)},\n                {label: 'Game &Event', click: sortWith(gamesort.byEvent)},\n                {label: '&Date', click: sortWith(gamesort.byDate)},\n                {label: 'Number of &Moves', click: sortWith(gamesort.byNumberOfMoves)},\n                {type: 'separator'},\n                {label: '&Reverse', click: sortWith(gamesort.reverse)}\n            ]\n\n            let element = evt.currentTarget\n            let {left, bottom} = element.getBoundingClientRect()\n\n            helper.popupMenu(template, left, bottom)\n        }\n    }\n\n    componentDidMount() {\n        window.addEventListener('resize', () => this.resize())\n\n        this.resize()\n        this.forceUpdate()\n    }\n\n    shouldComponentUpdate({show}, {animation}) {\n        return animation !== this.state.animation || show || show !== this.props.show\n    }\n\n    componentDidUpdate(prevProps, prevState) {\n        if (this.state.scrollTop !== prevState.scrollTop\n        && this.state.scrollTop !== this.gamesListElement.scrollTop) {\n            // Update scroll top\n\n            this.gamesListElement.scrollTop = this.state.scrollTop\n            this.setState({scrollTop: this.gamesListElement.scrollTop})\n        }\n\n        if (this.props.show && prevProps.gameTrees.length !== this.props.gameTrees.length) {\n            // Scroll down\n\n            this.gamesListElement.scrollTop = this.gamesListElement.scrollHeight\n            this.setState({scrollTop: this.gamesListElement.scrollTop})\n        }\n\n        if (!prevProps.show && this.props.show) {\n            // Scroll current list element into view\n\n            let index = this.shownGameTrees.findIndex(([, i]) => i === this.props.gameIndex)\n            let scrollTop = 0\n            if (index >= 0) scrollTop = this.getRowFromIndex(index) * itemHeight\n\n            this.gamesListElement.scrollTop = scrollTop\n            this.setState({scrollTop: this.gamesListElement.scrollTop})\n        }\n\n        if (prevProps.show !== this.props.show) {\n            // Animate\n\n            let gobanRect = document.getElementById('goban').getBoundingClientRect()\n            let drawerRect = document.getElementById('gamechooser').getBoundingClientRect()\n\n            let itemElement = this.itemElements[this.props.gameIndex]\n            let svgElement = itemElement != null ? itemElement.querySelector('svg') : null\n\n            if (itemElement != null && svgElement != null) {\n                let {width, height, left, top} = itemElement.querySelector('svg').getBoundingClientRect()\n\n                let miniGobanRect = {\n                    left: left - drawerRect.left,\n                    top: top - drawerRect.top,\n                    width,\n                    height\n                }\n\n                let direction = this.props.show ? 'reverse' : 'normal'\n\n                this.setState({animation: [miniGobanRect, gobanRect, direction]})\n                setTimeout(() => this.setState({animation: null}), 600)\n            }\n        }\n    }\n\n    resize() {\n        let innerWidth = this.gamesListElement.offsetWidth - 28\n        let height = this.gamesListElement.offsetHeight\n        let rowCount = Math.floor(innerWidth / itemMinWidth)\n\n        this.setState({innerWidth, height, rowCount})\n    }\n\n    getRowFromIndex(i) {\n        return (i - i % this.state.rowCount) / this.state.rowCount\n    }\n\n    render({\n        show,\n        gameTrees,\n        gameIndex\n    }, {\n        filterText,\n        animation,\n        scrollTop,\n        insertBefore,\n        rowCount,\n        innerWidth,\n        height\n    }) {\n        let itemWidth = Math.floor(innerWidth / rowCount)\n\n        this.shownGameTrees = gameTrees.map((tree, index) => {\n            return [tree, index]\n        }).filter(([tree]) => {\n            let gameInfo = sabaki.getGameInfo(tree)\n            let data = Object.keys(gameInfo).map(x => gameInfo[x])\n\n            return data.join(' ').toLowerCase().includes(filterText.toLowerCase())\n        })\n\n        return h('div', {onDrop: this.handleCancelDrag},\n            h('style', {}, `\n                #gamechooser .games-list .placeholder {\n                    height: ${(this.getRowFromIndex(this.shownGameTrees.length - 1) + 1) * itemHeight + 20}px;\n                }\n\n                #gamechooser .games-list li {\n                    width: ${itemWidth - 20}px;\n                }\n            `, animation && `\n                #gamechooser-animation {\n                    animation: gamechooser-animation .5s ${animation[2]} forwards;\n                }\n\n                @keyframes gamechooser-animation {\n                    from {\n                        transform: translate(${animation[0].left}px, ${animation[0].top}px);\n                        opacity: 1;\n                    }\n                    to {\n                        transform: translate(${animation[1].left}px, ${animation[1].top}px)\n                            scale(${animation[1].width / animation[0].width},\n                            ${animation[1].height / animation[0].height});\n                        opacity: 0;\n                    }\n                }\n            `),\n\n            h(Drawer,\n                {\n                    type: 'gamechooser',\n                    show\n                },\n\n                h('h2', {}, 'Manage Games'),\n\n                h('input', {\n                    type: 'search',\n                    name: 'filter',\n                    placeholder: 'Filter',\n                    value: filterText,\n                    onInput: this.handleFilterTextChange\n                }),\n\n                h('div',\n                    {\n                        ref: el => this.gamesListElement = el,\n                        class: 'games-list',\n\n                        onScroll: this.handleListScroll,\n                        onDrop: this.handleItemDrop\n                    },\n\n                    h('div', {class: 'placeholder'}),\n\n                    h('ol', {}, this.shownGameTrees.map(([tree, index], i) => {\n                        let row = this.getRowFromIndex(i)\n                        let itemTop = row * itemHeight + 10\n                        let itemLeft = (i - row * rowCount) * itemWidth + 10\n\n                        if (index !== gameIndex\n                        && (itemTop + itemHeight * 2 <= scrollTop || itemTop - itemHeight >= scrollTop + height))\n                            return\n\n                        return h(GameListItem, {\n                            ref: item => {\n                                if (item != null) this.itemElements[index] = item.element\n                            },\n                            key: tree.id,\n                            tree,\n                            top: itemTop,\n                            left: itemLeft,\n                            draggable: filterText === '',\n\n                            showThumbnail: index !== gameIndex || !animation,\n                            insertBefore: insertBefore === index,\n                            insertAfter: i === this.shownGameTrees.length - 1\n                                && insertBefore === index + 1,\n\n                            onClick: this.handleItemClick,\n                            onContextMenu: this.handleItemContextMenu,\n                            onDragStart: this.handleItemDragStart,\n                            onDragOver: this.handleItemDragOver\n                        })\n                    }))\n                ),\n\n                h('p', {},\n                    h('button', {\n                        type: 'button',\n                        class: 'dropdown',\n                        onClick: this.handleAddButtonClick\n                    }, 'Add'),\n\n                    h('button', {\n                        type: 'button',\n                        class: 'dropdown',\n                        onClick: this.handleSortButtonClick\n                    }, 'Sort By'),\n\n                    h('button', {\n                        type: 'button',\n                        onClick: this.handleCloseButtonClick\n                    }, 'Close')\n                )\n            ),\n\n            h('div',\n                {\n                    id: 'gamechooser-animation',\n                    style: !animation ? {\n                        opacity: 0,\n                        pointerEvents: 'none'\n                    } : {}\n                },\n\n                h(MiniGoban, {\n                    board: getPreviewBoard(gameTrees[gameIndex]),\n                    maxSize: thumbnailSize\n                })\n            )\n        )\n    }\n}\n\nmodule.exports = GameChooserDrawer\n","const {remote} = require('electron')\nconst {h, Component} = require('preact')\nconst classNames = require('classnames')\nconst Pikaday = require('pikaday')\nconst sgf = require('@sabaki/sgf')\n\nconst Drawer = require('./Drawer')\n\nconst gametree = require('../../modules/gametree')\nconst helper = require('../../modules/helper')\nconst setting = remote.require('./setting')\n\nclass InfoDrawerItem extends Component {\n    render({title, children}) {\n        return h('li', {},\n            h('label', {},\n                h('span', {}, title + ':'),\n                children[0]\n            ),\n            children.slice(1)\n        )\n    }\n}\n\nclass InfoDrawer extends Component {\n    constructor() {\n        super()\n\n        this.handleSubmitButtonClick = async evt => {\n            evt.preventDefault()\n\n            let [tree, index] = this.props.treePosition\n            let emptyTree = !tree.parent && tree.nodes.length === 1 && tree.subtrees.length === 0\n\n            let keys = ['blackName', 'blackRank', 'whiteName', 'whiteRank',\n                'gameName', 'eventName', 'date', 'result', 'komi']\n\n            let data = keys.reduce((acc, key) => {\n                acc[key] = Array.isArray(this.state[key])\n                    && this.state[key].every(x => x == null) ? null : this.state[key]\n                return acc\n            }, {})\n\n            if (emptyTree) {\n                data.handicap = this.state.handicap\n                data.size = this.state.size\n            }\n\n            sabaki.setGameInfo(this.props.treePosition[0], data)\n            sabaki.closeDrawer()\n            sabaki.attachEngines(...this.state.engines)\n\n            await sabaki.waitForRender()\n\n            let i = this.props.currentPlayer > 0 ? 0 : 1\n            let startGame = setting.get('gtp.start_game_after_attach')\n\n            if (startGame && sabaki.attachedEngineControllers[i] != null) {\n                sabaki.startGeneratingMoves()\n            }\n        }\n\n        this.handleCancelButtonClick = evt => {\n            evt.preventDefault()\n            sabaki.closeDrawer()\n        }\n\n        this.handleBoardWidthFocus = () => {\n            this.combinedSizeFields = this.state.size[0] === this.state.size[1]\n        }\n\n        this.handleBoardWidthChange = evt => {\n            let {value} = evt.currentTarget\n            if (value === '' || isNaN(value)) value = null\n            else value = +value\n\n            this.setState(({size: [, height]}) => ({\n                size: [value, this.combinedSizeFields ? value : height]\n            }))\n        }\n\n        this.handleBoardHeightChange = evt => {\n            let {value} = evt.currentTarget\n            if (value === '' || isNaN(value)) value = null\n            else value = +value\n\n            this.setState(({size: [width, ]}) => ({size: [width, value]}))\n        }\n\n        this.handleSizeSwapButtonClick = () => {\n            this.setState(({size}) => ({size: size.reverse()}))\n        }\n\n        this.handleSwapPlayers = () => {\n            this.setState(({engines, blackName, blackRank, whiteName, whiteRank}) => ({\n                engines: (engines || [null, null]).reverse(),\n                blackName: whiteName,\n                whiteName: blackName,\n                blackRank: whiteRank,\n                whiteRank: blackRank\n            }))\n        }\n\n        this.handleDateInputChange = evt => {\n            this.setState({date: evt.currentTarget.value})\n            this.markDates()\n        }\n\n        this.handleDateInputFocus = () => {\n            this.pikaday.show()\n        }\n\n        this.handleDateInputBlur = () => {\n            setTimeout(() => {\n                if (!this.elementInPikaday(document.activeElement))\n                    this.pikaday.hide()\n            }, 50)\n        }\n\n        this.handleShowResultClick = () => {\n            this.setState({showResult: true})\n        }\n\n        this.handleInputChange = [\n            'blackRank', 'blackName',\n            'whiteRank', 'whiteName',\n            'gameName', 'eventName',\n            'komi', 'result', 'handicap'\n        ].reduce((acc, key) => {\n            acc[key] = ({currentTarget}) => {\n                this.setState({[key]: currentTarget.value === '' ? null : currentTarget.value})\n            }\n\n            return acc\n        }, {})\n\n        this.handleEngineMenuClick = [0, 1].map(index => evt => {\n            let engines = setting.get('engines.list')\n            let nameKey = ['blackName', 'whiteName'][index]\n            let autoName = this.state.engines[index] == null\n                ? this.state[nameKey] == null\n                : this.state[nameKey] === this.state.engines[index].name.trim()\n\n            let template = [\n                {\n                    label: 'Manual',\n                    type: 'checkbox',\n                    checked: this.state.engines[index] == null,\n                    click: () => {\n                        let {engines} = this.state\n                        if (engines[index] == null) return\n\n                        engines[index] = null\n\n                        this.setState({\n                            engines,\n                            [nameKey]: autoName ? null : this.state[nameKey]\n                        })\n                    }\n                },\n                {type: 'separator'},\n                ...engines.map(engine => ({\n                    label: engine.name.trim() || '(Unnamed Engine)',\n                    type: 'checkbox',\n                    checked: engine === this.state.engines[index],\n                    click: () => {\n                        let {engines} = this.state\n                        engines[index] = engine\n\n                        this.setState({\n                            engines,\n                            [nameKey]: autoName ? engine.name.trim() : this.state[nameKey]\n                        })\n                    }\n                })),\n                engines.length > 0 && {type: 'separator'},\n                {\n                    label: 'Manage Engines…',\n                    click: () => {\n                        sabaki.setState({preferencesTab: 'engines'})\n                        sabaki.openDrawer('preferences')\n                    }\n                }\n            ].filter(x => !!x)\n\n            let {left, bottom} = evt.currentTarget.getBoundingClientRect()\n\n            helper.popupMenu(template, left, bottom)\n        })\n    }\n\n    componentWillReceiveProps({gameInfo, engines, show}) {\n        if (!this.props.show && show) {\n            this.setState(Object.assign({}, gameInfo, {\n                engines: [...engines],\n                showResult: !gameInfo.result || gameInfo.result.trim() === '' || setting.get('app.always_show_result') === true\n            }))\n        }\n    }\n\n    componentDidMount() {\n        this.preparePikaday()\n    }\n\n    shouldComponentUpdate({show}) {\n        return show !== this.props.show || show\n    }\n\n    markDates() {\n        let dates = (sgf.parseDates(this.state.date || '') || []).filter(x => x.length === 3)\n\n        for (let el of this.pikaday.el.querySelectorAll('.pika-button')) {\n            let year = +el.dataset.pikaYear\n            let month = +el.dataset.pikaMonth\n            let day = +el.dataset.pikaDay\n\n            el.parentElement.classList.toggle('is-multi-selected', dates.some(d => {\n                return helper.shallowEquals(d, [year, month + 1, day])\n            }))\n        }\n    }\n\n    adjustPikadayPosition() {\n        let {left, top} = this.dateInputElement.getBoundingClientRect()\n        let {el} = this.pikaday\n        let {height} = el.getBoundingClientRect()\n\n        el.style.position = 'absolute'\n        el.style.left = Math.round(left) + 'px'\n        el.style.top = Math.round(top - height) + 'px'\n    }\n\n    elementInPikaday(element) {\n        while (element.parentElement) {\n            if (element === this.pikaday.el) return true\n            element = element.parentElement\n        }\n\n        return false\n    }\n\n    preparePikaday() {\n        this.pikaday = new Pikaday({\n            position: 'top left',\n            firstDay: 1,\n            yearRange: 6,\n            keyboardInput: false,\n\n            onOpen: () => {\n                if (!this.pikaday) return\n\n                let dates = (sgf.parseDates(this.state.date || '') || []).filter(x => x.length === 3)\n\n                if (dates.length > 0) {\n                    this.pikaday.setDate(dates[0].join('-'), true)\n                } else {\n                    this.pikaday.gotoToday()\n                }\n\n                this.adjustPikadayPosition()\n            },\n            onDraw: () => {\n                if (!this.pikaday || !this.pikaday.isVisible()) return\n\n                this.adjustPikadayPosition()\n                this.markDates()\n\n                this.dateInputElement.focus()\n            },\n            onSelect: date => {\n                if (!this.pikaday) return\n\n                let dates = sgf.parseDates(this.state.date || '') || []\n                date = [date.getFullYear(), date.getMonth() + 1, date.getDate()]\n\n                if (!dates.some(x => helper.shallowEquals(x, date))) {\n                    dates.push(date)\n                } else {\n                    dates = dates.filter(x => !helper.shallowEquals(x, date))\n                }\n\n                this.setState({date: sgf.stringifyDates(dates.sort(helper.lexicalCompare))})\n                this.markDates()\n            }\n        })\n\n        // Hack for removing keyboard input support of Pikaday\n        document.removeEventListener('keydown', this.pikaday._onKeyChange)\n\n        this.pikaday.hide()\n\n        document.body.appendChild(this.pikaday.el)\n        document.body.addEventListener('click', evt => {\n            if (this.pikaday.isVisible()\n            && document.activeElement !== this.dateInputElement\n            && evt.target !== this.dateInputElement\n            && !this.elementInPikaday(evt.target))\n                this.pikaday.hide()\n        })\n\n        window.addEventListener('resize', () => this.adjustPikadayPosition())\n    }\n\n    render({\n        treePosition,\n        currentPlayer,\n        show\n    }, {\n        showResult = false,\n        engines = [null, null],\n        blackName = null,\n        blackRank = null,\n        whiteName = null,\n        whiteRank = null,\n        gameName = null,\n        eventName = null,\n        date = null,\n        result = null,\n        komi = null,\n        handicap = 0,\n        size = [null, null]\n    }) {\n        let [tree, index] = treePosition\n        let emptyTree = !tree.parent && tree.nodes.length === 1 && tree.subtrees.length === 0\n\n        return h(Drawer,\n            {\n                type: 'info',\n                show\n            },\n\n            h('form', {},\n                h('section', {},\n                    h('span', {},\n                        false && h('img', {\n                            src: '/static/game/node_modules/octicons/build/svg/chevron-down.svg',\n                            width: 16,\n                            height: 16,\n                            class: classNames({menu: true, active: engines[0] != null}),\n                            onClick: this.handleEngineMenuClick[0]\n                        }), ' ',\n\n                        h('input', {\n                            type: 'text',\n                            name: 'rank_1',\n                            placeholder: 'Rank',\n                            value: blackRank,\n                            onInput: this.handleInputChange.blackRank\n                        }),\n\n                        h('input', {\n                            type: 'text',\n                            name: 'name_1',\n                            placeholder: 'Black',\n                            value: blackName,\n                            onInput: this.handleInputChange.blackName\n                        })\n                    ),\n\n                    h('img', {\n                        class: 'current-player',\n                        src: `/static/game/img/ui/player_${currentPlayer}.svg`,\n                        height: 31,\n                        title: 'Swap',\n                        onClick: this.handleSwapPlayers\n                    }),\n\n                    h('span', {},\n                        h('input', {\n                            type: 'text',\n                            name: 'name_-1',\n                            placeholder: 'White',\n                            value: whiteName,\n                            onInput: this.handleInputChange.whiteName\n                        }),\n\n                        h('input', {\n                            type: 'text',\n                            name: 'rank_-1',\n                            placeholder: 'Rank',\n                            value: whiteRank,\n                            onInput: this.handleInputChange.whiteRank\n                        }), ' ',\n\n                        false && h('img', {\n                            src: '/static/game/node_modules/octicons/build/svg/chevron-down.svg',\n                            width: 16,\n                            height: 16,\n                            class: classNames({menu: true, active: engines[1] != null}),\n                            onClick: this.handleEngineMenuClick[1]\n                        })\n                    )\n                ),\n\n                h('ul', {},\n                    h(InfoDrawerItem, {title: 'Name'},\n                        h('input', {\n                            type: 'text',\n                            placeholder: '(Unnamed)',\n                            value: gameName,\n                            onInput: this.handleInputChange.gameName\n                        })\n                    ),\n                    h(InfoDrawerItem, {title: 'Event'},\n                        h('input', {\n                            type: 'text',\n                            placeholder: 'None',\n                            value: eventName,\n                            onInput: this.handleInputChange.eventName\n                        })\n                    ),\n                    h(InfoDrawerItem, {title: 'Date'},\n                        h('input', {\n                            ref: el => this.dateInputElement = el,\n                            type: 'text',\n                            placeholder: 'None',\n                            value: date,\n\n                            onFocus: this.handleDateInputFocus,\n                            onBlur: this.handleDateInputBlur,\n                            onInput: this.handleDateInputChange\n                        })\n                    ),\n                    h(InfoDrawerItem, {title: 'Komi'},\n                        h('input', {\n                            type: 'number',\n                            name: 'komi',\n                            step: 0.5,\n                            placeholder: 0,\n                            value: komi == null ? '' : komi,\n                            onInput: this.handleInputChange.komi\n                        })\n                    ),\n                    h(InfoDrawerItem, {title: 'Result'},\n                        showResult \n                        ? h('input', {\n                            type: 'text',\n                            placeholder: 'None',\n                            value: result,\n                            onInput: this.handleInputChange.result\n                        })\n                        : h('button', {\n                            type: 'button',\n                            onClick: this.handleShowResultClick\n                        }, 'Show')\n                    ),\n                    h(InfoDrawerItem, {title: 'Handicap'},\n                        h('select',\n                            {\n                                selectedIndex: Math.max(0, handicap - 1),\n                                disabled: !emptyTree,\n                                onChange: this.handleInputChange.handicap\n                            },\n\n                            h('option', {value: 0}, 'No stones'),\n                            [...Array(8)].map((_, i) =>\n                                h('option', {value: i + 2}, (i + 2) + ' stones')\n                            )\n                        )\n                    ),\n                    h(InfoDrawerItem, {title: 'Board Size'},\n                        h('input', {\n                            type: 'number',\n                            name: 'size-width',\n                            placeholder: 19,\n                            max: 25,\n                            min: 2,\n                            value: size[0],\n                            disabled: !emptyTree,\n                            onFocus: this.handleBoardWidthFocus,\n                            onInput: this.handleBoardWidthChange\n                        }), ' ',\n\n                        h('span', {\n                            title: 'Swap',\n                            style: {cursor: emptyTree ? 'pointer': 'default'},\n                            onClick: !emptyTree ? helper.noop : this.handleSizeSwapButtonClick\n                        }, '×'), ' ',\n\n                        h('input', {\n                            type: 'number',\n                            name: 'size-height',\n                            placeholder: 19,\n                            max: 25,\n                            min: 3,\n                            value: size[1],\n                            disabled: !emptyTree,\n                            onInput: this.handleBoardHeightChange\n                        })\n                    )\n                ),\n\n                h('p', {},\n                    h('button', {type: 'submit', onClick: this.handleSubmitButtonClick}, 'OK'), ' ',\n                    h('button', {type: 'reset', onClick: this.handleCancelButtonClick}, 'Cancel')\n                )\n            )\n        )\n    }\n}\n\nmodule.exports = InfoDrawer\n","const {remote} = require('electron')\nconst {h, Component} = require('preact')\nconst classNames = require('classnames')\n\nconst Drawer = require('./Drawer')\n\nconst helper = require('../../modules/helper')\nconst setting = remote.require('./setting')\n\nclass ScoreRow extends Component {\n    render({method, score, komi, sign}) {\n        let index = sign > 0 ? 0 : 1\n\n        let total = method === 'area' ? score.area[index]\n            : score.territory[index] + score.captures[index]\n\n        if (sign < 0) total += komi\n\n        return h('tr', {},\n            h('th', {},\n                h('img', {\n                    src: `./img/goban/stone_${sign}.png`,\n                    alt: sign > 0 ? 'Black' : 'White',\n                    width: 24,\n                    height: 24\n                })\n            ),\n            h('td', {class: classNames({disabled: method === 'territory'})}, score.area[index]),\n            h('td', {class: classNames({disabled: method === 'area'})}, score.territory[index]),\n            h('td', {class: classNames({disabled: method === 'area'})}, score.captures[index]),\n            h('td', {}, sign < 0 ? komi : '-'),\n            h('td', {}, total)\n        )\n    }\n}\n\nclass ScoreDrawer extends Component {\n    constructor() {\n        super()\n\n        this.handleTerritoryButtonClick = () => setting.set('scoring.method', 'territory')\n        this.handleAreaButtonClick = () => setting.set('scoring.method', 'area')\n        this.handleCloseButtonClick = () => sabaki.closeDrawer()\n\n        this.handleSubmitButtonClick = evt => {\n            evt.preventDefault()\n\n            let {onSubmitButtonClick = helper.noop} = this.props\n            evt.resultString = this.resultString\n            onSubmitButtonClick(evt)\n        }\n    }\n\n    shouldComponentUpdate({areaMap}) {\n        return areaMap != null\n    }\n\n    render({show, estimating, method, areaMap, board, komi}) {\n        if (isNaN(komi)) komi = 0\n\n        let score = board ? board.getScore(areaMap) : {area: [], territory: [], captures: []}\n        let result = method === 'area' ? score.area[0] - score.area[1] - komi\n            : score.territory[0] - score.territory[1] + score.captures[0] - score.captures[1] - komi\n\n        this.resultString = result > 0 ? `B+${result}` : result < 0 ? `W+${-result}` : 'Draw'\n\n        return h(Drawer,\n            {\n                type: 'score',\n                show\n            },\n\n            h('h2', {}, 'Score'),\n\n            h('ul', {class: 'tabs'},\n                h('li', {class: classNames({current: method === 'area'})},\n                    h('a', {\n                        href: '#',\n                        onClick: this.handleAreaButtonClick\n                    }, 'Area')\n                ),\n                h('li', {class: classNames({current: method === 'territory'})},\n                    h('a', {\n                        href: '#',\n                        onClick: this.handleTerritoryButtonClick\n                    }, 'Territory')\n                )\n            ),\n\n            h('table', {},\n                h('thead', {}, h('tr', {},\n                    h('th'),\n                    h('th', {disabled: method === 'territory'}, 'Area'),\n                    h('th', {disabled: method === 'area'}, 'Territory'),\n                    h('th', {disabled: method === 'area'}, 'Captures'),\n                    h('th', {}, 'Komi'),\n                    h('th', {}, 'Total')\n                )),\n                h('tbody', {},\n                    h(ScoreRow, {method, score, komi, sign: 1}),\n                    h(ScoreRow, {method, score, komi, sign: -1})\n                )\n            ),\n\n            h('form', {},\n                h('p', {},\n                    'Result: ',\n                    h('span', {class: 'result'}, this.resultString), ' ',\n\n                    !estimating && h('button', {\n                        type: 'submit',\n                        onClick: this.handleSubmitButtonClick\n                    }, 'Update Result'), ' ',\n\n                    h('button', {\n                        type: 'reset',\n                        onClick: this.handleCloseButtonClick\n                    }, 'Close')\n                )\n            )\n        )\n    }\n}\n\nmodule.exports = ScoreDrawer\n","const helper = require('./helper')\nconst alpha = 'ABCDEFGHJKLMNOPQRSTUVWXYZ'\n\nclass Board {\n    constructor(width = 19, height = 19, arrangement = [], captures = null) {\n        this.width = width\n        this.height = height\n        this.captures = captures ? captures.slice() : [0, 0]\n        this.arrangement = []\n        this.markups = {}\n        this.ghosts = {}\n        this.lines = []\n\n        // Initialize arrangement\n\n        for (let y = 0; y < this.height; y++) {\n            this.arrangement[y] = y in arrangement ? [...arrangement[y]] : Array(this.width).fill(0)\n        }\n    }\n\n    get([x, y]) {\n        return this.arrangement[y] ? this.arrangement[y][x] : undefined\n    }\n\n    set([x, y], sign) {\n        this.arrangement[y][x] = sign\n        return this\n    }\n\n    clone() {\n        return new Board(this.width, this.height, this.arrangement, this.captures)\n    }\n\n    diff(board) {\n        if (board.width !== this.width || board.height !== this.height) {\n            return null\n        }\n\n        let result = []\n\n        for (let x = 0; x < this.width; x++) {\n            for (let y = 0; y < this.height; y++) {\n                let sign = board.get([x, y])\n                if (this.get([x, y]) === sign) continue\n\n                result.push([x, y])\n            }\n        }\n\n        return result\n    }\n\n    hasVertex([x, y]) {\n        return 0 <= x && x < this.width && 0 <= y && y < this.height\n    }\n\n    clear() {\n        this.arrangement = this.arrangement.map(_ => Array(this.width).fill(0))\n    }\n\n    isSquare() {\n        return this.width === this.height\n    }\n\n    getDistance(v, w) {\n        return Math.abs(v[0] - w[0]) + Math.abs(v[1] - w[1])\n    }\n\n    getDistanceToGround(vertex) {\n        return this.getCanonicalVertex(vertex)[0]\n    }\n\n    getCanonicalVertex(vertex) {\n        if (!this.hasVertex(vertex)) return [-1, -1]\n\n        let boardSize = [this.width, this.height]\n\n        return vertex.map((x, i) => Math.min(x, boardSize[i] - x - 1))\n            .sort((x, y) => x - y)\n    }\n\n    getNeighbors(vertex, ignoreBoard = false) {\n        if (!ignoreBoard && !this.hasVertex(vertex)) return []\n\n        let [x, y] = vertex\n        let allNeighbors = [[x - 1, y], [x + 1, y], [x, y - 1], [x, y + 1]]\n\n        return ignoreBoard ? allNeighbors : allNeighbors.filter(v => this.hasVertex(v))\n    }\n\n    getConnectedComponent(vertex, func, result = null) {\n        if (func instanceof Array) {\n            let signs = func\n            func = v => signs.includes(this.get(v))\n        } else if (typeof func === 'number') {\n            let sign = func\n            func = v => this.get(v) === sign\n        }\n\n        if (!this.hasVertex(vertex)) return []\n        if (!result) result = [vertex]\n\n        // Recursive depth-first search\n\n        for (let v of this.getNeighbors(vertex)) {\n            if (!func(v)) continue\n            if (result.some(w => helper.vertexEquals(v, w))) continue\n\n            result.push(v)\n            this.getConnectedComponent(v, func, result)\n        }\n\n        return result\n    }\n\n    getChain(vertex) {\n        return this.getConnectedComponent(vertex, this.get(vertex))\n    }\n\n    hasLiberties(vertex, visited = {}) {\n        let sign = this.get(vertex)\n        if (!this.hasVertex(vertex) || sign === 0) return false\n\n        if (vertex in visited) return false\n        let neighbors = this.getNeighbors(vertex)\n\n        if (neighbors.some(n => this.get(n) === 0))\n            return true\n\n        visited[vertex] = true\n\n        return neighbors.filter(n => this.get(n) === sign)\n        .some(n => this.hasLiberties(n, visited))\n    }\n\n    getLiberties(vertex) {\n        if (!this.hasVertex(vertex) || this.get(vertex) === 0) return []\n\n        let chain = this.getChain(vertex)\n        let liberties = []\n        let added = {}\n\n        for (let c of chain) {\n            let freeNeighbors = this.getNeighbors(c).filter(n => this.get(n) === 0)\n\n            liberties.push(...freeNeighbors.filter(n => !(n in added)))\n            freeNeighbors.forEach(n => added[n] = true)\n        }\n\n        return liberties\n    }\n\n    getRelatedChains(vertex) {\n        if (!this.hasVertex(vertex) || this.get(vertex) === 0) return []\n\n        let area = this.getConnectedComponent(vertex, [this.get(vertex), 0])\n        return area.filter(v => this.get(v) === this.get(vertex))\n    }\n\n    getScore(areaMap) {\n        let score = {\n            area: [0, 0],\n            territory: [0, 0],\n            captures: this.captures\n        }\n\n        for (let x = 0; x < this.width; x++) {\n            for (let y = 0; y < this.height; y++) {\n                let sign = areaMap[y][x]\n                if (sign === 0) continue\n\n                let index = sign > 0 ? 0 : 1\n\n                score.area[index]++\n                if (this.get([x, y]) === 0) score.territory[index]++\n            }\n        }\n\n        return score\n    }\n\n    vertex2coord(vertex) {\n        if (!this.hasVertex(vertex)) return null\n        return alpha[vertex[0]] + (this.height - vertex[1])\n    }\n\n    coord2vertex(coord) {\n        let x = alpha.indexOf(coord[0].toUpperCase())\n        let y = this.height - +coord.substr(1)\n        return [x, y]\n    }\n\n    isValid() {\n        let liberties = {}\n\n        for (let x = 0; x < this.width; x++) {\n            for (let y = 0; y < this.height; y++) {\n                let vertex = [x, y]\n                if (this.get(vertex) === 0 || vertex in liberties) continue\n                if (!this.hasLiberties(vertex)) return false\n\n                this.getChain(vertex).forEach(v => liberties[v] = true)\n            }\n        }\n\n        return true\n    }\n\n    makeMove(sign, vertex) {\n        let move = this.clone()\n\n        if (sign === 0 || !this.hasVertex(vertex)) return move\n\n        sign = sign > 0 ? 1 : -1\n        move.set(vertex, sign)\n\n        // Remove captured stones\n\n        let deadNeighbors = move.getNeighbors(vertex)\n            .filter(n => move.get(n) === -sign && !move.hasLiberties(n))\n\n        for (let n of deadNeighbors) {\n            if (move.get(n) === 0) continue\n\n            for (let c of move.getChain(n)) {\n                move.set(c, 0)\n                move.captures[(-sign + 1) / 2]++\n            }\n        }\n\n        move.set(vertex, sign)\n\n        // Detect suicide\n\n        if (deadNeighbors.length === 0 && !move.hasLiberties(vertex)) {\n            for (let c of move.getChain(vertex)) {\n                move.set(c, 0)\n                move.captures[(sign + 1) / 2]++\n            }\n        }\n\n        return move\n    }\n\n    getHandicapPlacement(count, tygemflag = false) {\n        if (Math.min(this.width, this.height) < 6 || count < 2) return []\n\n        let nearX = this.width >= 13 ? 3 : 2\n        let nearY = this.height >= 13 ? 3 : 2\n        let farX = this.width - nearX - 1\n        let farY = this.height - nearY - 1\n        let middleX = (this.width - 1) / 2\n        let middleY = (this.height - 1) / 2\n        \n        let result\n        \n        if (!tygemflag) {\n            result = [[nearX, farY], [farX, nearY], [farX, farY], [nearX, nearY]]\n        } else {\n            result = [[nearX, farY], [farX, nearY], [nearX, nearY], [farX, farY]]\n        }\n\n        if (this.width % 2 !== 0 && this.height % 2 !== 0) {\n            if (count === 5) result.push([middleX, middleY])\n            result.push([nearX, middleY], [farX, middleY])\n\n            if (count === 7) result.push([middleX, middleY])\n            result.push([middleX, nearY], [middleX, farY], [middleX, middleY])\n        } else if (this.width % 2 !== 0) {\n            result.push([middleX, nearY], [middleX, farY])\n        } else if (this.height % 2 !== 0) {\n            result.push([nearX, middleY], [farX, middleY])\n        }\n\n        return result.slice(0, count)\n    }\n\n    generateAscii() {\n        let result = []\n        let lb = helper.linebreak\n\n        let getIndexFromVertex = ([x, y]) => {\n            let rowLength = 4 + this.width * 2\n            return rowLength + rowLength * y + 1 + x * 2 + 1\n        }\n\n        // Make empty board\n\n        result.push('+')\n        for (let x = 0; x < this.width; x++) result.push('-', '-')\n        result.push('-', '+', lb)\n\n        for (let y = 0; y < this.height; y++) {\n            result.push('|')\n            for (let x = 0; x < this.width; x++) result.push(' ', '.')\n            result.push(' ', '|', lb)\n        }\n\n        result.push('+')\n        for (let x = 0; x < this.width; x++) result.push('-', '-')\n        result.push('-', '+', lb)\n\n        this.getHandicapPlacement(9).forEach(v => result[getIndexFromVertex(v)] = ',')\n\n        // Place markers & stones\n\n        let data = {\n            plain: ['O', null, 'X'],\n            circle: ['W', 'C', 'B'],\n            square: ['@', 'S', '#'],\n            triangle: ['Q', 'T', 'Y'],\n            cross: ['P', 'M', 'Z'],\n            label: ['O', null, 'X']\n        }\n\n        for (let x = 0; x < this.width; x++) {\n            for (let y = 0; y < this.height; y++) {\n                let v = [x, y]\n                let i = getIndexFromVertex(v)\n                let s = this.get(v)\n\n                if (!this.markups[v] || !(this.markups[v][0] in data)) {\n                    if (s !== 0) result[i] = data.plain[s + 1]\n                } else {\n                    let [type, label] = this.markups[v]\n\n                    if (type !== 'label' || s !== 0) {\n                        result[i] = data[type][s + 1]\n                    } else if (s === 0 && label.length === 1 && isNaN(parseFloat(label))) {\n                        result[i] = label.toLowerCase()\n                    }\n                }\n            }\n        }\n\n        result = result.join('')\n\n        // Add lines & arrows\n\n        for (let [start, end, arrow] of this.lines) {\n            result += `{${arrow ? 'AR' : 'LN'} ${this.vertex2coord(start)} ${this.vertex2coord(end)}}${lb}`\n        }\n\n        return (lb + result.trim()).split(lb).map(l => `$$ ${l}`).join(lb)\n    }\n\n    getPositionHash() {\n        return helper.hash(JSON.stringify(this.arrangement))\n    }\n\n    getHash() {\n        return helper.hash(JSON.stringify([\n            this.getPositionHash(),\n            this.captures,\n            this.markups,\n            this.ghosts,\n            this.lines\n        ]))\n    }\n}\n\nmodule.exports = Board\n","const sgf = require('@sabaki/sgf')\n\nlet _shapes = null\nlet equals = v => w => w[0] === v[0] && w[1] === v[1]\n\nexports.getSymmetries = function([x, y]) {\n    let f = ([x, y]) => [[x, y], [-x, y], [x, -y], [-x, -y]]\n    return [...f([x, y]), ...f([y, x])]\n}\n\nexports.getBoardSymmetries = function(board, vertex) {\n    let [mx, my] = [board.width - 1, board.height - 1]\n    let mod = (x, m) => (x % m + m) % m\n\n    return exports.getSymmetries(vertex).map(([x, y]) => [mod(x, mx), mod(y, my)])\n}\n\nexports.readShapes = function(content) {\n    let tree = sgf.parse(content, {encoding: null})[0]\n    let result = []\n\n    for (let i = 0; i < tree.subtrees.length; i++) {\n        let node = tree.subtrees[i].nodes[0]\n        let anchors = node.MA.map(x => [...sgf.parseVertex(x), node.AB.includes(x) ? 1 : -1])\n        let vertices = ['AW', 'CR', 'AB']\n            .map((x, i) => (node[x] || []).map(y => [...sgf.parseVertex(y), i - 1]))\n            .reduce((acc, x) => [...acc, ...x], [])\n\n        let data = {}\n\n        if ('C' in node) {\n            for (let [key, value] of node.C[0].trim().split(', ').map(x => x.split(': '))) {\n                data[key] = value\n            }\n        }\n\n        result.push(Object.assign({\n            name: node.N[0],\n            anchors,\n            vertices\n        }, data))\n    }\n\n    return result\n}\n\nexports.cornerMatch = function(vertices, board) {\n    let hypotheses = Array(8).fill(true)\n    let hypothesesInvert = Array(8).fill(true)\n\n    for (let [x, y, sign] of vertices) {\n        let representatives = exports.getBoardSymmetries(board, [x, y])\n\n        for (let i = 0; i < hypotheses.length; i++) {\n            if (hypotheses[i] && board.get(representatives[i]) !== sign)\n                hypotheses[i] = false\n            if (hypothesesInvert[i] && board.get(representatives[i]) !== -sign)\n                hypothesesInvert[i] = false\n        }\n\n        if (!hypotheses.includes(true) && !hypothesesInvert.includes(true))\n            return null\n    }\n\n    let i = [...hypotheses, ...hypothesesInvert].indexOf(true)\n    return i < 8 ? [i, false] : [i - 8, true]\n}\n\nexports.shapeMatch = function(shape, board, vertex) {\n    if (!board.hasVertex(vertex)) return null\n\n    let sign = board.get(vertex)\n    if (sign === 0) return null\n    let equalsVertex = equals(vertex)\n\n    for (let anchor of shape.anchors) {\n        let hypotheses = Array(8).fill(true)\n        let i = 0\n\n        if (shape.size != null && (board.width !== board.height || board.width !== +shape.size))\n            continue\n\n        if (shape.type === 'corner' && !exports.getBoardSymmetries(board, anchor.slice(0, 2)).some(equalsVertex))\n            continue\n\n        // Hypothesize vertex === anchor\n\n        for (let [x, y, s] of shape.vertices) {\n            let diff = [x - anchor[0], y - anchor[1]]\n            let symm = exports.getSymmetries(diff)\n\n            for (let k = 0; k < symm.length; k++) {\n                if (!hypotheses[k]) continue\n                let w = [vertex[0] + symm[k][0], vertex[1] + symm[k][1]]\n\n                if (!board.hasVertex(w) || board.get(w) !== s * sign * anchor[2])\n                    hypotheses[k] = false\n            }\n\n            i = hypotheses.indexOf(true)\n            if (i < 0) break\n        }\n\n        if (i >= 0) return [i, sign !== anchor[2]]\n    }\n\n    return null\n}\n\nexports.getMoveInterpretation = function(board, vertex, {shapes = null} = {}) {\n    if (!board.hasVertex(vertex)) return 'Pass'\n\n    let sign = board.get(vertex)\n    let neighbors = board.getNeighbors(vertex)\n\n    // Check atari\n\n    if (neighbors.some(v => board.get(v) === -sign && board.getLiberties(v).length === 1))\n        return 'Atari'\n\n    // Check connection\n\n    let friendly = neighbors.filter(v => board.get(v) === sign)\n    if (friendly.length === neighbors.length) return 'Fill'\n    if (friendly.length >= 2) return 'Connect'\n\n    // Load shape library if needed\n\n    if (shapes == null) {\n        if (_shapes == null) {\n            _shapes = exports.readShapes(require('../../data/shapes.sgf'))\n        }\n\n        shapes = _shapes\n    }\n\n    // Match shape\n\n    for (let shape of shapes) {\n        if (exports.shapeMatch(shape, board, vertex))\n            return shape.name\n    }\n\n    // Determine position to edges\n\n    let equalsVertex = equals(vertex)\n\n    if (equalsVertex([(board.width - 1) / 2, (board.height - 1) / 2]))\n        return 'Tengen'\n\n    let diff = board.getCanonicalVertex(vertex).map(x => x + 1)\n\n    if (!equals(diff)([4, 4]) && board.getHandicapPlacement(9).some(equalsVertex))\n        return 'Hoshi'\n\n    if (diff[1] <= 6)\n        return diff.join('-') + ' point'\n\n    return null\n}\n","const {h, render} = require('preact')\nconst helper = require('./helper')\n\nlet hiddenStyle = {\n    opacity: 0,\n    pointerEvents: 'none'\n}\n\nlet fileInput = render(h('input', {\n    type: 'file',\n    style: hiddenStyle\n}), document.body)\n\nexports.showMessageBox = function(message, type = 'info', buttons = ['OK'], cancelId = 0) {\n    if (buttons.length <= 1) {\n        alert(message)\n        return 0\n    } else {\n        return confirm(message) ? 0 : cancelId\n    }\n}\n\nexports.showOpenDialog = function(options, callback) {\n    let clone = fileInput.cloneNode()\n    fileInput.parentNode.replaceChild(clone, fileInput)\n    fileInput = clone\n\n    fileInput.multiple = options.properties.includes('multiSelections')\n    fileInput.value = ''\n\n    fileInput.addEventListener('change', evt => {\n        callback({result: evt.currentTarget.files})\n    })\n\n    fileInput.click()\n}\n\nexports.showSaveDialog = function(options, callback) {\n    let {type, name, content} = options\n    let href = `data:${type};charset=utf-8,${encodeURIComponent(content)}`\n\n    let element = render(h('a', {\n        href,\n        style: hiddenStyle,\n        download: name\n    }), document.body)\n\n    element.click()\n    element.remove()\n}\n\nexports.showInputBox = function(message, onSubmit = helper.noop, onCancel = helper.noop) {\n    sabaki.setState({\n        inputBoxText: message,\n        showInputBox: true,\n        onInputBoxSubmit: onSubmit,\n        onInputBoxCancel: onCancel\n    })\n}\n\nexports.closeInputBox = function() {\n    let {onInputBoxCancel = helper.noop} = sabaki.state\n    sabaki.setState({showInputBox: false})\n    onInputBoxCancel()\n}\n","const Buffer = require('buffer')\nconst fs = require('fs')\nconst sgf = require('@sabaki/sgf')\nconst gametree = require('../gametree')\nconst Board = require('../board')\n\nexports.meta = {\n    name: 'Tygem GIB',\n    extensions: ['gib']\n}\n\nfunction makeResult(grlt, zipsu) {      // Arguments are expected to be numbers\n    // Given a game result type and a score, return a text result.\n\n    // The GRLT tag contains the type of result:\n    // 0: B+n   1: W+n   3: B+R   4: W+R   7: B+T   8: W+T\n\n    let easycases = {'3': 'B+R', '4': 'W+R', '7': 'B+T', '8': 'W+T'}\n\n    if (easycases[grlt] !== undefined) {\n        return easycases[grlt]\n    }\n\n    // If there is a score, the ZIPSU tag contains it (multiplied by 10).\n\n    if (grlt === 0 || grlt === 1) {\n        let winner = grlt === 0 ? 'B' : 'W'\n        let margin = (zipsu / 10).toString()\n        return winner + '+' + margin\n    }\n\n    // We couldn't work it out...\n\n    return ''\n}\n\nfunction getResult(line, grltRegex, zipsuRegex) {\n    // Takes a line and two regexes, the first finding the GRLT (game\n    // result type, e.g. 3 == B+R) and the second finding the score.\n\n    let result = ''\n    let match = grltRegex.exec(line)\n\n    if (match) {\n        let grlt = parseFloat(match[1])\n        match = zipsuRegex.exec(line)\n        if (match) {\n            let zipsu = parseFloat(match[1])\n            result = makeResult(grlt, zipsu)\n        }\n    }\n\n    return result\n}\n\nfunction parsePlayerName(raw) {\n    let name = ''\n    let rank = ''\n\n    // If there's exactly one opening bracket...\n\n    let foo = raw.split('(')\n    if (foo.length === 2) {\n        // And if the closing bracket is right at the end...\n\n        if (foo[1].indexOf(')') === foo[1].length - 1) {\n\n            // Then extract the rank...\n\n            name = foo[0].trim()\n            rank = foo[1].slice(0, foo[1].length - 1)\n        }\n    }\n\n    if (name === '') {\n        return [raw, '']\n    } else {\n        return [name, rank]\n    }\n}\n\nexports.parse = function(content) {\n    let lines = content.split('\\n')\n    let tree = gametree.new()\n    let root = {}\n    tree.nodes.push(root)\n\n    root.CA = ['UTF-8']\n    root.FF = [4]\n    root.GM = [1]\n    root.SZ = [19]\n\n    let node = root\n\n    let regex\n    let match\n\n    for (let n = 0; n < lines.length; n++) {\n        let line = lines[n].trim()\n\n        if (line.startsWith('\\\\[GAMEBLACKNAME=') && line.endsWith('\\\\]')) {\n\n            let s = line.slice(16, -2)\n            let [name, rank] = parsePlayerName(s)\n            if (name) {\n                root.PB = [name]\n            }\n            if (rank) {\n                root.BR = [rank]\n            }\n        } else if (line.startsWith('\\\\[GAMEWHITENAME=') && line.endsWith('\\\\]')) {\n            let s = line.slice(16, -2)\n            let [name, rank] = parsePlayerName(s)\n            if (name) {\n                root.PW = [name]\n            }\n            if (rank) {\n                root.WR = [rank]\n            }\n        } else if (line.startsWith('\\\\[GAMEINFOMAIN=')) {\n\n            if (root.RE === undefined) {\n                let result = getResult(line, /GRLT:(\\d+),/, /ZIPSU:(\\d+),/)\n                if (result !== '') {\n                    root.RE = [result]\n                }\n            }\n\n            if (root.KM === undefined) {\n                regex = /GONGJE:(\\d+),/\n                match = regex.exec(line)\n                if (match) {\n                    let komi = parseFloat(match[1]) / 10\n                    root.KM = [komi]\n                }\n            }\n        } else if (line.startsWith('\\\\[GAMETAG=')) {\n            if (root.DT === undefined) {\n                regex = /C(\\d\\d\\d\\d):(\\d\\d):(\\d\\d)/\n                match = regex.exec(line)\n                if (match) {\n                    root.DT = [match[1] + '-' + match[2] + '-' + match[3]]\n                }\n            }\n\n            if (root.RE === undefined) {\n                let result = getResult(line, /,W(\\d+),/, /,Z(\\d+),/)\n                if (result !== '') {\n                    root.RE = [result]\n                }\n            }\n\n            if (root.KM === undefined) {\n                regex = /,G(\\d+),/\n                match = regex.exec(line)\n                if (match) {\n                    let komi = parseFloat(match[1]) / 10\n                    root.KM = [komi]\n                }\n            }\n        } else if (line.slice(0, 3) === 'INI') {\n            let setup = line.split(' ')\n            let handicap = 0\n            let p = Math.floor(parseFloat(setup[3]))\n\n            if (Number.isNaN(p) === false) {\n                handicap = p\n            }\n\n            if (handicap >= 2 && handicap <= 9) {\n                root.HA = [handicap]\n                root.AB = []\n\n                let tmp = new Board()       // Created solely for .getHandicapPlacement()\n\n                let points = tmp.getHandicapPlacement(handicap, true)\n\n                for (let p of points) {\n                    let [x, y] = p\n                    let s = sgf.stringifyVertex([x, y])\n                    root.AB.push(s)\n                }\n            }\n        } else if (line.slice(0, 3) === 'STO') {\n            let elements = line.split(' ')\n\n            if (elements.length < 6) {\n                continue\n            }\n\n            let key\n\n            if (elements[3] === '1') {\n                key = 'B'\n            } else {\n                key = 'W'\n            }\n\n            let x = Math.floor(parseFloat(elements[4]))\n            let y = Math.floor(parseFloat(elements[5]))\n\n            if (Number.isNaN(x) || Number.isNaN(y)) {\n                continue\n            }\n\n            let val = sgf.stringifyVertex([x, y])\n\n            let node = {}\n            tree.nodes.push(node)\n            node[key] = [val]\n        }\n    }\n\n    return [tree]\n}\n\nexports.parseFile = function(filename) {\n}\n","const fs = require('fs')\nconst {extname} = require('path')\n\nlet sgf = require('./sgf')\nlet ngf = require('./ngf')\nlet gib = require('./gib')\n\nlet modules = {sgf, ngf, gib}\n\nexports = module.exports = modules\n\nlet extensions = Object.keys(modules).map(key => modules[key].meta)\nlet combinedExtensions = extensions.map(x => x.extensions)\n    .reduce((acc, x) => [...acc, ...x], [])\n\nexports.meta = [\n    {name: 'Game Records', extensions: combinedExtensions},\n    ...extensions\n]\n\nexports.getModuleByExtension = function(extension) {\n    return modules[Object.keys(modules).find(key =>\n        modules[key].meta.extensions.includes(extension.toLowerCase())\n    )] || sgf\n}\n\nexports.parseFile = function(file, onProgress, callback) {\n    let extension = extname(file.name).slice(1)\n    let m = exports.getModuleByExtension(extension)\n\n    fs.readFile(file, (err, content) => {\n        callback({trees: m.parse(content, onProgress)})\n    })\n}\n","const Buffer = require('buffer')\nconst fs = require('fs')\nconst sgf = require('@sabaki/sgf')\nconst gametree = require('../gametree')\nconst Board = require('../board')\n\nexports.meta = {\n    name: 'wBaduk NGF',\n    extensions: ['ngf']\n}\n\nexports.parse = function(content) {\n    let lines = content.split('\\n')\n    let tree = gametree.new()\n    let root = {}\n    tree.nodes.push(root)\n\n    root.CA = ['UTF-8']\n    root.FF = [4]\n    root.GM = [1]\n    root.SZ = [19]\n\n    // These array accesses might throw if out of range, that's fine.\n    // The caller will deal with the exception.\n\n    let boardsize = Math.floor(parseFloat(lines[1]))\n    let handicap = Math.floor(parseFloat(lines[5]))\n    let pw = lines[2].split(' ')[0]\n    let pb = lines[3].split(' ')[0]\n    let rawdate = lines[8].slice(0, 8)\n    let komi = Math.floor(parseFloat(lines[7]))\n\n    if (Number.isNaN(boardsize)) {\n        boardsize = 19\n    }\n    if (Number.isNaN(handicap)) {\n        handicap = 0\n    }\n    if (Number.isNaN(komi)) {\n        komi = 0\n    }\n\n    let line2 = lines[2].trim().split(' ')\n    if (line2.length > 1) {\n        let whiterank = line2[line2.length - 1]\n        whiterank = whiterank.replace('DP', 'p').replace('K', 'k').replace('D', 'd')\n        root.WR = [whiterank]\n    }\n\n    let line3 = lines[3].trim().split(' ')\n    if (line3.length > 1) {\n        let blackrank = line3[line3.length - 1]\n        blackrank = blackrank.replace('DP', 'p').replace('K', 'k').replace('D', 'd')\n        root.BR = [blackrank]\n    }\n\n    if (handicap === 0 && komi === Math.floor(komi)) {\n        komi += 0.5\n    }\n\n    let winner = ''\n    let margin = ''\n\n    if (lines[10].includes('resign')) {\n        margin = 'R'\n    }\n    if (lines[10].includes('time')) {\n        margin = 'T'\n    }\n    if (lines[10].includes('hite win') || lines[10].includes('lack lose')) {\n        winner = 'W'\n    }\n    if (lines[10].includes('lack win') || lines[10].includes('hite lose')) {\n        winner = 'B'\n    }\n    if (margin === '') {\n\n        let score = null\n        let strings = lines[10].split(' ')\n\n        // Try to find score by assuming any float found is the score.\n\n        for (let s of strings) {\n            let p = parseFloat(s)\n            if (Number.isNaN(p) === false) {\n                score = p\n            }\n        }\n\n        if (score !== null) {\n            margin = score.toString()\n        }\n    }\n\n    if (winner !== '') {\n        root.RE = [winner + '+' + margin]\n    }\n\n    root.SZ = [boardsize]\n\n    if (handicap >= 2) {\n        root.HA = [handicap]\n        root.AB = []\n\n        let tmp = new Board(boardsize, boardsize)       // Created solely for .getHandicapPlacement()\n\n        let points = tmp.getHandicapPlacement(handicap, true)\n\n        for (let p of points) {\n            let [x, y] = p\n            let s = sgf.stringifyVertex([x, y])\n            root.AB.push(s)\n        }\n    }\n\n    if (komi) {\n        root.KM = [komi]\n    }\n\n    if (rawdate.length === 8) {\n        let ok = true\n        for (let n = 0; n < 8; n++) {\n            let tmp = parseFloat(rawdate.charAt(n))\n            if (Number.isNaN(tmp)) {\n                ok = false\n            }\n        }\n        if (ok) {\n            let date = ''\n            date += rawdate.slice(0, 4)\n            date += '-' + rawdate.slice(4, 6)\n            date += '-' + rawdate.slice(6, 8)\n            root.DT = [date]\n        }\n    }\n\n    root.PW = [pw]\n    root.PB = [pb]\n\n    // We currently search for moves in all lines. Current files start moves at line 12.\n    // But some older files have less headers and start moves earlier.\n\n    for (let n = 0; n < lines.length; n++) {\n        let line = lines[n].trim()\n\n        if (line.length >= 7) {\n\n            if (line.slice(0, 2) === 'PM') {\n\n                let key = line.charAt(4)\n\n                if (key === 'B' || key === 'W') {\n\n                    // Coordinates are letters but with 'B' as the lowest.\n\n                    let x = line.charCodeAt(5) - 66\n                    let y = line.charCodeAt(6) - 66\n\n                    let val = sgf.stringifyVertex([x, y])\n\n                    let node = {}\n                    tree.nodes.push(node)\n                    node[key] = [val]\n                }\n            }\n        }\n    }\n\n    return [tree]\n}\n\nexports.parseFile = function(filename) {\n}\n","const sgf = require('@sabaki/sgf')\nconst {getId} = require('../helper')\n\nexports.meta = {\n    name: 'Smart Game Format',\n    extensions: ['sgf']\n}\n\nexports.parse = function(content, onProgress = () => {}, ignoreEncoding = false) {\n    let encoding = ignoreEncoding ? null : 'ISO-8859-1'\n    return sgf.parse(content, {getId, onProgress, encoding})\n}\n\nexports.parseFile = function(filename, onProgress = () => {}) {\n    return sgf.parseFile(filename, {getId, onProgress})\n}\n","const natsort = require('natsort')\nconst sgf = require('@sabaki/sgf')\nconst helper = require('./helper')\nconst gametree = require('./gametree')\n\nfunction extractProperty(gametree, property) {\n    return property in gametree.nodes[0] ? gametree.nodes[0][property][0] : ''\n}\n\n// player : 'BR' | 'WR'\nfunction sortRank(gameTrees, player) {\n    return stableSort(gameTrees, (tr1, tr2) => {\n        let [weighted1, weighted2] = [tr1, tr2]\n            .map(tree => (weightRank(extractProperty(tree, player))))\n        return compareResult(weighted1, weighted2)\n    })\n}\n\n// rank : string like '30k', '1d', '1p'\nfunction weightRank(rank) {\n    let rank_number = parseFloat(rank)\n    if (isNaN(rank_number)) {\n        return -Infinity\n    } else {\n        let weight = rank.includes('k') ? -1 : rank.includes('p') ? 10 : 1\n        return weight * rank_number\n    }\n}\n\n// name : 'PB' | 'PW' | 'GN' | 'EV'\nfunction sortName(gameTrees, name) {\n    return stableSort(gameTrees, (tr1, tr2) => {\n        let [name1, name2] = [tr1, tr2].map(tree => (extractProperty(tree, name)))\n        return natsort({insensitive: true})(name1, name2)\n    })\n}\n\nfunction compareResult(item1, item2) {\n    return item1 < item2 ? -1 : +(item1 !== item2)\n}\n\nfunction stableSort(ary, fn) {\n    return ary.map((element, index) => [element, index])\n        .sort((pair1, pair2) => {\n            let result = fn(pair1[0], pair2[0])\n            if (result === 0) {\n                return pair1[1] - pair2[1]\n            } else {\n                return result\n            }\n        }).map(pair => pair[0])\n}\n\nexports.reverse = function(gameTrees) {\n    return gameTrees.slice().reverse()\n}\n\nexports.byBlackRank = function(gameTrees) {\n    return sortRank(gameTrees, 'BR')\n}\n\nexports.byWhiteRank = function(gameTrees) {\n    return sortRank(gameTrees, 'WR')\n}\n\nexports.byPlayerBlack = function(gameTrees) {\n    return sortName(gameTrees, 'PB')\n}\n\nexports.byPlayerWhite = function(gameTrees) {\n    return sortName(gameTrees, 'PW')\n}\n\nexports.byGameName = function(gameTrees) {\n    return sortName(gameTrees, 'GN')\n}\n\nexports.byEvent = function(gameTrees) {\n    return sortName(gameTrees, 'EV')\n}\n\nexports.byDate = function(gameTrees) {\n    return stableSort(gameTrees, (tr1, tr2) => {\n        let [date1, date2] = [tr1, tr2]\n            .map(tree => (extractProperty(tree, 'DT')))\n            .map(x => sgf.parseDates(x))\n            .map(x => x ? sgf.stringifyDates(x.sort(helper.lexicalCompare)) : '')\n        return compareResult(date1, date2)\n    })\n}\n\nexports.byNumberOfMoves = function(gameTrees) {\n    return stableSort(gameTrees, (tr1, tr2) => {\n        return compareResult(gametree.getHeight(tr1), gametree.getHeight(tr2))\n    })\n}\n","const sgf = require('@sabaki/sgf')\nconst Board = require('./board')\nconst helper = require('./helper')\n\nconst alpha = 'ABCDEFGHIJKLMNOPQRSTUVWXYZ'\n\nexports.new = function() {\n    return {\n        id: helper.getId(),\n        nodes: [],\n        subtrees: [],\n        current: null,\n        parent: null\n    }\n}\n\nexports.clone = function(tree, parent = null) {\n    let c = Object.assign(exports.new(), {\n        current: tree.current,\n        parent\n    })\n\n    for (let node of tree.nodes) {\n        let cn = {}\n\n        for (let key in node) {\n            if (key === 'board') continue\n\n            if (Array.isArray(node[key])) {\n                cn[key] = [...node[key]]\n            } else {\n                cn[key] = node[key]\n            }\n        }\n\n        c.nodes.push(cn)\n    }\n\n    for (let subtree of tree.subtrees) {\n        c.subtrees.push(exports.clone(subtree, c))\n    }\n\n    return c\n}\n\nexports.getRoot = function(tree) {\n    while (tree.parent !== null) tree = tree.parent\n    return tree\n}\n\nexports.getRootProperty = function(tree, property, fallback = null) {\n    let node = exports.getRoot(tree).nodes[0]\n    if (!node) return fallback\n\n    let result = ''\n    if (property in node) result = node[property][0]\n\n    return result === '' ? fallback : result\n}\n\nexports.getHeight = function(tree) {\n    let height = 0\n\n    for (let subtree of tree.subtrees) {\n        height = Math.max(exports.getHeight(subtree), height)\n    }\n\n    return height + tree.nodes.length\n}\n\nexports.getCurrentHeight = function(tree) {\n    let height = tree.nodes.length\n\n    if (tree.subtrees.length !== 0)\n        height += exports.getCurrentHeight(tree.subtrees[tree.current])\n\n    return height\n}\n\nexports.getTreesRecursive = function(tree) {\n    let result = [tree]\n\n    for (let subtree of tree.subtrees) {\n        result.push(...exports.getTreesRecursive(subtree))\n    }\n\n    return result\n}\n\nexports.getLevel = function(tree, index) {\n    return index + (tree.parent ? exports.getLevel(tree.parent, tree.parent.nodes.length) : 0)\n}\n\nexports.getSection = function(tree, level) {\n    if (level < 0) return []\n    if (level < tree.nodes.length) return [[tree, level]]\n\n    let sections = []\n\n    for (let subtree of tree.subtrees) {\n        sections.push(...exports.getSection(subtree, level - tree.nodes.length))\n    }\n\n    return sections\n}\n\nexports.navigate = function(tree, index, step) {\n    if (index + step >= 0 && index + step < tree.nodes.length) {\n        return [tree, index + step]\n    } else if (index + step < 0 && tree.parent != null) {\n        let prev = tree.parent\n        let newstep = index + step + 1\n\n        return exports.navigate(prev, prev.nodes.length - 1, newstep)\n    } else if (index + step >= tree.nodes.length && tree.subtrees.length !== 0) {\n        let next = tree.subtrees[tree.current]\n        let newstep = index + step - tree.nodes.length\n\n        return exports.navigate(next, 0, newstep)\n    }\n\n    return null\n}\n\nexports.makeHorizontalNavigator = function(tree, index) {\n    let root = exports.getRoot(tree)\n    let level = exports.getLevel(tree, index, root)\n    let sections = exports.getSection(root, level)\n    let j = sections.map(x => x[0]).indexOf(tree)\n\n    return {\n        navigate(step) {\n            if (j + step >= 0 && j + step < sections.length) {\n                j = j + step\n            } else if (j + step >= sections.length) {\n                step = j + step - sections.length\n                sections = exports.getSection(root, ++level)\n                j = 0\n                if (sections.length != 0) this.navigate(step)\n            } else if (j + step < 0) {\n                step = j + step + 1\n                sections = exports.getSection(root, --level)\n                j = sections.length - 1\n                if (sections.length != 0) this.navigate(step)\n            }\n        },\n        value() {\n            return j < sections.length && j >= 0 ? sections[j] : null\n        },\n        next() {\n            this.navigate(1)\n            return this.value()\n        },\n        prev() {\n            this.navigate(-1)\n            return this.value()\n        }\n    }\n}\n\nexports.split = function(tree, index) {\n    if (index < 0 || index >= tree.nodes.length - 1) return tree\n\n    let newnodes = tree.nodes.slice(0, index + 1)\n    tree.nodes = tree.nodes.slice(index + 1)\n\n    let newtree = exports.new()\n    newtree.nodes = newnodes\n    newtree.subtrees = [tree]\n    newtree.parent = tree.parent\n    newtree.current = 0\n    tree.parent = newtree\n\n    if (newtree.parent) {\n        newtree.parent.subtrees[newtree.parent.subtrees.indexOf(tree)] = newtree\n    }\n\n    return newtree\n}\n\nexports.reduce = function(tree) {\n    if (tree.subtrees.length != 1) return tree\n\n    tree.nodes.push(...tree.subtrees[0].nodes)\n    tree.current = tree.subtrees[0].current\n    tree.subtrees = tree.subtrees[0].subtrees\n\n    for (let subtree of tree.subtrees) {\n        subtree.parent = tree\n    }\n\n    return tree\n}\n\nexports.onCurrentTrack = function(tree) {\n    return !tree.parent\n    || tree.parent.subtrees[tree.parent.current] == tree\n    && exports.onCurrentTrack(tree.parent)\n}\n\nexports.onMainTrack = function(tree) {\n    return !tree.parent\n    || tree.parent.subtrees[0] == tree\n    && exports.onMainTrack(tree.parent)\n}\n\nexports.getMatrixDict = function(tree, matrix = null, dict = {}, xshift = 0, yshift = 0) {\n    if (!matrix) matrix = [...Array(exports.getHeight(tree))].map(_ => [])\n\n    let hasCollisions = true\n    while (hasCollisions) {\n        hasCollisions = false\n\n        for (let y = 0; y < Math.min(tree.nodes.length + 1, matrix.length - yshift); y++) {\n            if (xshift >= matrix[yshift + y].length - (y === tree.nodes.length)) continue\n\n            hasCollisions = true\n            xshift++\n            break\n        }\n    }\n\n    for (let y = 0; y < tree.nodes.length; y++) {\n        matrix[yshift + y].length = xshift + 1\n        matrix[yshift + y][xshift] = [tree, y]\n        dict[tree.id + '-' + y] = [xshift, yshift + y]\n    }\n\n    for (let k = 0; k < tree.subtrees.length; k++) {\n        let subtree = tree.subtrees[k]\n        exports.getMatrixDict(subtree, matrix, dict, xshift + k, yshift + tree.nodes.length)\n    }\n\n    return [matrix, dict]\n}\n\nexports.getMatrixWidth = function(y, matrix) {\n    let keys = [...Array(10)]\n        .map((_, i) => i + y - 4)\n        .filter(i => i >= 0 && i < matrix.length)\n\n    let padding = Math.min(...keys.map(i => {\n        for (let j = 0; j < matrix[i].length; j++)\n            if (matrix[i][j] != null) return j\n        return 0\n    }))\n\n    let width = Math.max(...keys.map(i => matrix[i].length)) - padding\n\n    return [width, padding]\n}\n\nexports.getBoard = function(tree, index, baseboard = null) {\n    if (index >= tree.nodes.length) return null\n\n    let node = tree.nodes[index]\n    let vertex = null\n    let board = null\n\n    // Get base board\n\n    if (!baseboard) {\n        let prev = exports.navigate(tree, index, -1)\n\n        if (!prev) {\n            let size = [19, 19]\n\n            if ('SZ' in node) {\n                size = node.SZ[0].toString()\n\n                if (size.includes(':')) size = size.split(':')\n                else size = [size, size]\n\n                size = size.map(x => +x)\n            }\n\n            baseboard = new Board(...size)\n        } else {\n            let prevNode = prev[0].nodes[prev[1]]\n            baseboard = prevNode.board || exports.getBoard(...prev)\n        }\n    }\n\n    // Make move\n\n    let data = {B: 1, W: -1}\n\n    for (let prop in data) {\n        if (!(prop in node)) continue\n\n        vertex = sgf.parseVertex(node[prop][0])\n        board = baseboard.makeMove(data[prop], vertex)\n        break\n    }\n\n    if (!board) board = baseboard.clone()\n\n    // Add markup\n\n    data = {AW: -1, AE: 0, AB: 1}\n\n    for (let prop in data) {\n        if (!(prop in node)) continue\n\n        for (let value of node[prop]) {\n            for (let vertex of sgf.parseCompressedVertices(value)) {\n                if (!board.hasVertex(vertex)) continue\n                board.set(vertex, data[prop])\n            }\n        }\n    }\n\n    if (vertex != null) {\n        board.markups[vertex] = ['point', '']\n    }\n\n    data = {CR: 'circle', MA: 'cross', SQ: 'square', TR: 'triangle'}\n\n    for (let prop in data) {\n        if (!(prop in node)) continue\n\n        for (let value of node[prop]) {\n            for (let vertex of sgf.parseCompressedVertices(value)) {\n                board.markups[vertex] = [data[prop], '']\n            }\n        }\n    }\n\n    if ('LB' in node) {\n        for (let composed of node.LB) {\n            let sep = composed.indexOf(':')\n            let point = composed.slice(0, sep)\n            let label = composed.slice(sep + 1)\n\n            board.markups[sgf.parseVertex(point)] = ['label', label]\n        }\n    }\n\n    if ('L' in node) {\n        for (let i = 0; i < node.L.length; i++) {\n            let point = node.L[i]\n            let label = alpha[i]\n            if (label == null) return\n\n            board.markups[sgf.parseVertex(point)] = ['label', label]\n        }\n    }\n\n    for (let type of ['AR', 'LN']) {\n        if (!(type in node)) continue\n\n        for (let composed of node[type]) {\n            let sep = composed.indexOf(':')\n            let [v1, v2] = [composed.slice(0, sep), composed.slice(sep + 1)].map(sgf.parseVertex)\n\n            board.lines.push([v1, v2, type === 'AR'])\n        }\n    }\n\n    // Add variation overlays\n\n    let addOverlay = (node, type) => {\n        let v, sign\n\n        if ('B' in node) {\n            v = sgf.parseVertex(node.B[0])\n            sign = 1\n        } else if ('W' in node) {\n            v = sgf.parseVertex(node.W[0])\n            sign = -1\n        } else {\n            return\n        }\n\n        if (!board.hasVertex(v) || v in board.ghosts)\n            return\n\n        let types = []\n\n        if (type === 'child') {\n            types.push(`ghost_${sign}`)\n\n            if ('BM' in node) {\n                types.push('badmove')\n            } else if ('DO' in node) {\n                types.push('doubtfulmove')\n            } else if ('IT' in node) {\n                types.push('interestingmove')\n            } else if ('TE' in node) {\n                types.push('goodmove')\n            }\n        } else if (type === 'sibling') {\n            types.push(`siblingghost_${sign}`)\n        }\n\n        board.ghosts[v] = types\n    }\n\n    if (index === tree.nodes.length - 1) {\n        for (let subtree of tree.subtrees) {\n            if (subtree.nodes.length === 0) continue\n            addOverlay(subtree.nodes[0], 'child')\n        }\n    } else if (index < tree.nodes.length - 1) {\n        addOverlay(tree.nodes[index + 1], 'child')\n    }\n\n    if (index === 0 && tree.parent) {\n        for (let subtree of tree.parent.subtrees) {\n            if (subtree.nodes.length == 0) continue\n            addOverlay(subtree.nodes[0], 'sibling')\n        }\n    }\n\n    node.board = board\n    return board\n}\n\nexports.getJson = function(tree) {\n    return JSON.stringify(tree, (name, val) => {\n        let list = ['id', 'board', 'parent', 'current']\n        return list.includes(name) ? undefined : val\n    })\n}\n\nexports.fromJson = function(json) {\n    let addInformation = tree => {\n        tree.id = helper.getId()\n\n        if (tree.subtrees.length > 0) tree.current = 0\n\n        for (let i = 0; i < tree.subtrees.length; i++) {\n            tree.subtrees[i].parent = tree\n            addInformation(tree.subtrees[i])\n        }\n\n        return tree\n    }\n\n    let tree = JSON.parse(json)\n    tree.parent = null\n    return addInformation(tree)\n}\n\nexports.getHash = function(tree) {\n    return helper.hash(`${tree.nodes.map(exports.getJson).join('-')}-${tree.subtrees.map(exports.getHash).join('-')}`)\n}\n\nexports.getMatrixHash = function(tree) {\n    return helper.hash(`${tree.id}-${tree.nodes.length}-${tree.subtrees.map(exports.getMatrixHash).join('-')}`)\n}\n","let id = 0\n\nexports.linebreak = process.platform === 'win32' ? '\\r\\n' : '\\n'\nexports.noop = () => {}\n\nexports.getId = function() {\n    return ++id\n}\n\nexports.hash = function(str) {\n    let hash = 0, chr\n    if (str.length == 0) return hash\n\n    for (let i = 0; i < str.length; i++) {\n        chr = str.charCodeAt(i)\n        hash = ((hash << 5) - hash) + chr\n        hash = hash & hash\n    }\n\n    return hash\n}\n\nexports.floorEven = function(float) {\n    let value = Math.floor(float)\n    return value % 2 === 0 ? value : value - 1\n}\n\nexports.equals = function(a, b) {\n    if (a === b) return true\n    if (a == null || b == null) return a == b\n\n    let t = Object.prototype.toString.call(a)\n    if (t !== Object.prototype.toString.call(b)) return false\n\n    let aa = t === '[object Array]'\n    let ao = t === '[object Object]'\n\n    if (aa) {\n        if (a.length !== b.length) return false\n        for (let i = 0; i < a.length; i++)\n            if (!exports.equals(a[i], b[i])) return false\n        return true\n    } else if (ao) {\n        let kk = Object.keys(a)\n        if (kk.length !== Object.keys(b).length) return false\n        for (let i = 0; i < kk.length; i++) {\n            let k = kk[i]\n            if (!(k in b)) return false\n            if (!exports.equals(a[k], b[k])) return false\n        }\n        return true\n    }\n\n    return false\n}\n\nexports.shallowEquals = function(a, b) {\n    return a == null || b == null ? a === b : a === b || a.length === b.length && a.every((x, i) => x == b[i])\n}\n\nexports.vertexEquals = function([a, b], [c, d]) {\n    return a === c && b === d\n}\n\nexports.lexicalCompare = function(a, b) {\n    if (!a.length || !b.length) return a.length - b.length\n    return a[0] < b[0] ? -1 : a[0] > b[0] ? 1 : exports.lexicalCompare(a.slice(1), b.slice(1))\n}\n\nexports.typographer = function(input) {\n    return input.replace(/\\.{3}/g, '…')\n        .replace(/(\\S)'/g, '$1’')\n        .replace(/(\\S)\"/g, '$1”')\n        .replace(/'(\\S)/g, '‘$1')\n        .replace(/\"(\\S)/g, '“$1')\n        .replace(/(\\s)-(\\s)/g, '$1–$2')\n}\n\nexports.normalizeEndings = function(input) {\n    return input.replace(/\\r\\n|\\n\\r|\\r/g, '\\n')\n}\n\nexports.popupMenu = function(template, x, y) {\n    let {remote} = require('electron')\n    let setting = remote.require('./setting')\n    let zoomFactor = +setting.get('app.zoom_factor')\n\n    remote.Menu.buildFromTemplate(template).popup({\n        x: Math.round(x * zoomFactor),\n        y: Math.round(y * zoomFactor)\n    })\n}\n\nexports.wait = function(ms) {\n    return new Promise(resolve => setTimeout(resolve, ms))\n}\n","const {h, render} = require('preact')\nconst classNames = require('classnames')\n\nfunction hide() {\n    document.getElementById('popupmenu-overlay').remove()\n}\n\nfunction show(velement, x, y) {\n    let element = render(velement, document.body).childNodes[0]\n\n    let {width, height} = element.getBoundingClientRect()\n    let {width: bodyWidth, height: bodyHeight} = document.body.getBoundingClientRect()\n\n    element.style.left = (x + width <= bodyWidth ? x : Math.max(0, x - width)) + 'px'\n    element.style.top = (y + height <= bodyHeight ? y : Math.max(0, y - height)) + 'px'\n}\n\nexports.buildFromTemplate = function(template) {\n    return {\n        popup: ({x, y}) => show(h('section',\n            {\n                id: 'popupmenu-overlay',\n                onClick: () => hide()\n            },\n\n            h('ul', {class: 'popupmenu'}, template.map(item =>\n                h('li', {\n                    class: classNames({\n                        checked: item.checked,\n                        [item.type]: item.type\n                    }),\n                    onClick: () => item.click && item.click()\n                }, item.label && item.label.replace(/&/g, ''))\n            ))\n        ), x, y)\n    }\n}\n\nrender(h('style', {}, `\n    #popupmenu-overlay {\n        position: absolute;\n        left: 0;\n        top: 0;\n        right: 0;\n        bottom: 0;\n        z-index: 1000;\n    }\n\n    .popupmenu {\n            position: absolute;\n            padding: 3px 0;\n            max-height: calc(100% - 6px);\n            max-width: 100%;\n            overflow: auto;\n            background: rgba(0, 0, 0, .9);\n            box-shadow: 0 5px 10px rgba(0, 0, 0, .5);\n            color: white;\n            list-style: none;\n        }\n        .popupmenu li:not(.separator) {\n            position: relative;\n            display: block;\n            height: 1em;\n            padding: 7px 30px;\n            line-height: 1em;\n        }\n        .popupmenu li.checked::before {\n            content: '';\n            position: absolute;\n            width: 1em;\n            height: 1em;\n            left: 9px;\n            top: 7px;\n            background: url('/static/game/node_modules/octicons/build/svg/check.svg') left top/contain no-repeat;\n            filter: invert(100%);\n            -webkit-filter: invert(100%);\n        }\n        .popupmenu li.separator {\n            height: 2px;\n            margin: 3px 0;\n            background: rgba(255, 255, 255, .3);\n        }\n        .popupmenu li:not(.separator):hover {\n            background-color: #0050C0;\n        }\n        .popupmenu li:not(.separator):active {\n            background-color: #0030A0;\n    }\n`), document.body)\n","module.exports = {\n    from: x => x\n}\n","const copy = require('copy-text-to-clipboard')\nconst {h, render} = require('preact')\nconst {noop} = require('../helper')\n\nlet hiddenStyle = {opacity: 0, pointerEvents: 'none'}\n\nlet app = {\n    getName: () => 'Sabaki',\n    getVersion: () => 'web',\n    getPath: () => ''\n}\n\nmodule.exports = {\n    app,\n    ipcRenderer: {on: noop, send: noop},\n\n    clipboard: {\n        readText: () => prompt('Please paste contents here:'),\n\n        writeText: content => {\n            let element = render(h('a', {\n                href: '#',\n                style: hiddenStyle,\n\n                onClick: evt => {\n                    evt.preventDefault()\n                    copy(content)\n                }\n            }), document.body)\n\n            element.click()\n            element.remove()\n        }\n    },\n\n    shell: {\n        openExternal: href => {\n            let element = render(h('a', {\n                href,\n                target: '_blank',\n                style: hiddenStyle\n            }), document.body)\n\n            element.click()\n            element.remove()\n        }\n    },\n\n    remote: {\n        app,\n        require: x => x === './setting' ? require('../../setting') : {},\n\n        getCurrentWindow: () => ({\n            show: noop,\n            close: noop,\n            on: noop,\n            isMaximized: noop,\n            isMinimized: noop,\n            isFullScreen: noop,\n            setFullScreen: noop,\n            setMenuBarVisibility: noop,\n            setAutoHideMenuBar: noop,\n            setProgressBar: noop,\n            setContentSize: noop,\n            getContentSize: () => [0, 0],\n            webContents: {setAudioMuted: noop}\n        }),\n\n        Menu: require('./Menu')\n    }\n}\n","module.exports = []\n","const {noop} = require('../helper')\n\nmodule.exports = {\n    readFile: (file, callback = noop) => {\n        let reader = new FileReader()\n        reader.onload = evt => callback(null, evt.target.result)\n        reader.readAsText(file)\n    },\n\n    readFileSync: () => '',\n    writeFileSync: noop,\n    mkdirSync: noop,\n    accessSync: noop\n}\n","module.exports = {\n    encodingExists: () => false,\n    decode: x => x\n}\n","module.exports = {\n    detect: () => ({\n        confidence: 1,\n        encoding: 'utf8'\n    })\n}\n","module.exports = () => {}\n","const {noop} = require('../helper')\n\nmodule.exports = {\n    arrayOf: noop,\n    oneOf: noop,\n    oneOfType: noop\n}\n","exports.TextDecoder = window.TextDecoder\n","const helper = require('./helper')\n\nlet lastPachiIndex = -1\nlet lastCaptureIndex = -1\n\nlet captureSounds = [...Array(5)].map((_, i) => new Audio(`./data/capture${i}.mp3`))\nlet pachiSounds = [...Array(5)].map((_, i) => new Audio(`./data/${i}.mp3`))\n\nlet newGameSound = new Audio('./data/newgame.mp3')\nlet passSound = new Audio('./data/pass.mp3')\n\nexports.playPachi = function(delay = 0) {\n    let index = lastPachiIndex\n\n    while (index === lastPachiIndex) {\n        index = Math.floor(Math.random() * pachiSounds.length)\n    }\n\n    lastPachiIndex = index\n\n    setTimeout(() => pachiSounds[index].play().catch(helper.noop), delay)\n}\n\nexports.playCapture = function(delay = 0) {\n    let index = lastCaptureIndex\n\n    while (index === lastCaptureIndex) {\n        index = Math.floor(Math.random() * captureSounds.length)\n    }\n\n    lastCaptureIndex = index\n\n    setTimeout(() => captureSounds[index].play().catch(helper.noop), delay)\n}\n\nexports.playPass = function(delay = 0) {\n    setTimeout(() => passSound.play().catch(helper.noop), delay)\n}\n\nexports.playNewGame = function(delay = 0) {\n    setTimeout(() => newGameSound.play().catch(helper.noop), delay)\n}\n","const EventEmitter = require('events')\nconst fs = require('fs')\nconst path = require('path')\nconst {app} = require('electron')\n\nlet settings = {}\n\nlet themesDict = null\n\nlet defaults = {\n    'app.always_show_result': false,\n    'app.startup_check_updates': true,\n    'app.startup_check_updates_delay': 3000,\n    'app.loadgame_delay': 100,\n    'app.enable_hardware_acceleration': true,\n    'app.hide_busy_delay': 200,\n    'app.zoom_factor': 1,\n    'autoplay.sec_per_move': 1,\n    'autoplay.max_sec_per_move': 99,\n    'autoscroll.max_interval': 200,\n    'autoscroll.min_interval': 50,\n    'autoscroll.diff': 10,\n    'cleanmarkup.cross': true,\n    'cleanmarkup.triangle': true,\n    'cleanmarkup.square': true,\n    'cleanmarkup.circle': true,\n    'cleanmarkup.line': true,\n    'cleanmarkup.arrow': true,\n    'cleanmarkup.label': true,\n    'cleanmarkup.comments': false,\n    'cleanmarkup.annotations': false,\n    'cleanmarkup.hotspots': false,\n    'comments.show_move_interpretation': true,\n    'console.blocked_commands': [\n        'boardsize', 'clear_board', 'play',\n        'genmove', 'undo', 'fixed_handicap',\n        'place_free_handicap', 'set_free_handicap',\n        'loadsgf', 'komi'\n    ],\n    'console.max_history_count': 1000,\n    'debug.dev_tools': false,\n    'edit.click_currentvertex_to_remove': true,\n    'edit.show_removenode_warning': true,\n    'edit.show_removeothervariations_warning': true,\n    'edit.undo_delay': 100,\n    'engines.list': [],\n    'file.show_reload_warning': true,\n    'find.delay': 100,\n    'game.default_board_size': 19,\n    'game.default_komi': 6.5,\n    'game.default_handicap': 0,\n    'game.goto_end_after_loading': false,\n    'game.navigation_sensitivity': 40,\n    'game.show_ko_warning': true,\n    'game.show_suicide_warning': true,\n    'gamechooser.show_delay': 100,\n    'gamechooser.thumbnail_size': 153,\n    'graph.delay': 200,\n    'graph.edge_color': '#eee',\n    'graph.edge_inactive_color': '#777',\n    'graph.edge_size': 2,\n    'graph.edge_inactive_size': 1,\n    'graph.grid_size': 26,\n    'graph.node_active_color': '#f76047',\n    'graph.node_bookmark_color': '#c678dd',\n    'graph.node_color': '#eee',\n    'graph.node_inactive_color': '#777',\n    'graph.node_comment_color': '#6bb1ff',\n    'graph.node_inactive_bookmark_color': '#643d6f',\n    'graph.node_inactive_comment_color': '#365980',\n    'graph.node_size': 6,\n    'gtp.engine_quit_timeout': 3000,\n    'gtp.move_delay': 300,\n    'gtp.start_game_after_attach': true,\n    'score.estimator_iterations': 100,\n    'setting.overwrite.v0.16.0': ['console.blocked_commands', 'window.minheight'],\n    'setting.overwrite.v0.17.1': ['graph.collapse_tokens_count'],\n    'setting.overwrite.v0.19.0_1': ['window.minheight', 'graph.delay'],\n    'setting.overwrite.v0.19.1': ['app.startup_check_updates_delay'],\n    'setting.overwrite.v0.19.3': ['graph.grid_size', 'graph.node_size'],\n    'setting.overwrite.v0.30.0-beta': ['graph.delay', 'window.minheight', 'window.minwidth'],\n    'setting.overwrite.v0.33.0': ['console.max_history_count'],\n    'setting.overwrite.v0.33.4': ['score.estimator_iterations'],\n    'scoring.method': 'territory',\n    'sgf.comment_properties': ['C', 'N', 'UC', 'GW', 'DM', 'GB', 'BM', 'TE', 'DO', 'IT'],\n    'sound.capture_delay_max': 500,\n    'sound.capture_delay_min': 300,\n    'sound.enable': true,\n    'theme.custom_whitestones': null,\n    'theme.custom_blackstones': null,\n    'theme.custom_background': null,\n    'theme.current': null,\n    'view.properties_height': 50,\n    'view.properties_minheight': 20,\n    'view.animated_stone_placement': true,\n    'view.fuzzy_stone_placement': true,\n    'view.show_menubar': true,\n    'view.show_leftsidebar': false,\n    'view.show_comments': true,\n    'view.show_coordinates': false,\n    'view.show_graph': true,\n    'view.show_move_colorization': true,\n    'view.show_next_moves': true,\n    'view.show_siblings': true,\n    'view.leftsidebar_width': 250,\n    'view.leftsidebar_minwidth': 100,\n    'view.sidebar_width': 280,\n    'view.sidebar_minwidth': 100,\n    'infooverlay.duration': 2000,\n    'window.height': 604,\n    'window.minheight': 440,\n    'window.minwidth': 526,\n    'window.width': 564\n}\n\nexports.events = new EventEmitter()\nexports.events.setMaxListeners(100)\n\nexports.load = function() {\n    if (localStorage.settings != null) {\n        settings = JSON.parse(localStorage.settings)\n    } else {\n        settings = {}\n    }\n\n    // Load default settings\n\n    for (let key in defaults) {\n        if (key in settings) continue\n        settings[key] = defaults[key]\n    }\n\n    // Overwrite settings\n\n    for (let overwriteKey in settings) {\n        if (overwriteKey.indexOf('setting.overwrite.') != 0) continue\n\n        let overwrites = settings[overwriteKey]\n        if (!overwrites.length) continue\n\n        for (let i = 0; i < overwrites.length; i++) {\n            settings[overwrites[i]] = defaults[overwrites[i]]\n        }\n\n        settings[overwriteKey] = []\n    }\n\n    return exports.save()\n}\n\nexports.loadThemes = function() {\n    return {}\n}\n\nexports.save = function() {\n    localStorage.settings = JSON.stringify(settings)\n    return exports\n}\n\nexports.get = function(key) {\n    if (key in settings) return settings[key]\n    if (key in defaults) return defaults[key]\n    return null\n}\n\nexports.set = function(key, value) {\n    settings[key] = value\n    exports.save()\n    exports.events.emit('change', {key})\n    return exports\n}\n\nexports.getThemes = function() {\n    if (themesDict == null) exports.loadThemes()\n    return themesDict\n}\n\nexports.load()\n"],"sourceRoot":""}